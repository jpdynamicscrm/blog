<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan Dynamics CRM &amp; Power Platform Support Blog</title>
  
  <subtitle>日本マイクロソフトの Dynamics CRM &amp; Power Platform テクニカル サポート チームより、情報をお届けします！</subtitle>
  <link href="https://jpdynamicscrm.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpdynamicscrm.github.io/blog/"/>
  <updated>2026-02-20T00:55:29.196Z</updated>
  <id>https://jpdynamicscrm.github.io/blog/</id>
  
  <author>
    <name>Japan Dynamics CRM &amp; Power Platform Support Team</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Dataverse 容量不足を解消！一括削除機能の使い方と注意点まとめ</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/dataverse-bulk-delete-guide/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/dataverse-bulk-delete-guide/</id>
    <published>2026-02-18T15:00:00.000Z</published>
    <updated>2026-02-20T00:55:29.196Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platformサポートチームの中下です。</p><p>本記事ではDataverse の容量削減について、以下の Q1〜Q5 の質問に回答する形でご説明させていただきます。</p><ul><li><a href="#q1">Q1: Dataverse の「一括削除」とは、どのような機能ですか？</a></li><li><a href="#q2">Q2: 一括削除の具体的な設定手順を教えてください</a></li><li><a href="#q3">Q3: 監査ログもこの機能で削除できますか？</a></li><li><a href="#q4">Q4: 実行前に気をつけるべき注意点はありますか？</a></li><li><a href="#q5">Q5: 削除したはずなのに容量レポートが減りません</a></li></ul><h3 id="この記事でわかること"><a href="#この記事でわかること" class="headerlink" title="この記事でわかること"></a>この記事でわかること</h3><ul><li>Dataverse の容量（データベース、ファイル）を減らすための標準機能「一括削除」の概要</li><li>「30日以上前の成功したシステムジョブ」など、条件を指定して削除する方法</li><li>監査ログの削除が通常のレコード削除と異なる点</li><li>削除実行時のリスク（関連データの削除）と事前のバックアップ推奨</li><li>容量反映までのタイムラグについての理解</li></ul><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#q1">Dataverse の「一括削除」とは (Q1)</a></li><li><a href="#q2">一括削除の設定手順 (Q2)</a></li><li><a href="#q3">監査ログの削除について (Q3)</a></li><li><a href="#q4">実行時の注意点とリスク (Q4)</a></li><li><a href="#q5">容量反映のタイムラグ (Q5)</a></li></ul><h2 id="q1">Dataverse の「一括削除」とは (Q1)</h2><p>【結論】条件を指定して大量のデータをバックグラウンドで安全に削除し、Dataverse の容量を空けるための標準機能です。</p><p>Dataverse 容量が増加すると、環境の動作パフォーマンスが低下したり、テナントの容量をひっ迫する恐れがあります。このような場合、手動で1件ずつデータを消すのは現実的ではありません。</p><p>「一括削除（Bulk Delete）」機能を使うと、例えば以下のような条件で不要なデータをまとめて削除できます。</p><ul><li>「作成から 1 年以上経過した『システム ジョブ』の履歴」</li><li>「ステータスが完了になっている古い『電子メール』」</li><li>「もう使われていない『添付ファイル（メモ）』」</li></ul><p>この処理はバックグラウンド（裏側）で実行されるため、ユーザーの業務を止めることなく行えます。また、一度だけの実行だけでなく、「30日ごとに繰り返し実行する」といったスケジュールの設定も可能です。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/free-storage-space">Microsoft Dataverse ストレージ容量の解放 (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/delete-bulk-records">大量の特定の対象データを一括削除で削除する (Docs)</a></li></ul><h2 id="q2">一括削除の設定手順 (Q2)</h2><p>【結論】Power Platform 管理センターの設定メニューからウィザード形式で作成します。</p><p>具体的な手順は以下の通りです。</p><ol><li><strong>Power Platform 管理センター</strong> にサインインします。</li><li>左側のメニューから [環境] を選択し、対象の環境を開きます。</li><li>上部のコマンドバー、または「設定」から [設定] &gt; [データ管理] &gt; [一括削除] をクリックします。</li><li>一括削除の管理画面が開きますので、[新規] をクリックしフォームを開きます。</li><li><strong>レコード、検索条件の選択</strong>:<ul><li>[エンティティを検索する] のドロップダウンから削除したいテーブル（例: システム ジョブ）を選びます。</li><li>条件を指定します（例: [状態] [等しい] [成功]、[完了日] [次の値より古い] [1 か月] など）。</li><li>画面下の [レコードをプレビューする] ボタンを押すと、削除対象となるデータを確認できます。意図しないデータが含まれていないか必ず確認しましょう。<br><img src="/blog/powerplatform/dataverse-bulk-delete-guide/image.png"></li></ul></li><li><strong>オプションの選択</strong>:<ul><li>ジョブに名前を付けます。</li><li>[一括削除ジョブの開始時刻] を設定します（業務時間外の夜間などが推奨されます）。</li><li>定期的に実行したい場合は、[ジョブの実行間隔] にチェックを入れ、日数（例: 30日ごと）を指定します。</li><li>完了時にメール通知が必要な場合は、通知を送るユーザーを選択します。</li></ul></li><li>内容を確認して [送信] をクリックします。<br><img src="/blog/powerplatform/dataverse-bulk-delete-guide/image-1.png"><br>これでジョブが登録され、指定した日時に削除処理が開始されます。</li></ol><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/delete-bulk-records">大量の特定の対象データを一括削除で削除する (Docs)</a></li></ul><h2 id="q3">監査ログの削除について (Q3)</h2><p>【結論】監査ログは通常の一括削除ウィザードではなく、「監査ログ管理」から期間単位で削除します。</p><p>「監査ログ（Audit Log）」は、誰がいつデータにアクセスしたか、変更したかを記録する重要なデータです。これは通常のテーブル（行）とは異なる仕組みで保存されているため、Q2 で紹介した一括削除ウィザードでは削除できません。</p><p>監査ログを削除して「ログ容量」を空けるには、以下の手順を行います。</p><ol><li>Power Platform 管理センターで、対象の環境の [設定] &gt; [監査とログ] &gt; [監査ログ管理] を開きます。</li><li>ログが期間ごとにリスト表示されます。</li><li>最も古いログ、または特定の期間のログを選択し、[ログの削除] を実行します。</li></ol><p>以前は「最も古いログから順にしか消せない」という制約がありましたが、現在は特定の期間を選んで削除できる柔軟な管理が可能になっています。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/audit-log-deletion">監査ログ データの削除 (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/audit-data-user-activity">Dataverse 監査の概要 (Docs)</a></li></ul><h2 id="q4">実行時の注意点とリスク (Q4)</h2><p>【結論】一度削除したデータは元に戻せません。また、定期実行の設定を変更するとジョブが解除されてしまうため注意が必要です。</p><p>一括削除を実行する前に、以下のリスクと「よくある失敗」を確認してください。</p><p>【ポイント】</p><ol><li><p><strong>一括削除で削除されたレコードの復元機能はございますが、対応していないデータもあるので注意しましょう（ゴミ箱機能は制限があります）</strong></p><ul><li>現在、削除されたデータを復元する機能（ゴミ箱）がプレビューとして提供されていますが、すべてのデータには対応していません。</li><li>特に、容量削減のためによく削除される <strong>「システム ジョブ」などは復元の対象外</strong> となっているため、一括削除で消してしまうと元に戻せません。</li><li>「あとで戻せるから大丈夫」と過信せず、消してはいけないデータが含まれていないか慎重に確認してください。</li></ul></li><li><p><strong>「関連するデータ」も一緒に消えることがあります</strong></p><ul><li>例えば「取引先（会社）」のデータを消すと、その会社に紐付いている「担当者」や「やり取り履歴」も自動的に一緒に消える設定になっていることが多いです。</li><li>消すつもりのなかったデータまで巻き込んで消えてしまわないか、事前にプレビュー機能でよく確認しましょう。</li></ul></li><li><p><strong>みんなが使っていない時間に実行しましょう</strong></p><ul><li>大量のデータを消す作業は、コンピューターに大きな負荷がかかります。お昼休みや夜間など、システムを使う人が少ない時間に実行するように設定するのがおすすめです。</li></ul></li></ol><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/backup-restore-environments">環境のバックアップと復元 (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/data-platform/create-edit-entity-relationships#table-relationship-behavior">テーブルの関連付けの動作 (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/restore-deleted-table-records">削除されたテーブル レコードを復元する - プレビュー (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/restore-deleted-table-records#tables-not-currently-supported-for-the-deleted-records-feature">削除されたレコード機能で現在サポートされていないテーブル</a></li></ul><h2 id="q5">容量反映のタイムラグ (Q5)</h2><p>【結論】削除後、容量レポートに反映されるまで最大 24 〜 48 時間かかる場合があります。</p><p>「一括削除ジョブが『成功』になったのに、管理センターの容量グラフが減っていない」というお問い合わせをよくいただきます。これは不具合ではなく、仕様によるタイムラグです。</p><p>Dataverse の容量計算はリアルタイムではなく、非同期の集計処理によって行われています。削除処理が完了してから、その結果が容量レポートの数値に反映されるまで、通常 24 時間程度、場合によっては 48 時間ほどかかることがあります。</p><p>削除直後に減っていなくても焦らず、翌日以降に再度確認してみてください。もし数日経っても変化がない場合は、削除したデータ量が全体に対して微々たるものだった可能性や、インデックス等のシステム領域が再計算されていない可能性が考えられます。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/capacity-storage#capacity-page-details">新しい Microsoft Dataverse ストレージ容量 - 容量ページの詳細 (Docs)</a></li></ul><h2 id="summary">まとめ</h2><p>Dataverse の容量不足は、システムの安定稼働に関わる重要な課題です。手動での対応には限界があるため、「一括削除機能」を有効活用して、定期的に不要なデータをクリーニングする運用を自動化しましょう。</p><ul><li><strong>一括削除機能</strong>: 条件を指定して大量データをバックグラウンドで削除できる。</li><li><strong>監査ログ</strong>: 専用の管理画面から削除する。</li><li><strong>注意点</strong>: 復元できないためバックアップを推奨。関連データの削除に注意。</li><li><strong>反映</strong>: 容量レポートへの反映には 1〜2 日かかることがある。</li></ul><p>まずは「成功した古いシステムジョブ」など、業務影響のない安全なデータから削除設定を試してみることをおすすめします。</p><h2 id="notice">注意事項（情報の更新可能性）</h2>本記事の内容は執筆日時点の公開情報に基づいております。仕様や UI、制限事項は将来変更される可能性がございます。最新情報は公式ドキュメントをご確認くださいますようお願い申し上げます。]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platformサポートチームの中下です。&lt;/p&gt;
&lt;p&gt;本記事ではDataverse の容量削減について、以下の Q1〜Q5 の質問に回答する形でご説明させていただきます。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#q1&quot;&gt;Q1: Datave</summary>
      
    
    
    
    <category term="PowerPlatform" scheme="https://jpdynamicscrm.github.io/blog/categories/PowerPlatform/"/>
    
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/tags/Dataverse/"/>
    
    <category term="PowerPlatform" scheme="https://jpdynamicscrm.github.io/blog/tags/PowerPlatform/"/>
    
    <category term="Capacity" scheme="https://jpdynamicscrm.github.io/blog/tags/Capacity/"/>
    
  </entry>
  
  <entry>
    <title>Power Pages 認証キーの更新ガイド</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerpages/power-pages-auth-key/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerpages/power-pages-auth-key/</id>
    <published>2026-02-15T15:00:00.000Z</published>
    <updated>2026-02-20T00:55:29.116Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platformサポートチームの吉永です。</p><p>本記事では Power Pages 認証キーに関するご説明を行わせて頂きます。</p><p>Power Pages 認証キーは作成頂いた Web サイトをユーザー様で定期的に更新作業を実施する必要のある項目となっており、この認証キーが持つ有効期限が切れてしまった場合、Web サイトにアクセスできないといった大きな影響が生じます。</p><p>このため、Power Pages の Web サイトを作成する上で、Power Pages 認証キーをどのように管理いただくかは非常に重要なポイントとなります。</p><p>本記事では Power Pages 認証キーの管理について、以下の Q1〜Q4 の質問に回答する形でご説明させていただきます。</p><ul><li><a href="#auth-key-overview">Q1: Power Pages の認証キーとは何ですか？なぜ更新が必要なのですか？</a></li><li><a href="#expiration-impact">Q2: 認証キーの有効期限が切れるとどうなりますか？</a></li><li><a href="#renewal-steps">Q3: どうやってキーを更新すればいいですか？</a></li><li><a href="#auth-key-management">Q4: 認証キーはどのように管理すればいいですか？</a></li></ul><h3 id="この記事でわかること"><a href="#この記事でわかること" class="headerlink" title="この記事でわかること"></a>この記事でわかること</h3><ul><li>Power Pages が Dataverse (データ置き場) に接続するための「鍵」の仕組み</li><li>1 年に 1 回の更新を忘れた場合のリスク</li><li>Power Platform 管理センターを使った簡単な更新手順</li><li>更新作業に伴うサイトの一時的な再起動について</li></ul><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#auth-key-overview">Power Pages の認証キーとは何ですか？なぜ更新が必要なのですか？</a></li><li><a href="#expiration-impact">認証キーの有効期限が切れるとどうなりますか？</a></li><li><a href="#renewal-steps">どうやってキーを更新すればいいですか？</a></li><li><a href="#auth-key-management">認証キーはどのように管理すればいいですか？</a></li></ul><h2 id="auth-key-overview">Power Pages の認証キーとは何ですか？なぜ更新が必要なのですか？ (Q1)</h2><p>Power Pages 認証キーは Power Pages で作成された Web サイトを表示するために必要な Dataverse へのアクセスを行うための認証キーとなります。</p><p>前提として、Power Page で作られた Web サイトは、Azure 上に自動で用意されるアプリケーションを使い、Dataverse 上のデータを取得することで動作する仕組みとなっております。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-pages/admin/architecture">Power Pages アーキテクチャ (Docs)</a></li></ul><p><img src="/blog/powerpages/power-pages-auth-key/power-pages-architecture.png">  </p><p>このため、Power Pages の Web サイトが機能するためには、Power Pages (Web サイト) が Dataverse に接続可能な状態である必要があります。<br>この接続にはセキュリティ上の観点から「認証キー」を用いた接続が利用されておりますが、この「認証キー」には 1 年間という有効期限がございます。</p><p>この「認証キー」の有効期限は自動では更新されないことから、ユーザー様にて定期的に「認証キー」を更新していただく必要がございます。<br>Web サイト認証キーの管理</p><p>【補足 : 認証キーの実体】<br>先述させて頂きましたように、 Power Pages では Azure 上に自動で用意されるアプリケーションを使い、Dataverse 上のデータを取得することで動作する仕組みとなっております。</p><p>このため、Power Pages の Web サイトを作成した場合、対象の Web サイトに紐づくアプリケーションが Azure 上に自動で作成される仕組みとなっております。<br>このことから、Power Pages 認証キーの実体は Azrure から確認出来るアプリケーションに紐づく「証明書」と同様となります。<br><img src="/blog/powerpages/power-pages-auth-key/power-pages-azure-app.png"> </p><p>なお、Azure 上に登録されている Power Pages 関連のアプリケーションについては、基本的に「Portals-」から始まる名称で登録されています。</p><h2 id="expiration-impact">認証キーの有効期限が切れるとどうなりますか？ (Q2)</h2>「認証キー」の有効期限が切れた場合、Web サイトは Dataverse にアクセスできなくなります。Power Pages の Web サイトは Dataverse 上に保存された Web サイトのカスタマイズ情報などを使って動作しておりますので、以下のような問題が発生します。<ul><li>ログインができなくなる</li><li>フォームに入力したデータを送信できなくなる</li><li>ページにデータが表示されずエラーになる</li></ul><p>実際に「認証キーの有効期限が切れてしまっていたことで、Web サイトにアクセスできなくなった」というお問い合わせを頂くことがあり、影響としても非常に大きいものとなりますので、期限切れになる前に必ず更新作業を行って頂く必要がございます。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-pages/admin/manage-auth-key#check-expiration-of-an-auth-key">Web サイト認証キーの管理 - 認証キーの有効期限切れを確認する (Docs)</a></li></ul><h2 id="renewal-steps">どうやってキーを更新すればいいですか？ (Q3)</h2>Power Pages 認証キーは以下の手順で更新可能です。<ol><li><a href="https://aka.ms/ppac?utm_source=blog">Power Platform 管理センター</a> にアクセスします。</li><li>左側のメニューから [管理] &gt; [Power Pages] を選択します。</li><li>対象のウェブサイトを選択し、画面上部のメニューまたは詳細画面から [管理] (または [設定]) を探します。</li><li>[セキュリティ] セクションにある <strong>[Web サイト認証キー]</strong> をクリックします。</li><li>表示された画面で <strong>[キーの更新]</strong> ボタンを押し、確認画面で [OK] を選択します。<br><img src="/blog/powerpages/power-pages-auth-key/power-pages-auth-key.png">  </li></ol><p>これにより更新処理が始まり、自動でキーの更新が完了となります。</p><p>【ポイント】</p><p>1.認証キーの更新処理には Powre Pages の Webサイトを管理する権限が必要となります。</p><p>2.「キーの更新」ボタンを押すことで、新しいキーが自動生成されますが、新たなキーの有効期限は 1 年後となります。</p><p>3.認証キーを更新する際、ウェブサイトの再起動が発生します。<br>この再起動では  Web サイトが完全に停止するわけではございませんが、数分程度の間、利用者がサイトにアクセスしづらくなる可能性があるため、必要に応じて、夜間帯などでの実行をご検討ください。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-pages/admin/admin-roles">Web サイト管理に必要なロール (Docs)</a></li></ul><h2 id="auth-key-management">認証キーはどのように管理すればいいですか？ (Q4)</h2>Power Pages の認証キーは、有効期限切れが近づくと管理者宛に以下のような方法で複数回通知されます。<ul><li>電子メール</li><li>Power Platform 管理センター</li><li>Web サイト上</li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-pages/admin/manage-auth-key#check-authentication-key-expiration-notification">認証キーの有効期限切れを確認する (Docs)</a></li></ul><p>場合によってメールでの通知に気づくことが出来ない可能性がある一方で、有効期限が切れた場合の影響が大きいため、必要に応じてより通知に気づきやすい、漏れが生じにくい方法での管理についてもご検討いただけますと幸いです。</p><h2 id="summary">まとめ</h2><ul><li>Power Pages の認証キーは、安全なデータ接続に必要な「身分証明書」です。</li><li>有効期限 (1 年) が切れると、サイトが正常に動かなくなります。</li><li>管理センターから簡単に更新できますが、数分間のサイト再起動を伴います。</li><li>メール通知が届いたら、利用者の少ない時間帯を見計らって更新しましょう。</li></ul><h2 id="notice">注意事項（情報の更新可能性）</h2>本記事の内容は執筆日時点の公開情報に基づいております。仕様や UI、制限事項は将来変更される可能性がございます。最新情報は公式ドキュメントをご確認くださいますようお願い申し上げます。]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platformサポートチームの吉永です。&lt;/p&gt;
&lt;p&gt;本記事では Power Pages 認証キーに関するご説明を行わせて頂きます。&lt;/p&gt;
&lt;p&gt;Power Pages 認証キーは作成頂いた Web サイトをユーザー様で定期的に更新作業を実施す</summary>
      
    
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform/"/>
    
    
    <category term="Power Pages" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Pages/"/>
    
    <category term="Security" scheme="https://jpdynamicscrm.github.io/blog/tags/Security/"/>
    
    <category term="Administration" scheme="https://jpdynamicscrm.github.io/blog/tags/Administration/"/>
    
  </entry>
  
  <entry>
    <title>Power Platform 管理者向け PowerShell でできること代表例まとめ</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/power-platform-powershell-admin-guide/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/power-platform-powershell-admin-guide/</id>
    <published>2026-02-09T15:00:00.000Z</published>
    <updated>2026-02-20T00:55:29.247Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、PowerPlatformサポートチームの粟野です。</p><p>本記事では Power Platform 管理者向け PowerShell を使ってできる代表的な操作について、以下の Q1〜Q6 の質問に回答する形でご説明させていただきます。</p><ul><li><a href="#q1">Q1: Power Platform の PowerShell モジュールはどうやって準備すればよいですか？</a></li><li><a href="#q2">Q2: PowerShell で環境を作成するにはどうすればよいですか？</a></li><li><a href="#q3">Q3: 環境の一覧取得や詳細確認はできますか？</a></li><li><a href="#q4">Q4: Dataverse にユーザーを追加するにはどうすればよいですか？</a></li><li><a href="#q5">Q5: ユーザーに環境ロールを付与するにはどうすればよいですか？</a></li><li><a href="#q6">Q6: 環境のバックアップや復元は PowerShell でできますか？</a></li></ul><h3 id="この記事でわかること"><a href="#この記事でわかること" class="headerlink" title="この記事でわかること"></a>この記事でわかること</h3><ul><li>Power Platform 管理用 PowerShell モジュールの準備方法とサインインの手順</li><li>PowerShell を使った環境の新規作成やデータベース付きの環境作成の方法</li><li>環境の一覧取得や特定の環境の情報を確認する方法</li><li>Dataverse 環境にユーザーを追加する手順</li><li>環境管理者や環境作成者のロールをユーザーに付与する方法</li><li>環境のバックアップ・復元を PowerShell で実行する方法</li></ul><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#q1">Power Platform の PowerShell モジュールの準備 (Q1)</a></li><li><a href="#q2">PowerShell で環境を作成する (Q2)</a></li><li><a href="#q3">環境の一覧取得・詳細確認 (Q3)</a></li><li><a href="#q4">Dataverse にユーザーを追加する (Q4)</a></li><li><a href="#q5">ユーザーに環境ロールを付与する (Q5)</a></li><li><a href="#q6">環境のバックアップ・復元 (Q6)</a></li><li><a href="#summary">まとめ</a></li><li><a href="#notice">注意事項（情報の更新可能性）</a></li></ul><h2 id="q1">Power Platform の PowerShell モジュールの準備 (Q1)</h2><p>【結論】Power Platform を PowerShell で管理するには、専用の PowerShell モジュールを事前に PC へ入れておく必要があります。<br>モジュールのインストールとサインインの 2 ステップで準備が整います。</p><h3 id="モジュールのインストール"><a href="#モジュールのインストール" class="headerlink" title="モジュールのインストール"></a>モジュールのインストール</h3><p>管理者として PowerShell を開き、以下のコマンドを実行してください。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> <span class="literal">-Name</span> Microsoft.PowerApps.Administration.PowerShell</span><br><span class="line"><span class="built_in">Install-Module</span> <span class="literal">-Name</span> Microsoft.PowerApps.PowerShell <span class="literal">-AllowClobber</span></span><br></pre></td></tr></table></figure><p>PC の管理者権限がない場合は、末尾に <code>-Scope CurrentUser</code> を追加してください。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> <span class="literal">-Name</span> Microsoft.PowerApps.Administration.PowerShell <span class="literal">-Scope</span> CurrentUser</span><br><span class="line"><span class="built_in">Install-Module</span> <span class="literal">-Name</span> Microsoft.PowerApps.PowerShell <span class="literal">-AllowClobber</span> <span class="literal">-Scope</span> CurrentUser</span><br></pre></td></tr></table></figure><h3 id="サインイン"><a href="#サインイン" class="headerlink" title="サインイン"></a>サインイン</h3><p>モジュールを入れたら、以下のコマンドでサインインします。<br>ブラウザーのサインイン画面が表示されるので、管理者アカウントの資格情報を入力してください。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Add-PowerAppsAccount</span> <span class="literal">-Endpoint</span> prod</span><br></pre></td></tr></table></figure><p>【補足】コマンドレットで管理操作を行うには、Microsoft Entra ID のテナント管理者、Power Platform 管理者、Dynamics 365 管理者のいずれかの権限が必要です。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-powershell">Power Apps と Power Automate の PowerShell サポート (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powershell-installation">Power Platform 管理者用 PowerShell のインストール (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powershell-getting-started">Power Platform 管理者用 PowerShell の概要 (Docs)</a></li></ul><h2 id="q2">PowerShell で環境を作成する (Q2)</h2><p>【結論】<code>New-AdminPowerAppEnvironment</code> コマンドを使うと、PowerShell から環境を新しく作成できます。<br>環境の種類（本番、サンドボックス、試用版、開発者用など）や、場所（リージョン）を指定して作成します。</p><h3 id="基本的な環境の作成"><a href="#基本的な環境の作成" class="headerlink" title="基本的な環境の作成"></a>基本的な環境の作成</h3><p>以下は、日本リージョンに「テスト環境」という名前の試用版環境を作成する例です。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">New-AdminPowerAppEnvironment</span> <span class="literal">-DisplayName</span> <span class="string">&#x27;テスト環境&#x27;</span> <span class="literal">-LocationName</span> japan <span class="literal">-EnvironmentSku</span> Trial</span><br></pre></td></tr></table></figure><h3 id="Dataverse-データベース付きの環境を作成する"><a href="#Dataverse-データベース付きの環境を作成する" class="headerlink" title="Dataverse データベース付きの環境を作成する"></a>Dataverse データベース付きの環境を作成する</h3><p>Dataverse（データを保存するためのデータベース）を同時につくりたい場合は、<code>-ProvisionDatabase</code> を付けて、言語と通貨も指定します。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">New-AdminPowerAppEnvironment</span> <span class="literal">-DisplayName</span> <span class="string">&#x27;Japan Dev&#x27;</span> <span class="literal">-LocationName</span> japan <span class="literal">-EnvironmentSku</span> Sandbox <span class="literal">-ProvisionDatabase</span> <span class="literal">-LanguageName</span> <span class="number">1041</span> <span class="literal">-CurrencyName</span> JPY</span><br></pre></td></tr></table></figure><p>【ポイント】</p><ol><li><code>-EnvironmentSku</code> で指定できる種類は <code>Production</code>（本番）、<code>Sandbox</code>（サンドボックス）、<code>Trial</code>（試用）、<code>Developer</code>（開発者用）などがあります</li><li><code>-LocationName</code> はリージョンです。日本の場合は <code>japan</code> を指定します</li><li><code>-ProvisionDatabase</code> を付けると Dataverse データベースが自動で作られます</li><li>データベースを作る場合は <code>-LanguageName</code>（言語コード）と <code>-CurrencyName</code>（通貨コード）を必ず指定してください</li><li><code>-SecurityGroupId</code> を指定すると、環境にアクセスできるユーザーをセキュリティグループで絞り込めます</li></ol><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.powerapps.administration.powershell/new-adminpowerappenvironment?view=pa-ps-latest">New-AdminPowerAppEnvironment (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-powershell">Power Apps と Power Automate の PowerShell サポート (Docs)</a></li></ul><h2 id="q3">環境の一覧取得・詳細確認 (Q3)</h2><p>【結論】<code>Get-AdminPowerAppEnvironment</code> コマンドで、テナント内のすべての環境の一覧や、特定の環境の詳細を確認できます。</p><h3 id="すべての環境を一覧表示する"><a href="#すべての環境を一覧表示する" class="headerlink" title="すべての環境を一覧表示する"></a>すべての環境を一覧表示する</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-AdminPowerAppEnvironment</span></span><br></pre></td></tr></table></figure><p>このコマンドを実行すると、テナント内にあるすべての環境の名前（ID）、表示名、場所、作成者などが一覧で表示されます。</p><h3 id="既定の環境だけを確認する"><a href="#既定の環境だけを確認する" class="headerlink" title="既定の環境だけを確認する"></a>既定の環境だけを確認する</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-AdminPowerAppEnvironment</span> <span class="literal">-Default</span></span><br></pre></td></tr></table></figure><h3 id="特定の環境の詳細を確認する"><a href="#特定の環境の詳細を確認する" class="headerlink" title="特定の環境の詳細を確認する"></a>特定の環境の詳細を確認する</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-AdminPowerAppEnvironment</span> <span class="literal">-EnvironmentName</span> <span class="string">&#x27;環境のID（GUID）&#x27;</span></span><br></pre></td></tr></table></figure><p>【補足】<code>-EnvironmentName</code> に指定するのは画面上の「表示名」ではなく、GUID と呼ばれる環境の内部的な識別子です。<br>一覧表示の結果や PowerPlatform 管理センターから確認できます。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-powershell#%E7%92%B0%E5%A2%83%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89">Power Apps と Power Automate の PowerShell サポート - 環境コマンド (Docs)</a></li></ul><h2 id="q4">Dataverse にユーザーを追加する (Q4)</h2><p>【結論】<code>Add-AdminPowerAppsSyncUser</code> コマンドを使うと、指定した Dataverse 環境にユーザーを追加できます。</p><p>以下は、環境にユーザーを追加する例です。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Add-AdminPowerAppsSyncUser</span> <span class="literal">-EnvironmentName</span> <span class="string">&#x27;環境のID&#x27;</span> <span class="literal">-PrincipalObjectId</span> <span class="string">&#x27;ユーザーのオブジェクトID&#x27;</span></span><br></pre></td></tr></table></figure><p>【補足】<code>-PrincipalObjectId</code> に指定する値は、Microsoft Entra ID（旧 Azure AD）上でのユーザーの「オブジェクト ID」です。<br>Microsoft Entra 管理センターや Azure ポータルの「ユーザー」画面から確認できます。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.powerapps.administration.powershell/add-adminpowerappssyncuser?view=pa-ps-latest">Add-AdminPowerAppsSyncUser (Docs)</a></li></ul><h2 id="q5">ユーザーにロールを付与する (Q5)</h2><p>【結論】ロールの付与方法は、環境に Dataverse データベースがあるかどうかで異なります。<br>Dataverse がない環境では PowerShell の <code>Set-AdminPowerAppEnvironmentRoleAssignment</code> を、Dataverse がある環境では Power Platform CLI の <code>pac admin assign-user</code> を使います。</p><h3 id="Dataverse-がない環境の場合：PowerShell"><a href="#Dataverse-がない環境の場合：PowerShell" class="headerlink" title="Dataverse がない環境の場合：PowerShell"></a>Dataverse がない環境の場合：PowerShell</h3><p><code>Set-AdminPowerAppEnvironmentRoleAssignment</code> で「環境管理者」や「環境作成者」のロールを付与できます。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-AdminPowerAppEnvironmentRoleAssignment</span> `</span><br><span class="line">  <span class="literal">-EnvironmentName</span> <span class="string">&#x27;bbbbbbbb-1111-2222-3333-cccccccccccc&#x27;</span> `</span><br><span class="line">  <span class="literal">-RoleName</span> EnvironmentAdmin `</span><br><span class="line">  <span class="literal">-PrincipalType</span> User `</span><br><span class="line">  <span class="literal">-PrincipalObjectId</span> <span class="string">&#x27;aaaaaaaa-0000-1111-2222-bbbbbbbbbbbb&#x27;</span></span><br></pre></td></tr></table></figure><p>テナント全体のユーザーに環境作成者ロールを付与する場合は以下のとおりです。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-AdminPowerAppEnvironmentRoleAssignment</span> `</span><br><span class="line">  <span class="literal">-EnvironmentName</span> <span class="string">&#x27;bbbbbbbb-1111-2222-3333-cccccccccccc&#x27;</span> `</span><br><span class="line">  <span class="literal">-RoleName</span> EnvironmentMaker `</span><br><span class="line">  <span class="literal">-PrincipalType</span> Tenant</span><br></pre></td></tr></table></figure><p>【ポイント】</p><ol><li><code>-RoleName</code> には <code>EnvironmentAdmin</code>（環境管理者）または <code>EnvironmentMaker</code>（環境作成者）を指定します</li><li><code>-PrincipalType</code> には <code>User</code>（ユーザー個人）、<code>Group</code>（セキュリティグループ）、<code>Tenant</code>（テナント全体）のいずれかを指定します</li><li><code>User</code> や <code>Group</code> を指定した場合は <code>-PrincipalObjectId</code> で対象のオブジェクト ID も指定してください</li></ol><h3 id="Dataverse-がある環境の場合：Power-Platform-CLI"><a href="#Dataverse-がある環境の場合：Power-Platform-CLI" class="headerlink" title="Dataverse がある環境の場合：Power Platform CLI"></a>Dataverse がある環境の場合：Power Platform CLI</h3><p>Dataverse がある環境では上記の PowerShell コマンドは 403 エラーになります。<br>代わりに Power Platform CLI に含まれる <code>pac admin assign-user</code> コマンドを使います。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pac admin assign<span class="literal">-user</span> `</span><br><span class="line">  -<span class="literal">-environment</span> <span class="number">00000000</span><span class="literal">-0000</span><span class="literal">-0000</span><span class="literal">-0000</span><span class="literal">-000000000000</span> `</span><br><span class="line">  -<span class="literal">-user</span> <span class="string">&quot;user@contoso.com&quot;</span> `</span><br><span class="line">  -<span class="literal">-role</span> <span class="string">&quot;Basic User&quot;</span></span><br></pre></td></tr></table></figure><p>【補足】<code>pac admin assign-user</code> を使うには、あらかじめ Power Platform CLI をインストールし、<code>pac auth create</code> で認証を済ませておく必要があります。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.powerapps.administration.powershell/set-adminpowerappenvironmentroleassignment?view=pa-ps-latest">Set-AdminPowerAppEnvironmentRoleAssignment (Docs)</a></li><li><a href="https://learn.microsoft.com/en-us/power-platform/developer/cli/reference/admin#pac-admin-assign-user">pac admin assign-user (Docs / 英語のみ)</a></li></ul><h2 id="q6">環境のバックアップ・復元 (Q6)</h2><p>【結論】PowerShell を使えば、環境のバックアップ作成と復元をコマンドで実行できます。<br>手動バックアップを定期的に取得したい場合や、復元作業を自動化したい場合に便利です。</p><h3 id="バックアップを作成する"><a href="#バックアップを作成する" class="headerlink" title="バックアップを作成する"></a>バックアップを作成する</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$backupRequest</span> = [<span class="type">pscustomobject</span>]<span class="selector-tag">@</span>&#123;</span><br><span class="line">    Label = <span class="string">&quot;手動バックアップ 2026年2月&quot;</span></span><br><span class="line">    Notes = <span class="string">&quot;定期バックアップ&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Backup-PowerAppEnvironment</span> <span class="literal">-EnvironmentName</span> <span class="string">&#x27;環境のID&#x27;</span> <span class="literal">-BackupRequestDefinition</span> <span class="variable">$backupRequest</span></span><br></pre></td></tr></table></figure><h3 id="バックアップ一覧を確認する"><a href="#バックアップ一覧を確認する" class="headerlink" title="バックアップ一覧を確認する"></a>バックアップ一覧を確認する</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-PowerAppEnvironmentBackups</span> <span class="literal">-EnvironmentName</span> <span class="string">&#x27;環境のID&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="バックアップから復元する"><a href="#バックアップから復元する" class="headerlink" title="バックアップから復元する"></a>バックアップから復元する</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$restoreRequest</span> = [<span class="type">pscustomobject</span>]<span class="selector-tag">@</span>&#123;</span><br><span class="line">    SourceEnvironmentId = <span class="string">&quot;復元元の環境ID&quot;</span></span><br><span class="line">    TargetEnvironmentName = <span class="string">&quot;復元先の環境表示名&quot;</span></span><br><span class="line">    RestorePointDateTime = <span class="string">&quot;2026-02-10 09:00:00&quot;</span></span><br><span class="line">    SkipAuditData = <span class="variable">$true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Restore-PowerAppEnvironment</span> <span class="literal">-EnvironmentName</span> <span class="string">&#x27;復元先の環境ID&#x27;</span> <span class="literal">-RestoreToRequestDefinition</span> <span class="variable">$restoreRequest</span></span><br></pre></td></tr></table></figure><p>【補足】復元操作を行うと、復元先の環境のデータが上書きされます。<br>上書きされたデータは元に戻せませんので、実行前に十分ご確認ください。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.powerapps.administration.powershell/backup-powerappenvironment?view=pa-ps-latest">Backup-PowerAppEnvironment (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.powerapps.administration.powershell/restore-powerappenvironment?view=pa-ps-latest">Restore-PowerAppEnvironment (Docs)</a></li></ul><h2 id="summary">まとめ</h2><ul><li>Power Platform 管理用 PowerShell モジュールを使えば、環境の作成・一覧取得・バックアップ・復元などの環境管理をコマンドで自動化できます</li><li><code>Add-AdminPowerAppsSyncUser</code> で Dataverse へのユーザー追加、<code>Set-AdminPowerAppEnvironmentRoleAssignment</code> で環境ロール付与が PowerShell から実行できます</li><li>定型的な管理作業をスクリプト化することで、作業の効率化やミスの防止が期待できます</li><li>まずはテスト用の環境で各コマンドの動きを確認してから、本番環境に適用することをおすすめいたします</li></ul><h2 id="notice">注意事項（情報の更新可能性）</h2><p>本記事の内容は執筆日時点の公開情報に基づいております。<br>仕様や UI、制限事項は将来変更される可能性がございます。<br>最新情報は公式ドキュメントをご確認くださいますようお願い申し上げます。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、PowerPlatformサポートチームの粟野です。&lt;/p&gt;
&lt;p&gt;本記事では Power Platform 管理者向け PowerShell を使ってできる代表的な操作について、以下の Q1〜Q6 の質問に回答する形でご説明させていただきます。&lt;/p&gt;
&lt;ul</summary>
      
    
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform/"/>
    
    
    <category term="PowerShell" scheme="https://jpdynamicscrm.github.io/blog/tags/PowerShell/"/>
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="環境管理" scheme="https://jpdynamicscrm.github.io/blog/tags/%E7%92%B0%E5%A2%83%E7%AE%A1%E7%90%86/"/>
    
    <category term="ユーザー管理" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E7%AE%A1%E7%90%86/"/>
    
    <category term="セキュリティロール" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3%E3%83%AD%E3%83%BC%E3%83%AB/"/>
    
  </entry>
  
  <entry>
    <title>Dataverse Search のストレージ内訳と削減の考え方（Q&amp;Aガイド）</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/dataverse-search-storage-guide/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/dataverse-search-storage-guide/</id>
    <published>2026-01-18T06:00:00.000Z</published>
    <updated>2026-02-20T00:55:29.197Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platformサポートチームの鈴木です。</p><p>本記事ではDataverse Search のストレージ内訳について、以下の Q1〜Q5 の質問に回答する形でご説明させていただきます。</p><ul><li><a href="#q1">Q1: PPAC の「Dataverse Search」ストレージは何の合算値ですか？</a></li><li><a href="#q2">Q2: 検索インデックス（Search）の中身と削減のコツは？</a></li><li><a href="#q3">Q3: 構造化インデックス（Structured）の中身と削減のコツは？</a></li><li><a href="#q4">Q4: テキストデータインデックス（TextData）の中身と削減のコツは？</a></li><li><a href="#q5">Q5: 画面で見えない内訳をどう管理すればよいですか？</a></li></ul><h3 id="この記事でわかること"><a href="#この記事でわかること" class="headerlink" title="この記事でわかること"></a>この記事でわかること</h3><ul><li>PPAC に表示される Dataverse Search ストレージの意味。</li><li>3 種類のインデックス（Search / Structured / TextData）の役割。</li><li>それぞれの容量が増える主因と削減アプローチ。</li><li>Copilot / エージェントとインデックスの関係。</li><li>PPACで直接は見えない内訳の考え方と運用ポイント。</li></ul><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#q1">Q1: PPAC の「Dataverse Search」ストレージは何の合算値ですか？</a></li><li><a href="#q2">Q2: 検索インデックス（Search）の中身と削減のコツは？</a></li><li><a href="#q3">Q3: 構造化インデックス（Structured）の中身と削減のコツは？</a></li><li><a href="#q4">Q4: テキストデータインデックス（TextData）の中身と削減のコツは？</a></li><li><a href="#q5">Q5: 画面で見えない内訳をどう管理すればよいですか？</a></li></ul><h2 id="q1">PPAC の「Dataverse Search」ストレージは何の合算値ですか？ (Q1)</h2>【結論】PPAC に表示される Dataverse Search ストレージは、「検索インデックス（Relevance / Search）」「構造化インデックス（Structured）」「非構造化（テキスト）インデックス（Unstructured / TextData）」の合算です。<p>【補足】インデックスは、グローバル検索や Copilot のためにデータを探しやすくする仕組みです。<br>Power Platform 管理センター のテーブル容量画面では合計のみが表示され、各内訳の使用量は直接は見えません。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-apps/user/relevance-search-benefits">Dataverse 検索とは（インデックスの種類）</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/configure-relevance-search-organization#how-much-will-dataverse-search-cost">Dataverse 検索の構成（費用・容量に関する記載）</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/release-plan/2025wave1/data-platform/enhance-ai-powered-experiences-dataverse-search">Dataverse 検索による AI 搭載エクスペリエンスの強化 (Release Plan)</a></li></ul><h2 id="q2">検索インデックス（Search）の中身と削減のコツは？ (Q2)</h2>【結論】検索インデックスは、モデル駆動アプリのグローバル検索用に、対象テーブルの「検索対象列」とレコードを素早く探すための情報を保持します。対象テーブル数・検索対象列数・レコード数が多いほど容量が増えます。<p>【補足】不要なテーブルや列を検索対象から外すことで容量を抑えられます。<br>必要に応じて、環境設定の Dataverse 検索 を「既定（Default）」または「オフ（Off）」にすることで、容量を抑えられます。(モデル駆動型アプリのグローバル検索用の検索ボックスは表示されなくなります。)</p><p>【容量削減のためのポイント】</p><ol><li>検索対象テーブルの見直し（業務で検索しない履歴テーブル等は対象外）。</li><li>検索対象列の削減（フリーテキストに不要な列は対象外）。</li><li>必要な場合のみ環境で検索機能を「既定」や「オフ」に設定。</li></ol><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-apps/user/relevance-search#understand-search-results">テーブルと行を Dataverse 検索で検索する（対象列種の説明）</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/configure-relevance-search-organization#select-tables-for-dataverse-searchs-global-search">Dataverse 検索の構成（対象テーブル・列の設定手順）</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-apps/user/relevance-search-benefits#what-actions-can-makers-or-admins-take-to-manage-dataverse-search-efficiently">Dataverse 検索の効率的な管理（テーブル/列の外し方）</a></li></ul><h2 id="q3">構造化インデックス（Structured）の中身と削減のコツは？ (Q3)</h2>【結論】構造化インデックスは、Copilot や AI エージェントが Dataverse のテーブルデータを理解し、関係性をたどって推論するための索引です。App Copilot や Copilot Studio のエージェント、Dynamics 365 の一部 Copilot が利用します。<p>【補足】不要なアプリでの App Copilot 無効化、未使用エージェントやナレッジソースの削除で容量を抑えられます。<br>一部のファーストパーティ Copilot は専用の管理画面で無効化が必要です。</p><p>【容量削減のためのポイント】</p><ol><li>アプリ単位で App Copilot を無効化。</li><li>環境設定で Copilot をオフ。</li><li>Copilot Studio の未使用エージェントや Dataverse ナレッジソースの削除。</li><li>営業ハブや Customer Service における Copilot をオフ。</li></ol><p>【補足】Dynamics 365 Sales Close Agent（SCA）機能において、Product（製品）エンティティ向けのセマンティック検索（Semantic Search） が有効化されたことで、構造化インデックス（Structured）の容量増加となる場合があります。<br>無効化により当該インデックスが削除され、容量が削減される見込みです。利用されない場合は、以下の方法で当該機能の無効化を行うことが可能です。</p><ol><li>対象環境のモデル駆動型アプリへ管理者権限でアクセスします。</li><li>F12 で開発者ツールを開き、コンソールタブを表示します。</li><li>次の JavaScript を実行して該当の検索スキルレコードを無効化します。</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Xrm.WebApi.retrieveMultipleRecords(</span><br><span class="line"><span class="string">&quot;dvtablesearch&quot;</span>,</span><br><span class="line"><span class="string">&quot;?$filter=name eq &#x27;Product_UkrWydE7w4YL3rT7pU6s3&#x27;&quot;</span></span><br><span class="line">).then(<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (result.entities.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> dvtablesearchId = result.entities[<span class="number">0</span>].dvtablesearchid;</span><br><span class="line"></span><br><span class="line">Xrm.WebApi.updateRecord(<span class="string">&quot;dvtablesearch&quot;</span>, dvtablesearchId, &#123;</span><br><span class="line"><span class="string">&quot;statecode&quot;</span>: <span class="number">1</span></span><br><span class="line">&#125;).then(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;dvtablesearch has been updated successfully:&quot;</span>, res);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.error(<span class="string">&quot;Update failed, please retry:&quot;</span>, error.message);</span><br><span class="line">&#125;</span><br><span class="line">);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;No record found with name = Product_UkrWydE7w4YL3rT7pU6s3.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>【補足】無効化状態の確認は次の API で行えます。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;環境URL&gt;/api/data/v9.0/dvtablesearchs?$filter=(name%20eq%20%27Product_UkrWydE7w4YL3rT7pU6s3%27)</span><br></pre></td></tr></table></figure><p>【補足】statecode が 1 の場合は当該機能がオフと判断いただけます。</p><p>【リスク軽減】本操作は環境に影響しますので、検証環境での事前確認や変更管理の手続きを行ったうえで実施してください。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/model-driven-apps/add-ai-copilot#disable-copilot-chat-for-a-model-driven-app">モデル駆動型アプリの Copilot チャット の有効/無効化</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/model-driven-apps/add-ai-copilot#enable-copilot-for-model-driven-apps-in-your-environment">環境内のモデル駆動型アプリの Copilot の有効/無効化</a></li><li><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/knowledge-add-dataverse">MCS（Microsoft Copilot Studio）で Knowledge Source の追加</a></li><li><a href="https://learn.microsoft.com/ja-jp/dynamics365/sales/enable-setup-copilot#turn-copilot-features-on-or-off-in-sales-hub">営業ハブ における Copilot の機能</a></li><li><a href="https://learn.microsoft.com/ja-jp/dynamics365/customer-service/administer/configure-copilot-features#opt-out-of-using-copilot-features">Customer Service における Copilot の機能</a><br>Copilot Service 管理センター アプリにアクセスし、以下から確認できる各機能を利用いただいていない場合には、無効化することは可能です。<ul><li>サポートエクスペリエンス &gt; 生産性 &gt; 質問やメールに使用する Copilot</li><li>サポートエクスペリエンス &gt; 生産性 &gt; 要約<br>※画面下部に「この機能のオプトアウト」の設定があります。</li></ul></li></ul><h2 id="q4">テキストデータインデックス（TextData）の中身と削減のコツは？ (Q4)</h2>【結論】テキストデータインデックスは、Copilot / エージェントが参照する非構造化データ（PDF や Word、OneDrive / SharePoint の文書など）を検索・要約するための索引です。アップロードや連携したファイルが多いほど容量が増えます。<p>【補足】未使用ファイルの削除、不要な OneDrive / SharePoint の連携解除で容量を抑えられます。</p><p>【容量削減のためのポイント】</p><ol><li>エージェント内の未使用ファイルを削除。</li><li>参照しない OneDrive / SharePoint の接続を解除。</li><li>必要なファイルやフォルダのみを選ぶ（深いフォルダを丸ごと選ばない）。</li></ol><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/knowledge-add-file-upload">Copilot Studio: ファイルをナレッジソースに追加</a></li><li><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/knowledge-add-sharepoint">Copilot Studio: SharePoint をナレッジソースに追加</a></li><li><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/knowledge-unstructured-data">Copilot Studio: 非構造化データの追加 </a></li></ul><h2 id="q5">画面で見えない内訳をどう管理すればよいですか？ (Q5)</h2>【結論】Power Platform 管理センター では合計のみの表示ですので、アプリ・エージェント単位で「どの機能がどのインデックスを使っているか」を整理し、不要な対象を段階的に外すのが有効です。 また、環境の Dataverse Search を「既定」にするとグローバル検索のインデックス生成を抑えられます。<p>【補足】Copilot などの生成 AI は構造化/非構造化インデックスを使います。 方針に合わせて機能を無効化・対象縮小すると容量が削減されます。</p><p>【よくある誤解】</p><ul><li>誤解: Dataverse Search を「既定」にするとすべてのインデックスが止まる。<ul><li>→ 正しくは: グローバル検索用は抑制されますが、Copilot など他機能向けの索引は個別設定により維持される場合があります。</li></ul></li><li>誤解: アプリで Copilot をオフにしても環境全体の索引が消える。<ul><li>→ 正しくは: アプリ単位の影響に限定されます。環境や他アプリ・エージェントの設定は別途管理が必要です。</li></ul></li></ul><h2 id="summary">まとめ</h2>- Power Platform 管理センター の Dataverse Search ストレージは検索・構造化・テキストの 3 インデックスの合算です。<ul><li><p>検索インデックスは、グローバル検索対象のテーブル/列/レコード数の見直しで削減できます。</p></li><li><p>構造化インデックスは Copilot/エージェントの無効化・対象縮小で抑えられます。</p></li><li><p>テキストデータインデックスは未使用ファイル削除・連携解除で減らせます。</p></li></ul><h2 id="notice">注意事項（情報の更新可能性）</h2>本記事の内容は執筆日時点の公開情報に基づいております。仕様や UI、制限事項は将来変更される可能性がございます。最新情報は公式ドキュメントをご確認くださいますようお願い申し上げます。]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platformサポートチームの鈴木です。&lt;/p&gt;
&lt;p&gt;本記事ではDataverse Search のストレージ内訳について、以下の Q1〜Q5 の質問に回答する形でご説明させていただきます。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#q1&quot;&gt;</summary>
      
    
    
    
    <category term="powerplatform" scheme="https://jpdynamicscrm.github.io/blog/categories/powerplatform/"/>
    
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/tags/Dataverse/"/>
    
    <category term="検索" scheme="https://jpdynamicscrm.github.io/blog/tags/%E6%A4%9C%E7%B4%A2/"/>
    
    <category term="ストレージ" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8/"/>
    
    <category term="Copilot" scheme="https://jpdynamicscrm.github.io/blog/tags/Copilot/"/>
    
  </entry>
  
  <entry>
    <title>モバイル端末で SharePoint をソースにしたキャンバスアプリの画像やメディアが表示されない場合の対処方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/canvasapp/sharepoint-image-mobile-issue/"/>
    <id>https://jpdynamicscrm.github.io/blog/canvasapp/sharepoint-image-mobile-issue/</id>
    <published>2026-01-16T03:00:00.000Z</published>
    <updated>2026-02-20T00:55:28.887Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートの竹内です。<br>今回は、モバイル端末で SharePoint をデータソースとしたキャンバスアプリを利用する際に、画像やメディアファイルが表示されない問題について、下記項目の順にご説明いたします。</p><ol><li>問題の概要</li><li>発生原因</li><li>対処方法</li><li>その他の原因について (参考)</li><li>参考情報</li></ol><span id="more"></span><h2 id="1-問題の概要"><a href="#1-問題の概要" class="headerlink" title="1. 問題の概要"></a>1. 問題の概要</h2><p>SharePoint リストをデータソースとしたキャンバスアプリにおいて、以下のような事象が発生することがございます。</p><ul><li><strong>Web ブラウザ (PC)</strong> では画像やメディアが正常に表示されるが、<strong>Power Apps モバイルアプリ (iOS/Android)</strong> では表示されない</li><li><strong>Teams デスクトップ/モバイルアプリ</strong> 内で公開されたアプリでも同様に表示されない</li></ul><h2 id="2-発生原因"><a href="#2-発生原因" class="headerlink" title="2. 発生原因"></a>2. 発生原因</h2><h3 id="2-1-クロスオリジンでの認証情報の問題"><a href="#2-1-クロスオリジンでの認証情報の問題" class="headerlink" title="2.1 クロスオリジンでの認証情報の問題"></a>2.1 クロスオリジンでの認証情報の問題</h3><p>Power Apps（<code>*.powerapps.com</code>）と SharePoint（<code>*.sharepoint.com</code>）は<strong>異なるオリジン（ドメイン）</strong> です。<br>Power Apps から SharePoint の画像を取得しようとすると、クロスオリジンリクエストとなり、<strong>SharePoint オリジンの認証情報が必要</strong>になります。</p><h3 id="2-2-なぜブラウザでは表示されるのか"><a href="#2-2-なぜブラウザでは表示されるのか" class="headerlink" title="2.2 なぜブラウザでは表示されるのか"></a>2.2 なぜブラウザでは表示されるのか</h3><p>Web ブラウザでアプリを実行する場合、ユーザーが以前に SharePoint サイトにログインしていると、ブラウザには <code>*.sharepoint.com</code> ドメインの <strong>Cookie（認証情報）</strong> が保存されています。<br>Power Apps から SharePoint への画像リクエスト時、ブラウザはこの Cookie を自動的に送信するため、SharePoint が認証済みリクエストとして処理し、画像を返します。</p><p>プライベートブラウジングモードや、SharePoint に事前にログインしていない状態では、ブラウザでも画像が表示されない場合がございます。</p><h3 id="2-3-なぜモバイルアプリでは表示されないのか"><a href="#2-3-なぜモバイルアプリでは表示されないのか" class="headerlink" title="2.3 なぜモバイルアプリでは表示されないのか"></a>2.3 なぜモバイルアプリでは表示されないのか</h3><p>Power Apps モバイルアプリはネイティブアプリであり、ブラウザとは独立しています。<br>そのため、<strong>SharePoint オリジン（<code>*.sharepoint.com</code>）の認証情報（Cookie）を持っていません。</strong></p><p>認証情報なしでリクエストが送信されるため、SharePoint がリクエストを拒否し、画像が表示されません。</p><h3 id="2-4-Power-Apps-で-URL-書き換えが行われないケース"><a href="#2-4-Power-Apps-で-URL-書き換えが行われないケース" class="headerlink" title="2.4 Power Apps で URL 書き換えが行われないケース"></a>2.4 Power Apps で URL 書き換えが行われないケース</h3><p>Power Apps は、SharePoint リストの「画像 (Image)」列タイプのデータを、Power Apps で認証できる形式に URL 書き換えを行います。この書き換えが行われた URL であれば、Power Apps が認証を代行するため、モバイルアプリでも画像が表示されます。</p><p>ただし、以下のケースでは URL 書き換えが行われないため、モバイルアプリで画像が表示されません。</p><table><thead><tr><th>ケース</th><th>説明</th></tr></thead><tbody><tr><td>テキスト列に画像 URL を保存している</td><td>「画像 (Image)」列タイプではないため、URL 書き換えが行われません</td></tr><tr><td>異なるサイトの画像を参照している</td><td>リストがサイト A にあり、画像がサイト B にある場合、URL 書き換えがサポートされていません</td></tr></tbody></table><h2 id="3-対処方法"><a href="#3-対処方法" class="headerlink" title="3. 対処方法"></a>3. 対処方法</h2><h3 id="対処方法-1-モバイルブラウザから-Power-Apps-にアクセスする"><a href="#対処方法-1-モバイルブラウザから-Power-Apps-にアクセスする" class="headerlink" title="対処方法 1: モバイルブラウザから Power Apps にアクセスする"></a>対処方法 1: モバイルブラウザから Power Apps にアクセスする</h3><p>Power Apps モバイルアプリではなく、モバイルデバイスのブラウザを使用してアプリを実行します。</p><ol><li>モバイルブラウザで、画像が保存されている <strong>SharePoint サイトに先にアクセス</strong> し、サインインします。<br>これにより、ブラウザに SharePoint の認証 Cookie が保存されます。</li><li>同じモバイルブラウザで <a href="https://make.powerapps.com/">Power Apps ポータル</a> にアクセスし、アプリを実行します。</li></ol><div class="alert is-info"><p class="alert-title">Note</p><p>この方法では、Power Apps モバイルアプリの機能 (カメラ、GPS など) の一部が制限される場合がございます。</p></div><h3 id="対処方法-2-「画像-Image-」列タイプを使用する"><a href="#対処方法-2-「画像-Image-」列タイプを使用する" class="headerlink" title="対処方法 2: 「画像 (Image)」列タイプを使用する"></a>対処方法 2: 「画像 (Image)」列タイプを使用する</h3><p>SharePoint リストで「画像 (Image)」列タイプを使用し、この列に直接画像をアップロードしてください。<br>Power Apps が URL 書き換えを行い、モバイルアプリでも画像が表示されます。</p><div class="alert is-info"><p class="alert-title">Note</p><p>ハイパーリンク列に URL を保存している場合などには SharePoint リストでは画像が表示される場合でも、Power Apps モバイルアプリで画像が表示されません。</p></div><h3 id="対処方法-3-ファイルを-SharePoint-リストの添付ファイルとして保存する"><a href="#対処方法-3-ファイルを-SharePoint-リストの添付ファイルとして保存する" class="headerlink" title="対処方法 3: ファイルを SharePoint リストの添付ファイルとして保存する"></a>対処方法 3: ファイルを SharePoint リストの添付ファイルとして保存する</h3><p>画像やメディアファイルをリストアイテムの <strong>添付ファイル (Attachments)</strong> として保存する方法です。<br>添付ファイルは Power Apps で認証が行われるため、モバイルアプリでも表示されます。</p><ol><li><p>SharePoint リストでアイテムを作成し、画像ファイルを添付ファイルとして追加します。</p></li><li><p>Power Apps で添付ファイルを参照するには、以下のような数式を使用します。</p><p><strong>Image コントロールの Image プロパティ設定例:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">First(Gallery1.Selected.Attachments).Value</span><br></pre></td></tr></table></figure></li></ol><h3 id="対処方法-4-CORS-対応の外部ストレージに画像を保存する"><a href="#対処方法-4-CORS-対応の外部ストレージに画像を保存する" class="headerlink" title="対処方法 4: CORS 対応の外部ストレージに画像を保存する"></a>対処方法 4: CORS 対応の外部ストレージに画像を保存する</h3><p>画像を SharePoint ではなく、<strong>Azure Storage</strong> や <strong>Azure CDN</strong> などの CORS 対応ストレージに保存する方法です。<br>これらのストレージは公開アクセス設定が可能で、認証なしで画像を取得できるため、モバイルアプリでも表示されます。</p><div class="alert is-info"><p class="alert-title">Note</p><p>この方法では画像が公開される可能性があるため、セキュリティ要件を確認してください。</p></div><h2 id="4-その他の原因について-参考"><a href="#4-その他の原因について-参考" class="headerlink" title="4. その他の原因について (参考)"></a>4. その他の原因について (参考)</h2><p>本記事で説明した SharePoint の認証問題とは別に、以下の要因で同様の事象が発生する場合がございます。</p><h3 id="外部サーバー-Azure-Storage-等-の-CORS-設定"><a href="#外部サーバー-Azure-Storage-等-の-CORS-設定" class="headerlink" title="外部サーバー (Azure Storage 等) の CORS 設定"></a>外部サーバー (Azure Storage 等) の CORS 設定</h3><p>SharePoint ではなく Azure Storage や独自のサーバーに画像を保存している場合、<strong>CORS (Cross-Origin Resource Sharing)</strong> の設定が必要です。</p><p>外部サーバーで CORS を構成する場合、以下のドメインからのリクエストを許可してください。</p><ul><li><code>*.powerapps.com</code></li><li><code>web.powerapps.com</code></li><li><code>apps.powerapps.com</code></li></ul><h3 id="プロキシによるヘッダー削除"><a href="#プロキシによるヘッダー削除" class="headerlink" title="プロキシによるヘッダー削除"></a>プロキシによるヘッダー削除</h3><p>Zscaler、Blue Coat などのプロキシサーバーが Power Apps のリクエストから認証ヘッダーを削除し、画像が表示されなくなることがございます。<br>プロキシを経由しない場合に問題が解消するかご確認ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>プロキシが認証ヘッダーを削除している場合、Power Apps チームではサポートの対象外となります。</p></div><h2 id="5-参考情報"><a href="#5-参考情報" class="headerlink" title="5. 参考情報"></a>5. 参考情報</h2><p>詳細については、以下の公開情報をご参照ください。</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/canvas-apps/add-images-pictures-audio-video">キャンバス アプリでマルチメディア ファイルを使用する</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/canvas-apps/controls/control-richtexteditor#pasted-images-may-not-appear-consistently">リッチ テキスト エディター コントロール</a></li><li><a href="https://learn.microsoft.com/ja-jp/connectors/sharepointonline/#limits">SharePoint コネクタの制限事項</a></li></ul><p>※本記事の執筆には生成 AI を使用しています。<a href="https://learn.microsoft.com/ja-jp/principles-for-ai-generated-content">参考</a>  </p><hr><p>免責事項<br>※本情報の内容 (添付文書、リンク先などを含む) は、作成日時点でのものであり、予告なく変更される場合があります。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートの竹内です。&lt;br&gt;今回は、モバイル端末で SharePoint をデータソースとしたキャンバスアプリを利用する際に、画像やメディアファイルが表示されない問題について、下記項目の順にご説明いたします。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;問題の概要&lt;/li&gt;
&lt;li&gt;発生原因&lt;/li&gt;
&lt;li&gt;対処方法&lt;/li&gt;
&lt;li&gt;その他の原因について (参考)&lt;/li&gt;
&lt;li&gt;参考情報&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Apps/"/>
    
    <category term="SharePoint" scheme="https://jpdynamicscrm.github.io/blog/tags/SharePoint/"/>
    
    <category term="Mobile" scheme="https://jpdynamicscrm.github.io/blog/tags/Mobile/"/>
    
    <category term="Canvas App" scheme="https://jpdynamicscrm.github.io/blog/tags/Canvas-App/"/>
    
  </entry>
  
  <entry>
    <title>Dynamics 365 トラブルシューティングのための情報収集ガイド</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/dynamics365-troubleshooting-info-collection/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/dynamics365-troubleshooting-info-collection/</id>
    <published>2026-01-06T00:00:00.000Z</published>
    <updated>2026-02-20T00:55:29.197Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの鎌田です。</p><p>本記事では、Dynamics 365 に関するお問い合わせの際に必要となる情報の取得手順をご説明します。<br>適切な情報をご提供いただくことで、問題の早期解決につながります。</p><span id="more"></span><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ol><li><a href="#identification-info">識別情報の取得</a><ol><li><a href="#environment-url">環境 URL</a></li><li><a href="#upn">UPN（ユーザー プリンシパル名）</a></li><li><a href="#session-id">セッション ID・バージョン情報</a></li></ol></li><li><a href="#security-role-and-team">セキュリティロールとチームの確認</a></li><li><a href="#diagnostic-info">診断情報の取得</a><ol><li><a href="#network-trace">ネットワーク トレース（HAR ファイル）</a></li><li><a href="#video-recording">動画の録画</a></li></ol></li></ol><hr><p><a id='identification-info'></a></p><h2 id="1-識別情報の取得"><a href="#1-識別情報の取得" class="headerlink" title="1. 識別情報の取得"></a>1. 識別情報の取得</h2><p>サーバー側のログ調査に必要な識別情報です。</p><p><a id='environment-url'></a></p><h3 id="1-1-環境-URL"><a href="#1-1-環境-URL" class="headerlink" title="1-1. 環境 URL"></a>1-1. 環境 URL</h3><ol><li>Dynamics 365 にサインインします</li><li>ブラウザのアドレスバーから URL をコピーします<br>例: <code>https://contoso.crm7.dynamics.com</code></li></ol><p><a id='upn'></a></p><h3 id="1-2-UPN（ユーザー-プリンシパル名）"><a href="#1-2-UPN（ユーザー-プリンシパル名）" class="headerlink" title="1-2. UPN（ユーザー プリンシパル名）"></a>1-2. UPN（ユーザー プリンシパル名）</h3><p>事象が発生しているユーザーを特定するために必要です。<br>例: <code>user@contoso.onmicrosoft.com</code></p><p>Power Platform 管理センターで環境を開き、[設定] &gt; [ユーザーとアクセス許可] &gt; [ユーザー] のユーザー名よりご確認いただけます。<br><img src="/blog/powerplatform/dynamics365-troubleshooting-info-collection/upn.png"></p><p><a id='session-id'></a></p><h3 id="1-3-セッション-ID・バージョン情報"><a href="#1-3-セッション-ID・バージョン情報" class="headerlink" title="1-3. セッション ID・バージョン情報"></a>1-3. セッション ID・バージョン情報</h3><ol><li>Dynamics 365 アプリの画面右上の歯車アイコンをクリックします</li><li>「情報」をクリックするとダイアログに情報が表示されます<br><img src="/blog/powerplatform/dynamics365-troubleshooting-info-collection/sessionid.png"></li></ol><hr><p><a id='security-role-and-team'></a></p><h2 id="2-セキュリティロールとチームの確認"><a href="#2-セキュリティロールとチームの確認" class="headerlink" title="2. セキュリティロールとチームの確認"></a>2. セキュリティロールとチームの確認</h2><p>アクセス権限に関連する問題の調査に必要です。</p><ol><li>Power Platform 管理センターで環境を開き、[設定] &gt; [ユーザーとアクセス許可] &gt; [ユーザー] を開きます</li><li>対象ユーザーをクリックします</li><li>サイドバーの「直接割り当てられたロール」から、割り当てられたセキュリティ ロールの一覧を確認できます（チーム経由で割り当てられたロールはここには表示されません）</li><li>サイドバーの「チーム」から、所属しているチームの一覧を確認できます<br><img src="/blog/powerplatform/dynamics365-troubleshooting-info-collection/user-info.png"></li></ol><hr><p><a id='diagnostic-info'></a></p><h2 id="3-診断情報の取得"><a href="#3-診断情報の取得" class="headerlink" title="3. 診断情報の取得"></a>3. 診断情報の取得</h2><p>問題の詳細な調査に必要な診断情報です。</p><p><a id='network-trace'></a></p><h3 id="3-1-ネットワーク-トレース（HAR-ファイル）"><a href="#3-1-ネットワーク-トレース（HAR-ファイル）" class="headerlink" title="3-1. ネットワーク トレース（HAR ファイル）"></a>3-1. ネットワーク トレース（HAR ファイル）</h3><p>ブラウザと Dynamics 365 サーバー間の通信を記録します。<br>ネットワーク トレースとは、ブラウザーがページを表示するために送受信した通信を時系列で記録したものです。<br>問題が発生した操作を記録し HAR ファイルとして共有いただくことで、調査がスムーズになります。</p><div class="alert is-important"><p class="alert-title">重要</p><p><strong>事象再現の直前</strong>に取得を開始し、<strong>事象を再現させた直後</strong>に保存してください。不要な通信が増え肝心な要求が埋もれるため、不要なページ遷移はせず最小の再現だけに留めてください。</p></div><p><strong>取得手順（Microsoft Edge）：</strong></p><ol><li>ブラウザで <code>F12</code> キーを押し、開発者ツールを開き、「ネットワーク」タブを選択します</li><li>以下のオプションを有効にします：<ul><li>「ログを保持」にチェック</li><li>「キャッシュを無効にする」にチェック</li></ul></li><li>「クリア」ボタンで古いログを消去します<br><img src="/blog/powerplatform/dynamics365-troubleshooting-info-collection/trace-start.jpg"></li><li>事象を<strong>最小の手順で 1 回だけ</strong>再現させます</li><li>再現後、「Export HAR」ボタン（↓アイコン）をクリックして保存します（ファイル名は <code>YYYYMMDD_issue.har</code> のように日付と概要を含めてください）<br><img src="/blog/powerplatform/dynamics365-troubleshooting-info-collection/trace-end.jpg"></li></ol><p><strong>参考資料：</strong> <a href="https://learn.microsoft.com/ja-jp/azure/azure-portal/capture-browser-trace">ブラウザー トレースの取得（Azure Portal）</a></p><p><a id='video-recording'></a></p><h3 id="3-2-動画の録画"><a href="#3-2-動画の録画" class="headerlink" title="3-2. 動画の録画"></a>3-2. 動画の録画</h3><p>事象再現時の動画があると、発生状況をより正確に把握できます。</p><div class="alert is-important"><p class="alert-title">重要</p><p>事象発生の<strong>事前</strong>に録画を開始し、事象発生を確認した<strong>後</strong>に停止してください。</p></div><h4 id="Snipping-Tool-での画面録画"><a href="#Snipping-Tool-での画面録画" class="headerlink" title="Snipping Tool での画面録画"></a>Snipping Tool での画面録画</h4><ol><li><code>Windows + Shift + S</code> キーを押して Snipping Tool を起動、または検索から「Snipping Tool」を起動します</li><li>動画ボタン（ビデオカメラアイコン）をクリックします<br><img src="/blog/powerplatform/dynamics365-troubleshooting-info-collection/snipping-tool.png"></li><li>録画する画面の範囲をドラッグで選択し、「スタート」をクリックして録画を開始します<br><img src="/blog/powerplatform/dynamics365-troubleshooting-info-collection/start-recording.png"></li><li>事象を再現させます</li><li>録画停止ボタンを押して終了し、ファイルを保存します</li></ol><h4 id="その他の録画方法"><a href="#その他の録画方法" class="headerlink" title="その他の録画方法"></a>その他の録画方法</h4><ul><li><a href="https://support.microsoft.com/ja-jp/office/powerpoint-%E3%81%A7%E7%94%BB%E9%9D%A2%E3%82%92%E8%A8%98%E9%8C%B2%E3%81%99%E3%82%8B-0b4c3f65-534c-4cf1-9c59-402b6e9d79d0">PowerPoint で画面を記録する</a></li><li><a href="https://learn.microsoft.com/ja-jp/office/troubleshoot/settings/how-to-use-problem-steps-recorder">問題ステップ レコーダーの使用方法</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの鎌田です。&lt;/p&gt;
&lt;p&gt;本記事では、Dynamics 365 に関するお問い合わせの際に必要となる情報の取得手順をご説明します。&lt;br&gt;適切な情報をご提供いただくことで、問題の早期解決につながります。&lt;/p&gt;</summary>
    
    
    
    <category term="Dynamics 365" scheme="https://jpdynamicscrm.github.io/blog/categories/Dynamics-365/"/>
    
    
    <category term="情報採取" scheme="https://jpdynamicscrm.github.io/blog/tags/%E6%83%85%E5%A0%B1%E6%8E%A1%E5%8F%96/"/>
    
    <category term="お問い合わせ全般" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%81%8A%E5%95%8F%E3%81%84%E5%90%88%E3%82%8F%E3%81%9B%E5%85%A8%E8%88%AC/"/>
    
    <category term="Dynamics 365" scheme="https://jpdynamicscrm.github.io/blog/tags/Dynamics-365/"/>
    
    <category term="トラブルシューティング" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%83%88%E3%83%A9%E3%83%96%E3%83%AB%E3%82%B7%E3%83%A5%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0/"/>
    
  </entry>
  
  <entry>
    <title>Dataverse (Dynamics 365) における日付フィールドの動作とタイムゾーンの考慮点について</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/datetime-field-behavior/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/datetime-field-behavior/</id>
    <published>2025-12-14T15:00:00.000Z</published>
    <updated>2026-02-20T00:55:29.197Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。マイクロソフト サポート エンジニアの王です。</p><p>Dataverse (Dynamics 365) を利用したアプリケーション開発において、「日付」の扱いは非常に重要かつ、複雑になりがちなトピックの一つです。特に、日本時間 (JST) のような UTC (協定世界時) と時差がある環境では、<strong>「登録したはずの日付が 1 日ずれている」</strong> といったお問い合わせをいただくことがよくあります。</p><p>今回は、日付列（フィールド）の「動作 (Behavior)」と「書式 (Format)」の組み合わせによるデータの格納され方の違いと、設定変更時の注意点について、実際の検証結果を交えて解説します。</p><h2 id="日付列の基本概念"><a href="#日付列の基本概念" class="headerlink" title="日付列の基本概念"></a>日付列の基本概念</h2><p>検証に入る前に、Dataverse の日付列における重要な設定である「タイムゾーン調整 (Time zone adjustment)」の動作について整理します。</p><ol><li><strong>ユーザー ローカル (User Local)</strong><ul><li>  ユーザーのタイムゾーン設定に合わせて日時を表示・変換します。</li><li>  データベースには <strong>UTC</strong> に変換されて保存されます。</li></ul></li><li><strong>タイムゾーンに依存しない (Timezone Independent)</strong><ul><li>  タイムゾーン変換を行いません。ユーザーが入力した値がそのまま保存され、どのタイムゾーンのユーザーが見ても同じ値が表示されます。</li><li>  誕生日やホテルのチェックイン日など、絶対的な日付・時刻に適しています。</li></ul></li><li><strong>日付のみ (Date Only)</strong><ul><li>  時刻部分を持たず、日付のみを扱います。実質的にタイムゾーン変換は行われません。</li></ul></li></ol><h2 id="検証：JST-ユーザーがデータを入力した場合の挙動"><a href="#検証：JST-ユーザーがデータを入力した場合の挙動" class="headerlink" title="検証：JST ユーザーがデータを入力した場合の挙動"></a>検証：JST ユーザーがデータを入力した場合の挙動</h2><p>今回は、以下の構成のフィールドを用意し、<strong>JST (UTC+9) のユーザー</strong> が <strong>「2026年1月1日 07:00」</strong> を入力した場合に、内部データとしてどのような値が格納されるかを確認しました。</p><table><thead><tr><th align="left">動作 (Behavior)</th><th align="left">書式 (Format)</th><th align="left">内部格納値 (UTC)</th><th align="left">解説</th></tr></thead><tbody><tr><td align="left">ユーザー ローカル</td><td align="left">日付と時刻</td><td align="left"><strong>2025-12-31T22:00:00Z</strong></td><td align="left">入力値から 9 時間引かれた値 (UTC) が格納されます。<br>(2026/1/1 07:00 JST - 9h = 12/31 22:00 UTC)</td></tr><tr><td align="left">ユーザー ローカル</td><td align="left">日付のみ</td><td align="left"><strong>2025-12-31T15:00:00Z</strong></td><td align="left"><strong>注意点:</strong> 書式が「日付のみ」の場合、時刻は 00:00 として扱われます。<br>2026/1/1 00:00 JST を UTC に変換するため、<strong>前日の 15:00</strong> となります。</td></tr><tr><td align="left">タイムゾーン非依存</td><td align="left">日付と時刻</td><td align="left"><strong>2026-01-01T07:00:00Z</strong></td><td align="left">入力した値がそのまま格納されます。タイムゾーン変換は行われません。</td></tr><tr><td align="left">タイムゾーン非依存</td><td align="left">日付のみ</td><td align="left"><strong>2026-01-01T00:00:00Z</strong></td><td align="left">時刻は 00:00 となりますが、日付は入力通りです。</td></tr><tr><td align="left">日付のみ</td><td align="left">日付のみ</td><td align="left"><strong>2026-01-01</strong></td><td align="left">タイムゾーン変換は行われません。</td></tr></tbody></table><p><strong>ポイント:</strong><br>「書式：日付のみ」かつ「動作：ユーザー ローカル」の組み合わせは特に注意が必要です。画面上は「2026/1/1」と見えていても、内部的には「2025/12/31 15:00」として保存されています。これを API 等で取得したり、タイムゾーンを考慮しない処理で利用したりすると、<strong>「1日ずれる」</strong> 原因となります。</p><h2 id="重要：動作を「ユーザー-ローカル」から「タイムゾーンに依存しない」へ変更する場合の注意点"><a href="#重要：動作を「ユーザー-ローカル」から「タイムゾーンに依存しない」へ変更する場合の注意点" class="headerlink" title="重要：動作を「ユーザー ローカル」から「タイムゾーンに依存しない」へ変更する場合の注意点"></a>重要：動作を「ユーザー ローカル」から「タイムゾーンに依存しない」へ変更する場合の注意点</h2><p>運用開始後に、「やっぱりタイムゾーン変換をしたくない」という理由で、既存のフィールド設定を <strong>「ユーザー ローカル」から「タイムゾーンに依存しない」へ変更</strong> しようとするケースがあります。</p><p>この変更を行うと、<strong>内部に保存されている値は変わらないまま、アプリケーション側の表示ロジックだけが切り替わります。</strong> これにより、データの見え方が意図せず変わってしまう現象が発生します。</p><h3 id="発生する現象"><a href="#発生する現象" class="headerlink" title="発生する現象"></a>発生する現象</h3><p>例えば、動作が「ユーザー ローカル」、書式が「日付と時刻」のフィールドに、JST ユーザーが「2026/1/1 07:00」と入力し、内部的に <code>2025-12-31T22:00:00Z</code> と保存されていたデータがあるとします。</p><p>このフィールドの設定を「タイムゾーンに依存しない」に変更すると、以下のようになります。</p><ol><li> <strong>内部値:</strong> <code>2025-12-31T22:00:00Z</code> (変更されません)</li><li> <strong>変更後の表示ロジック:</strong> タイムゾーン変換を行わず、保存されている値をそのまま表示する。</li><li> <strong>画面上の表示:</strong> <strong>2025/12/31 22:00</strong></li></ol><p>ユーザーから見ると、<strong>「入力したはずの日時 (1/1 07:00) が、勝手に過去の日時 (12/31 22:00) に書き換わった」</strong> ように見えてしまいます。</p><p>特に「日付のみ」の書式で使用していた場合、内部値は <code>2025-12-31T15:00:00Z</code> であったため、設定変更後は画面表示が「2026/1/1」から「2025/12/31」へと、<strong>日付が 1 日戻ってしまいます。</strong></p><h3 id="対処策"><a href="#対処策" class="headerlink" title="対処策"></a>対処策</h3><p>この設定変更を行う場合は、設定変更後にデータ修正（データ移行）を行う必要があります。<br>具体的には、既存のレコードに対して、ずれてしまった時間分（JST であれば +9 時間）を加算して保存し直すバッチ処理などが必要となります。</p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>日付フィールドを使用する際は、以下の点を設計段階で十分に検討してください。</p><ol><li><strong>利用目的の明確化:</strong><ul><li>  「会議の開始時間」や「レコード作成日時」など、<strong>時系列としての正確なポイント</strong> が必要な場合は <strong>「ユーザー ローカル」</strong> を使用します。</li><li>  「誕生日」や「記念日」、「契約日」など、<strong>世界中どこで見ても同じ日付</strong> であるべき情報は <strong>「タイムゾーンに依存しない」</strong> または <strong>「日付のみ」</strong> を使用します。</li></ul></li><li><strong>「日付のみ」書式の注意:</strong><ul><li>  書式を「日付のみ」にする場合、動作が「ユーザー ローカル」になっていると、UTC 変換により内部的に前日の日付で保存される可能性があります。特別な理由がない限り、書式が「日付のみ」の場合は、動作も「タイムゾーンに依存しない」または「日付のみ」にすることを推奨します。</li></ul></li><li><strong>後からの変更は慎重に:</strong><ul><li>  動作設定の変更は、既存データの表示に影響を与えます。変更が必要な場合は、データ修正の計画も合わせて立てる必要があります。</li></ul></li></ol><h3 id="参考情報"><a href="#参考情報" class="headerlink" title="参考情報"></a>参考情報</h3><ul><li>  <a href="https://learn.microsoft.com/ja-jp/power-apps/maker/data-platform/behavior-format-date-time-field">日時の列の動作と形式（オンライン版）</a></li><li>  <a href="https://learn.microsoft.com/ja-jp/dynamics365/customerengagement/on-premises/customize/behavior-format-date-time-field?view=op-9-1">フィールドの動作と書式のオプション (オンプレ版)</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは。マイクロソフト サポート エンジニアの王です。&lt;/p&gt;
&lt;p&gt;Dataverse (Dynamics 365) を利用したアプリケーション開発において、「日付」の扱いは非常に重要かつ、複雑になりがちなトピックの一つです。特に、日本時間 (JST) のような UT</summary>
      
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Model-driven app" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/Model-driven-app/"/>
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/categories/Dataverse/"/>
    
    <category term="Dynamics 365" scheme="https://jpdynamicscrm.github.io/blog/categories/Dynamics-365/"/>
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Apps/"/>
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/tags/Dataverse/"/>
    
    <category term="Model-driven app" scheme="https://jpdynamicscrm.github.io/blog/tags/Model-driven-app/"/>
    
    <category term="Dynamics" scheme="https://jpdynamicscrm.github.io/blog/tags/Dynamics/"/>
    
  </entry>
  
  <entry>
    <title>アクティブレイヤーの確認・削除方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/active-layer/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/active-layer/</id>
    <published>2025-12-04T15:00:00.000Z</published>
    <updated>2026-02-20T00:55:29.186Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの早川です。</p><p>今回は、Power Platform 環境でできるアクティブレイヤーの確認・削除方法についてご紹介いたします。</p><p>Power Apps や Power Automate を利用してアプリを作成していると、<strong>「アクティブレイヤーというものができてしまった」</strong>、<br><strong>「アプリが誰かの編集のせいで意図しない動作になっている」</strong>、<strong>「マネージドソリューションで導入した変更が反映されない」</strong><br>といったトラブルに直面することがあります。<br>この記事では、Power Platform の「アクティブレイヤー」について、仕組み → 確認方法 → 削除手順 → 注意点の流れで解説します。   </p><h2 id="ソリューションレイヤーとは何か？"><a href="#ソリューションレイヤーとは何か？" class="headerlink" title="ソリューションレイヤーとは何か？"></a>ソリューションレイヤーとは何か？</h2><p>Power Platform（特にモデル駆動型アプリ、テーブル、フォーム、ビューなど）のカスタマイズは、<br>レイヤー（層）構造で管理されています。<br>通常、あるコンポーネント（例：テーブルの列、フォーム、ビュー）は、  </p><ul><li>アンマネージドレイヤー（デフォルト）</li><li>マネージドレイヤー内のマネージドソリューション  </li><li>マネージドレイヤー内のシステムソリューション<br>の順に積み上がっており、上位レイヤーのカスタマイズが実際の動作(ランタイム動作)として反映されます。  </li></ul><p><img src="/blog/powerplatform/active-layer/solution-layer-diagram.png">   </p><h2 id="アクティブレイヤー-ユーザーが加えたアンマネージド変更"><a href="#アクティブレイヤー-ユーザーが加えたアンマネージド変更" class="headerlink" title="アクティブレイヤー = ユーザーが加えたアンマネージド変更"></a>アクティブレイヤー = ユーザーが加えたアンマネージド変更</h2><p>アクティブレイヤーは上記図のアンマネージドレイヤーであり、<strong>環境で直接行ったカスタマイズと環境にインポートしたアンマネージドのソリューションを組み合わせたカスタマイズの層</strong>を指します。<br>アクティブレイヤーはマネージドレイヤーの上位に存在するため、アクティブレイヤーのカスタマイズはマネージドレイヤーのカスタマイズより優先され、<br>アクティブレイヤーがある場合、意図したカスタマイズが反映されないなどの問題が発生しえます。   </p><h2 id="アクティブレイヤーの確認手順"><a href="#アクティブレイヤーの確認手順" class="headerlink" title="アクティブレイヤーの確認手順"></a>アクティブレイヤーの確認手順</h2><p>アクティブレイヤーは Power Apps の編集画面 から確認できます。</p><p><strong>【確認手順】</strong></p><ol><li>   Power Apps（make.powerapps.com）へアクセス</li><li>   左メニューから ［ソリューション］ を開く</li><li>   ソリューション一覧から対象のコンポーネントを含むソリューションを開く</li><li>   対象のコンポーネント（例：フォーム、ビュー、テーブルなど）右側にある三点リーダー(︙) をクリックし、「詳細」-&gt;「ソリューション レイヤーの表示」を選択</li></ol><p><img src="/blog/powerplatform/active-layer/display-solution-layer.png"></p><ol start="5"><li> レイヤー一覧の最上部に Activeが表示されていれば、それがアクティブレイヤー</li></ol><p><img src="/blog/powerplatform/active-layer/solution-layer-list.png"></p><ol start="6"><li>   アクティブレイヤーを選択し、アクティブレイヤーの内容を表示</li></ol><p><strong>ここで確認できるもの</strong></p><ul><li>「更新済み」タブからアクティブレイヤーで変更されている項目の内容を確認できます。  </li></ul><p><img src="/blog/powerplatform/active-layer/updated-components.png"></p><ul><li>「すべて」タブから該当コンポーネントに含まれているすべての項目の内容を確認できます。  </li></ul><p><img src="/blog/powerplatform/active-layer/all-components.png"></p><ul><li>「ローカライズされたラベル」タブからアクティブレイヤーで実施されたラベルのカスタマイズ内容を確認することができます。  </li></ul><p><img src="/blog/powerplatform/active-layer/localized-label-tab.png"></p><ul><li>ローカライズラベルの列名リンクをクリックすることで、ローカライズラベルのソリューションレイヤーも確認できます。  </li></ul><p><img src="/blog/powerplatform/active-layer/localized-label-layer1.png"></p><p><img src="/blog/powerplatform/active-layer/localized-label-layer2.png"></p><h2 id="アクティブレイヤーの削除手順"><a href="#アクティブレイヤーの削除手順" class="headerlink" title="アクティブレイヤーの削除手順"></a>アクティブレイヤーの削除手順</h2><p>アクティブレイヤーは、ソリューションレイヤー画面から削除できます。</p><p><strong>【削除方法】</strong></p><ol><li>   ソリューションレイヤー一覧画面で Activeレイヤーを選択</li><li>   コマンドバーから 「アクティブなカスタマイズを削除する」 をクリック  </li></ol><p><img src="/blog/powerplatform/active-layer/delete-active-layer.png">  </p><ol start="3"><li>   確認ダイアログで 「削除」ボタンを押す</li><li>   完了後、コンポーネントが下層レイヤーのマネージドソリューションの定義に戻る</li></ol><h3 id="アクティブレイヤーに関する注意点"><a href="#アクティブレイヤーに関する注意点" class="headerlink" title="アクティブレイヤーに関する注意点"></a>アクティブレイヤーに関する注意点</h3><ol><li><p><strong>アクティブレイヤーの削除で現在の動作が変わる可能性がある</strong>  </p><p>アクティブレイヤーを削除すると下位のマネージドソリューションの動作に戻ります。</p></li><li><p><strong>アクティブレイヤーの内容を後から確認したい場合や、アクティブレイヤーを復旧したい場合にはバックアップを取る</strong>  </p><p>削除する前に、現在のカスタマイズ内容をエクスポートしておくと安心です。 </p></li><li><p><strong>アンマネージド環境の作業ルールが重要</strong>  </p><p>アクティブレイヤー発生の多くは、「誰かが環境を直接編集した」ことが原因です。<br>カスタマイズの運用ルールを決めておかないと、再びアクティブレイヤーが発生する可能性があります。</p></li><li><p><strong>マネージドソリューションとして管理するのがベスト</strong>  </p><p>アクティブレイヤー問題を避けるためには、すべての変更をマネージドソリューションのインポートで適用するという原則が最も重要です。</p></li></ol><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><ul><li>アクティブレイヤーとは、ユーザーが環境で直接行ったアンマネージドの変更</li><li>ソリューションレイヤー画面からアクティブレイヤーを確認できる</li><li>不要なら削除することで、正規レイヤー構造に戻せる</li><li>削除前のバックアップと運用ルール設計が重要</li></ul><p>Power Platform のカスタマイズを健全に保つためには、アクティブレイヤーの存在と取り扱いを理解することが必須です。</p><h2 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h2><p>以上、Power Platform のアクティブレイヤーの確認・削除方法についてご案内いたしました。<br>こちらの記事が皆様の環境カスタマイズの管理のお役に立ちましたら幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの早川です。&lt;/p&gt;
&lt;p&gt;今回は、Power Platform 環境でできるアクティブレイヤーの確認・削除方法についてご紹介いたします。&lt;/p&gt;
&lt;p&gt;Power Apps や Power Automate を利用し</summary>
      
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Model-driven app" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/Model-driven-app/"/>
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/categories/Dataverse/"/>
    
    <category term="Dynamics 365" scheme="https://jpdynamicscrm.github.io/blog/categories/Dynamics-365/"/>
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Apps/"/>
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/tags/Dataverse/"/>
    
    <category term="Model-driven app" scheme="https://jpdynamicscrm.github.io/blog/tags/Model-driven-app/"/>
    
    <category term="Dynamics" scheme="https://jpdynamicscrm.github.io/blog/tags/Dynamics/"/>
    
  </entry>
  
  <entry>
    <title>Power Automate for desktop お問い合わせの際の情報取得手順</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/</id>
    <published>2025-10-29T03:00:00.000Z</published>
    <updated>2026-02-20T00:55:29.070Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。Power Platform サポートの大友、竹内です。<br>本記事では Power Automate for desktop 関連のお問い合わせの際の、情報取得手順についてご案内いたします。</p><span id="more"></span><h1 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h1><ol><li><a href="#anchor-intro">概要</a></li><li><a href="#anchor-how-to-collect">情報取得手順詳細</a><ol><li><a href="#anchor-pad-version">Power Automate for desktop のバージョン</a></li><li><a href="#anchor-os-version">OS のバージョン</a></li><li><a href="#anchor-computer-log">コンピューター ログ</a></li><li><a href="#anchor-analysis-result">トラブルシューティングの診断実行結果</a></li><li><a href="#anchor-verbose-log">詳細ログ</a></li><li><a href="#anchor-event-log">イベントログ</a></li><li><a href="#anchor-fiddler-log">Fiddler ログ</a></li><li><a href="#anchor-machine-information">マシン登録の情報</a></li><li><a href="#anchor-remote-desktop-setting">リモートデスクトップ設定</a></li><li><a href="#anchor-registry-setting">レジストリの設定</a></li><li><a href="#anchor-desktopflow">Power Automate for desktop のフロー</a></li><li><a href="#anchor-desktopflow-url">デスクトップ フローの実行履歴 URL</a></li><li><a href="#anchor-desktopflow-runhistory-screenshot">デスクトップ フローの実行履歴の画面キャプチャ</a></li><li><a href="#anchor-desktopflow-runhistory-error-input-output">デスクトップ フローの実行履歴のエラー・入力・出力の詳細</a></li><li><a href="#anchor-cloudflow-run-history-csv">クラウド フローの実行履歴 CSV (クラウドフローから呼び出している場合)</a></li><li><a href="#anchor-cloudflow-raw-input-output">クラウド フローのアクションの未加工入力・出力 (クラウドフローから呼び出している場合)</a></li><li><a href="#anchor-installer-log">インストーラー ログ</a></li></ol></li></ol><p><a id='anchor-intro'></a></p><h1 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h1><p>Power Automate for desktop に関するサポートサービスのお問い合わせの際の、情報取得手順についてご案内致します。</p><p><a id='anchor-how-to-collect'></a></p><h1 id="情報取得手順詳細"><a href="#情報取得手順詳細" class="headerlink" title="情報取得手順詳細"></a>情報取得手順詳細</h1><p><a id='anchor-pad-version'></a></p><h2 id="1-Power-Automate-for-desktop-のバージョン"><a href="#1-Power-Automate-for-desktop-のバージョン" class="headerlink" title="1. Power Automate for desktop のバージョン"></a>1. Power Automate for desktop のバージョン</h2><p>Power Automate for desktop のバージョンが確認できる画面キャプチャをご提供ください。</p><ol><li>Power Automate for desktop &gt; ヘルプ &gt; バージョン情報 を選択します。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/pad-version.png"></li><li>コピーの詳細を選択し、テキストエディターに貼り付け<code>Ctrl+V</code>したファイルをご提供ください。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/pad-version2.png"></li></ol><p><a id='anchor-os-version'></a></p><h2 id="2-OS-のバージョン"><a href="#2-OS-のバージョン" class="headerlink" title="2. OS のバージョン"></a>2. OS のバージョン</h2><p>OS のバージョンが確認できる以下の画面キャプチャを取得しご提供ください。</p><ul><li>システム &gt; バージョン情報<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/os-version1.png">  </li></ul><p><a id='anchor-computer-log'></a></p><h2 id="3-コンピューター-ログ"><a href="#3-コンピューター-ログ" class="headerlink" title="3. コンピューター ログ"></a>3. コンピューター ログ</h2><p>Power Automate コンピューター ランタイムをご利用いただいている場合は <strong>a‐1</strong> の方法から、ご利用いただけない場合は <strong>a‐2</strong> の方法からログを取得してご提供ください。  </p><p>デスクトップフロー実行時にエラーが発生する場合は、RunDefinition.json ファイルと Actions.log ファイルを保持するレジストリを登録いただき、<strong>b</strong> のログも併せてご提供ください。  </p><h3 id="a-Power-Automate-for-desktop-動作ログ"><a href="#a-Power-Automate-for-desktop-動作ログ" class="headerlink" title="a) Power Automate for desktop 動作ログ"></a>a) Power Automate for desktop 動作ログ</h3><ol><li>Power Automate コンピュータ ランタイムからログを収集<br>フロー実行後のログの出力に関して、過去 3 日間のログが Power Automate コンピューター ランタイムから出力いただけます。<br>Power Automate コンピュータ ランタイムからエクスポートした zip ファイルをご提供ください。<br>Power Automate コンピュータ ランタイム &gt; トラブルシューティング &gt; ログのエクスポート を選択します。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/computer-log.png">  <div class="alert is-info"><p class="alert-title">Note</p><p>公開情報にも手順の記載がございますので、ご参照いただけますと幸いです。</p><p><a href="https://learn.microsoft.com/ja-jp/power-automate/desktop-flows/troubleshoot#collect-machine-logs">デスクトップ フローのトラブルシューティング - Power Automate | Microsoft Learn</a></p></div></li><li>管理者権限のあるアカウントでフォルダからログを収集<br>管理者権限のあるアカウントで以下のフォルダ内にあるファイルを zip ファイルにまとめてご提供ください。<br>フォルダ：<code>%ProgramData%\Microsoft\Power Automate\Logs</code></li></ol><h3 id="b-デスクトップフロー実行詳細ログおよびアクション詳細ログ"><a href="#b-デスクトップフロー実行詳細ログおよびアクション詳細ログ" class="headerlink" title="b) デスクトップフロー実行詳細ログおよびアクション詳細ログ"></a>b) デスクトップフロー実行詳細ログおよびアクション詳細ログ</h3><p>以下のレジストリを登録いただきマシンを再起動した上で、以下でご案内するフォルダに格納されているファイルを取得してご提供ください。</p><ol><li>以下の公開情報を参考に、必要となるレジストリを登録いただきマシンを再起動致します。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/computer-log2.png"><div class="alert is-info"><p class="alert-title">Note</p><p>公開情報にも手順の記載がございますので、ご参照いただけますと幸いです。</p><p><a href="https://learn.microsoft.com/ja-jp/power-automate/desktop-flows/governance#configure-power-automate-for-desktop-to-keep-the-flow-run-details">Power Automate でのガバナンス - Power Automate | Microsoft Learn</a></p></div></li></ol><div class="alert is-warning"><p class="alert-title">警告</p><p>こちらのレジストリを有効にした状態のままご運用頂くと端末のストレージを逼迫させる場合があります。</p><p>情報ご取得後はレジストリの無効化をお勧め致します。</p></div><ol start="2"><li>事象を再現致します。</li><li>ファイルをご取得ください。<br>以下のフォルダに格納されているファイルを取得し、ご提供ください。<br><code>%localappdata%\Microsoft\Power Automate Desktop\Scripts\&#123;scriptid&#125;\Runs\&#123;runid&#125;</code><br><code>&#123;ScriptId&#125;</code> にはデスクトップ フローの ID を、<code>&#123;RunId&#125;</code> にはフローの実行 ID を挿入します。<ul><li>RunDefinition.json：デスクトップ フローの実行詳細が記録されたログです。</li><li>Actions.log：デスクトップ フローに設定された各アクションの実行詳細が記録されたログです。</li></ul></li></ol><div class="alert is-info"><p class="alert-title">Note</p><p>デスクトップフローの ID とフローの実行 ID はPower Automateポータルのデスクトップ フローの実行履歴のURLより確認いただけます。</p><p><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/computer-log3.png"></p></div><p><a id='anchor-analysis-result'></a></p><h2 id="4-トラブルシューティングの診断実行結果"><a href="#4-トラブルシューティングの診断実行結果" class="headerlink" title="4. トラブルシューティングの診断実行結果"></a>4. トラブルシューティングの診断実行結果</h2><ol><li>Power Automate for desktop &gt; ヘルプ &gt; トラブルシューティング を選択します。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/analysis-result1.png"></li><li>事象に関連する診断の”実行”を選択してください。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/analysis-result2.png"></li><li>表示された画面のスクリーンショットおよび画面右下部から生成されるレポートCSVファイルをご提供ください。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/analysis-result3.png"></li></ol><p><a id='anchor-verbose-log'></a></p><h2 id="5-詳細ログ"><a href="#5-詳細ログ" class="headerlink" title="5. 詳細ログ"></a>5. 詳細ログ</h2><ol><li>Power Automate for desktop &gt; ヘルプ &gt; トラブルシューティング を選択します。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/analysis-result1.png"></li><li>“詳細なログ” をオンにします。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/verbose-log1.png"></li><li>発生している事象を再現させてください。  </li><li>“詳細なログ” をオフにし、”ログのエクスポート” からエクスポートされた zip ファイルをご提供ください。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/verbose-log2.png"></li></ol><p><a id='anchor-event-log'></a></p><h2 id="6-イベントログ"><a href="#6-イベントログ" class="headerlink" title="6. イベントログ"></a>6. イベントログ</h2><ol><li>Windows にインストールされている “イベントビューアー” を実行してください。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/event-log1.png"></li><li>Windows ログ &gt; Application を選択します。<br>画面右部 “現在のログをフィルター…” から事象発生日時が含まれるようフィルター処理を設定してください。<br>画面右部 “フィルターされたログ ファイルの名前を付けて保存…” から保存された evtx ファイルをご提供ください。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/event-log2.png"></li></ol><p>なお、イベントログについては、下記の公開情報にも記載がございます。<br><a href="https://learn.microsoft.com/ja-jp/troubleshoot/power-platform/power-automate/desktop-flows/how-to-get-power-automate-desktop-installer-logs#event-viewer-logs">ログのイベント ビューアー</a>  </p><p><a id='anchor-fiddler-log'></a></p><h2 id="7-Fiddler-ログ"><a href="#7-Fiddler-ログ" class="headerlink" title="7. Fiddler ログ"></a>7. Fiddler ログ</h2><p>以下の採取手順をご確認の上でログファイルをご提供ください。<br><a href="https://learn.microsoft.com/ja-jp/power-query/web-connection-fiddler">Fiddler ログの採取手順 (microsoft.com)</a></p><p>なお、情報取得の際はキャプチャ対象を <strong>Non-Browser</strong> に変更いただくようお願いいたします。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/fiddler-nonbrowser.png"></p><p><a id='anchor-machine-information'></a></p><h2 id="8-マシン登録の情報"><a href="#8-マシン登録の情報" class="headerlink" title="8. マシン登録の情報"></a>8. マシン登録の情報</h2><p>Power Automate ポータルの画面 &gt; 監視 &gt; マシン<br>該当のコンピューターの詳細画面の画面キャプチャをご提供ください。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/machine-information.png"></p><p><a id='anchor-remote-desktop-setting'></a></p><h2 id="9-リモート-デスクトップ設定"><a href="#9-リモート-デスクトップ設定" class="headerlink" title="9. リモート デスクトップ設定"></a>9. リモート デスクトップ設定</h2><p>実行される端末の以下リモート デスクトップの設定の画面キャプチャをご提供ください。</p><ul><li>実行される端末 &gt; システムのプロパティ &gt; リモートデスクトップ<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/remote-desktop-setting2.png"></li><li>実行される端末 &gt; システムのプロパティ &gt; リモートデスクトップ &gt; ユーザーの選択<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/remote-desktop-setting3.png"></li></ul><p><a id='anchor-registry-setting'></a></p><h2 id="10-レジストリの設定"><a href="#10-レジストリの設定" class="headerlink" title="10. レジストリの設定"></a>10. レジストリの設定</h2><ul><li><p>レジストリ内容<br>レジストリエディタを起動し、以下のキーおよびその配下のレジストリの設定が確認できる画面キャプチャ、またはキーをエクスポートしたファイルをご提供ください。<br>キーが存在しない場合は、その旨をお知らせください。<br><code>コンピューター\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Power Automate Desktop</code><br><code>コンピューター\HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\Power Automate Desktop</code><br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/registry-setting4.png">  </p></li><li><p>サービスアカウントをご利用の場合<br>上記に加えてレジストリの以下キーのセキュリティ画面キャプチャもご提供ください。<br><code>コンピューター\HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\Power Automate Desktop\Registration</code> &gt; Registration キーを右クリック &gt; アクセス許可 &gt; 詳細設定<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/registry-setting3.png">  </p></li></ul><p><a id='anchor-desktopflow'></a></p><h2 id="11-Power-Automate-for-desktop-のフロー"><a href="#11-Power-Automate-for-desktop-のフロー" class="headerlink" title="11. Power Automate for desktop のフロー"></a>11. Power Automate for desktop のフロー</h2><p>デスクトップフロー本体をソリューションに追加し、エクスポート頂いたファイルをご提供下さい。<br>弊社環境にインポート出来るよう、依存関係のあるコンポーネント含めご提供をお願い致します。</p><div class="alert is-info"><p class="alert-title">Note</p><p>ソリューションのエクスポート手順は、以下記事に手順がございますのでご参照いただけますと幸いです。</p><p><a href="https://jpdynamicscrm.github.io/blog/powerautomate/helpful-information-for-powerautomate-sr/#anchor-flowpackage-in-solution">Power Automate お問い合わせの際の情報取得手順 | Japan Dynamics CRM &amp; Power Platform Support Blog (jpdynamicscrm.github.io)</a>  </p></div><p>ソリューションでのご提供が難しい場合、テキストファイルでのご提供をお願いいたします。</p><p>デスクトップ フローのデスクトップフローの編集画面から、エディタ領域をクリックしたのちアクションを全選択<code>Ctrl+A</code>し、コピー<code>Ctrl+C</code>し、テキストエディターに貼り付け<code>Ctrl+V</code>したファイルをご提供ください。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/desktopflow.png"><br>一度にコピーできるフローは 1 つだけであるため、フロー内に複数のサブフローがある場合は、サブフローごとに上記の手順を繰り返し、アクションを個別のテキスト ファイルに保存した上でご提供ください。  </p><div class="alert is-warning"><p class="alert-title">警告</p><p>テキストでのご提供手順では入出力変数の定義やフロー内のアクションで使用していない UI 要素など一部の情報が含まれません。</p><p>エラーが発生しているアクションで入出力変数を使用している場合や、デスクトップ フロー全体の容量等を確認する必要がある場合は、弊社のサポートエンジニアからソリューションでの提供のご検討をお願いする場合がございます。</p></div><p><a id='anchor-desktopflow-url'></a></p><h2 id="12-デスクトップ-フローの実行履歴-URL"><a href="#12-デスクトップ-フローの実行履歴-URL" class="headerlink" title="12. デスクトップ フローの実行履歴 URL"></a>12. デスクトップ フローの実行履歴 URL</h2><ol><li>マイ フロー&gt;デスクトップ フローから該当のフローを選択します。実行履歴から該当の日時を選択します。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/desktopflow-url.png">  </li><li>URLをコピーしてご提供ください。<br>エラー時にフローが実行されず実行履歴に残っていない場合は、1 の画面のURLをコピーしてご提供下さい。</li></ol><p><a id='anchor-desktopflow-runhistory-screenshot'></a></p><h2 id="13-デスクトップ-フローの実行履歴の画面キャプチャ"><a href="#13-デスクトップ-フローの実行履歴の画面キャプチャ" class="headerlink" title="13. デスクトップ フローの実行履歴の画面キャプチャ"></a>13. デスクトップ フローの実行履歴の画面キャプチャ</h2><ol><li>「9. デスクトップ フローの実行履歴 URL」と同じ手順で実行履歴の画面を表示します。<ol><li>マイ フロー &gt; デスクトップ フローから該当のフローを選択します。</li><li>実行履歴から該当の日時を選択します。</li></ol></li><li>ページ全体の画面キャプチャをご提供ください。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/desktopflow-runhistory-screenshot.png"></li></ol><p><a id='anchor-desktopflow-runhistory-error-input-output'></a></p><h2 id="14-デスクトップ-フローの実行履歴のエラー・入力・出力の詳細"><a href="#14-デスクトップ-フローの実行履歴のエラー・入力・出力の詳細" class="headerlink" title="14. デスクトップ フローの実行履歴のエラー・入力・出力の詳細"></a>14. デスクトップ フローの実行履歴のエラー・入力・出力の詳細</h2><ol><li>「9. デスクトップ フローの実行履歴 URL」と同じ手順で実行履歴の画面を表示します。<ol><li>マイ フロー &gt; デスクトップ フローから該当のフローを選択します。</li><li>実行履歴から該当の日時を選択します。</li></ol></li><li>「アクションの詳細」パネルで、該当のアクションの「開始」列のリンクを押下します。</li></ol><p><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/desktopflow-runhistory-error-input-output.png"></p><p>【エラーの詳細】</p><ol><li>「エラーの詳細」のテキストをコピーし、テキスト ファイルへ保存します。</li><li>「エラーのコンテキスト」の画像を右クリック &gt; 名前を付けて画像を保存を押下します。</li><li>保存したテキスト ファイル、画像ファイルをご提供ください。</li></ol><p>【入力の詳細】</p><ol><li>「入力の詳細を確認します」のリンクを押下します。</li><li>表示された入力の内容をコピーし、テキスト ファイルへ保存します。</li><li>保存したテキスト ファイルをご提供ください。</li></ol><p>【出力の詳細】</p><ol><li>「出力の詳細を確認します」のリンクを押下します。</li><li>表示された出力の内容をコピーし、テキスト ファイルへ保存します。</li><li>保存したテキスト ファイルをご提供ください。</li></ol><p><a id='anchor-cloudflow-run-history-csv'></a></p><h2 id="15-クラウド-フローの実行履歴-CSV-クラウドフローから呼び出している場合"><a href="#15-クラウド-フローの実行履歴-CSV-クラウドフローから呼び出している場合" class="headerlink" title="15. クラウド フローの実行履歴 CSV (クラウドフローから呼び出している場合)"></a>15. クラウド フローの実行履歴 CSV (クラウドフローから呼び出している場合)</h2><p>デスクトップフローをクラウドフローから呼び出している場合は、クラウドフローの実行履歴もご提供ください。</p><ol><li>デスクトップ フローを呼び出したクラウドフローの詳細画面を開き、「28 日間の実行履歴」から「すべての実行」を選択します。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/cloudflow-run-history-csv.png"></li><li>「.csv ファイルを取得」を選択し、取得した CSV ファイルをご提供ください。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/cloudflow-run-history-csv2.png"></li></ol><div class="alert is-info"><p class="alert-title">Note</p><p>クラウド フローの実行履歴 CSV の取得方法は、以下記事にも手順が掲載されております。</p><p><a href="https://jpdynamicscrm.github.io/blog/powerautomate/helpful-information-for-powerautomate-sr/#anchor-flowrunhistory-csv">Power Automate お問い合わせの際の情報取得手順 | Japan Dynamics CRM &amp; Power Platform Support Blog (jpdynamicscrm.github.io)</a></p></div><p><a id='anchor-cloudflow-raw-input-output'></a></p><h2 id="16-クラウド-フローのアクションの未加工入力・出力-クラウドフローから呼び出している場合"><a href="#16-クラウド-フローのアクションの未加工入力・出力-クラウドフローから呼び出している場合" class="headerlink" title="16. クラウド フローのアクションの未加工入力・出力 (クラウドフローから呼び出している場合)"></a>16. クラウド フローのアクションの未加工入力・出力 (クラウドフローから呼び出している場合)</h2><p>デスクトップフローをクラウドフローから呼び出している場合は、クラウドフローのアクションの未加工入力・未加工出力もご提供ください。<br>実行履歴から「デスクトップ用 Power Automate で構築したフローを実行する」アクション等のデスクトップ フローを呼び出すアクションを展開します。<br>未加工入力および未加工出力として表示されるテキストをコピーし、ご提供ください。<br><img src="/blog/powerautomate/power-automate-desktop-helpful-information-for-sr/cloudflow-raw-input-output.png">  </p><div class="alert is-info"><p class="alert-title">Note</p><p>クラウド フローのアクションの未加工入力・出力の取得方法は、以下記事にも手順が掲載されております。</p><p><a href="https://jpdynamicscrm.github.io/blog/powerautomate/helpful-information-for-powerautomate-sr/#anchor-raw-input-output">Power Automate お問い合わせの際の情報取得手順 | Japan Dynamics CRM &amp; Power Platform Support Blog (jpdynamicscrm.github.io)</a></p></div><p><a id='anchor-installer-log'></a></p><h2 id="17-インストーラー-ログ"><a href="#17-インストーラー-ログ" class="headerlink" title="17. インストーラー ログ"></a>17. インストーラー ログ</h2><p>以下の採取手順をご確認の上でログファイルをご提供ください。<br><a href="https://learn.microsoft.com/ja-jp/troubleshoot/power-platform/power-automate/desktop-flows/how-to-get-power-automate-desktop-installer-logs#installer-logs">インストーラー ログ</a></p><hr><h2 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h2><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。バージョンアップによって若干の UI の遷移など異なる場合があります。その場合は画面の指示に従って進めてください。</p><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは。Power Platform サポートの大友、竹内です。&lt;br&gt;本記事では Power Automate for desktop 関連のお問い合わせの際の、情報取得手順についてご案内いたします。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Desktop flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Desktop-flow/"/>
    
    
    <category term="情報採取" scheme="https://jpdynamicscrm.github.io/blog/tags/%E6%83%85%E5%A0%B1%E6%8E%A1%E5%8F%96/"/>
    
    <category term="お問い合わせ全般" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%81%8A%E5%95%8F%E3%81%84%E5%90%88%E3%82%8F%E3%81%9B%E5%85%A8%E8%88%AC/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
    <category term="Power Automate for desktop" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate-for-desktop/"/>
    
  </entry>
  
  <entry>
    <title>Power Pages ライセンスについて</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerpages/power-pages-licensing-guide/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerpages/power-pages-licensing-guide/</id>
    <published>2025-09-15T16:30:00.000Z</published>
    <updated>2026-02-20T00:55:29.117Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、PowerPlatformサポートチームの三田です。</p><p>本記事では Power Pages のライセンスについて以下の Q1〜Q6 の質問に回答する形で整理します。</p><ul><li><a href="#q1">Q1: Power Pages の基本的なライセンスモデル（何をどの単位で購入 / 課金するか）は？</a></li><li><a href="#q2">Q2: 認証ユーザー (Authenticated) と匿名ユーザー (Anonymous) のカウント方式の違いは？</a></li><li><a href="#q3">Q3: 月中で想定より利用が増えた（超過しそう / した）場合はどう判断・対応する？</a></li><li><a href="#q4">Q4: 認証ユーザー数の「ユニーク」判定はどのように行われる？（複数回ログイン時の扱い）</a></li><li><a href="#q5">Q5: 既に Power Apps / Dynamics 365 ライセンスを持つ社内（内部）ユーザーは別途カウント / 課金が必要か？</a></li><li><a href="#q6">Q6: 匿名ユーザー数はどのように一意判定され異なるデバイスやCookie削除時はどう扱われるか？</a></li></ul><h3 id="この記事でわかること"><a href="#この記事でわかること" class="headerlink" title="この記事でわかること"></a>この記事でわかること</h3><ul><li>現行 Power Pages の容量（Capacity）ベース課金モデルの全体像</li><li>認証 / 匿名ユーザーの「月次ユニーク」測定基準と非カウント条件</li><li>既存 Power Apps / Dynamics 365 ライセンス保有ユーザーの扱い（重複課金回避）</li><li>超過（Overage）したときの対処法</li><li>よくある誤解（旧ポータル Login/Page View モデルとの混同 など）の整理</li></ul><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#q1">Power Pages の基本ライセンスモデル (Q1)</a></li><li><a href="#q2">認証ユーザーと匿名ユーザーのカウント方式 (Q2)</a></li><li><a href="#q3">利用が超過しそうまたは超過した場合の対応 (Q3)</a></li><li><a href="#q4">認証ユーザーのユニーク判定（重複ログインの扱い） (Q4)</a></li><li><a href="#q5">内部ユーザー既存ライセンスとカウント除外 (Q5)</a></li><li><a href="#q6">匿名ユーザーの一意判定とブラウザ差異/Cookie削除の影響 (Q6)</a></li><li><a href="#summary">まとめ</a></li><li><a href="#notice">注意事項（情報の更新可能性）</a></li></ul><h2 id="q1">Power Pages の基本ライセンスモデル (Q1)</h2>【結論】Power Pages は「月次ユニークユーザー数」を軸にした Capacity（容量）ベースのライセンスモデルです。対象は (1) 認証ユーザー (Authenticated users) と (2) 匿名ユーザー (Anonymous users) の 2 系列です。サブスクリプション購入（事前割当）と Pay-as-you-go メーター（実使用後精算）が併存します。<p>【ポイント】</p><ol><li>ライセンス対象単位: 「サイト単位の月次ユニークユーザー数」</li><li>種別: 認証ユーザー (Authenticated users) と 匿名ユーザー (Anonymous users) は人数を「別々に」数える（互いに混ざらない・合算しない）</li><li>購入形態: 容量パック (100 認証 / 500 匿名 単位) のサブスクリプション、または Azure 課金の Pay-as-you-go メーター</li><li>認証/匿名いずれも「その月に 1 回以上アクセスした一意ユーザー」で 1 カウント（基本的には複数回アクセスしても追加カウントされない）</li><li>旧モデル (ログイン数 / ページビュー) とは測定概念が異なる（ログイン回数ではなくユーザー人数）</li></ol><p>【サブスクリプション 容量パック 概要（抜粋）】</p><ul><li>認証: 1 パック = 100 ユーザー / 月</li><li>匿名: 1 パック = 500 ユーザー / 月</li></ul><p>（複数 パック 積み上げでサイト想定上限を設計。内部的には環境ごとに最小割当値: 認証 25 / 匿名 200）</p><p>【よくある誤解】</p><ul><li>誤解: 「ログイン回数が課金対象である」<ul><li>→ 正しくは: 月内ユニークユーザー数。1 ユーザーが 30 回ログインしても 1 です。</li></ul></li><li>誤解: 「容量パック を買うと未使用ぶんは翌月に繰り越せる」<ul><li>→ 正しくは: 繰り越し不可（月ごとリセット）。</li></ul></li><li>誤解: 「サイト数に比例して必ず追加 Dataverse 容量が必要」<ul><li>→ 正しくは: 今の Power Pages ではサイトを作るときに Dataverse の容量を新しく買い足す必要はありません（最初からある分で始められます）。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#how-is-power-pages-licensed">Power Pages のライセンス体系 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-are-the-main-differences-between-power-pages-and-power-apps-portals-licensing">Power Pages と旧 Power Apps ポータル ライセンス比較 (FAQ)</a></li></ul><h2 id="q2">認証ユーザーと匿名ユーザーのカウント方式 (Q2)</h2>【結論】認証ユーザーは Dataverse の Contact レコード ID で一意判定し、匿名ユーザーはブラウザ Cookie に保持される匿名ユーザー ID で一意化されます。いずれも「その暦月に初めてカウントされた時点で 1」となり再度ログイン（または閲覧）しても加算されません。<p>【ポイント】</p><ol><li>認証ユーザー: ログインに成功した Contact 1 件 = 1（同月内複数回ログインは再カウント無し）</li><li>匿名ユーザー: 匿名ページを閲覧したブラウザ Cookie 単位で初回のみカウント（同月内の複数回訪問は再カウント無し）</li><li>匿名ユーザーとして数えない主なケース：「テスト用で触っているだけ」「ログインするための画面だけ見た」「機械（検索ロボット）が来た」「その日あとでログインして本人だと分かった」など。（こうした場合は匿名人数を増やさず、必要なら認証ユーザー側だけ数えます。）</li><li>同一人物が異なるブラウザ・端末・Cookie クリアを行うと別匿名ユーザーとして計上され得る</li><li>匿名→同日内ログイン移行時は「認証ユーザーのみ」計上（匿名側重複排除）</li></ol><p>【よくある誤解】</p><ul><li>誤解: 「匿名はページビュー合計」<ul><li>→ 正しくは: ユニーク匿名ユーザー（Cookie ベース）</li></ul></li><li>誤解: 「ログインページ（サインイン）閲覧も匿名ユーザーとしてカウントされる」<ul><li>→ 正しくは: ログインページは非カウント対象</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-is-an-authenticated-user-and-how-are-authenticated-users-per-websitemonth-calculated">認証ユーザーの定義と算出方法 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-is-an-anonymous-user-and-how-are-anonymous-users-per-websitemonth-calculated">匿名ユーザーの定義と算出方法 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-are-the-scenarios-in-which-a-user-isnt-counted-as-an-anonymous-user-even-though-the-user-browses-an-anonymous-page-on-the-website">匿名ユーザーにカウントされないシナリオ (FAQ)</a></li></ul><h2 id="q3">利用が超過しそうまたは超過した場合の対応 (Q3)</h2>【結論】月次集計は月初にリセットされ日次累積で増加します。想定上限に近づいたら (1) 追加 容量パック 割当、(2) 他環境からの再配分、(3) Pay-as-you-go への紐付け検討 の順に評価することを推奨します。また、超過した場合、即座にサイトが停止したり、超過分の料金を請求されることはありません。<p>【補足】データが反映されるまでに 1 日程度かかることがあります。</p><p>【ポイント】</p><ol><li>対応オプション: 追加購入・未割当容量の再割当・Pay-as-you-go 化（Azure サブスクリプション）</li><li>計画: 事前に、季節変動がある場合はピーク月を基準に容量パックの検討</li></ol><p>【よくある誤解】</p><ul><li>誤解: 「超過したら即座にサイト停止や罰金のような追加請求が起きる」<ul><li>→ 正しくは: 即時停止・即ペナルティ的課金はありませんが、継続超過は早期の容量見直しが必要です。</li></ul></li><li>誤解: 「Pay-as-you-go にするとサブスクリプション容量は不要になる」<ul><li>→ 正しくは: 併用設計可。ベース容量 + 変動部を Pay-as-you-go で吸収するハイブリッドが実務上多い。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-pages/admin/capacity-management#licensing-summary-view">容量の監視: ライセンス サマリービュー (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-pages/admin/capacity-management#capacity-management">容量管理ペイン (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#for-subscription-based-licenses-what-is-the-minimum-number-of-authenticated-and-anonymous-user-capacity-i-need-to-assign-to-an-environment">最小割り当て数 / パック (FAQ)</a></li></ul><h2 id="q4">認証ユーザーのユニーク判定（重複ログインの扱い） (Q4)</h2>【結論】同一 Contact に紐づくユーザーが暦月中に複数回ログインしても 1 カウントのみです。判定キーは Dataverse Contact レコード ID で、月初リセット後に再度初回ログインした時点で新しい月の 1 として加算されます。<p>【ポイント】</p><ol><li>判定キー: Dataverse Contact ID</li><li>同月内複数ログイン: 再カウント無し</li><li>翌月: 初回アクセス時に再び 1 としてカウント</li><li>旧“ログイン” 課金との比較: 旧 Portals Login (日次ユニーク * 日数) と違い総ログイン回数増加は費用へ直結しない</li></ol><p>【よくある誤解】</p><ul><li>誤解: 「同じ人が 1 日に何回もログインすると、その回数分追加料金がかかる」<ul><li>→ 正: その月に 1 回でもログインした“その人”は 1 人として数えます。翌月になるまで同じ人が何十回ログインしても増えません。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-is-an-authenticated-user-and-how-are-authenticated-users-per-websitemonth-calculated">認証ユーザー月次カウント方法 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-is-the-difference-between-power-apps-portals-login-capacity-and-power-pages-authenticated-per-usermonth-capacity">旧ログイン容量との違い (FAQ)</a></li></ul><h2 id="q5">内部ユーザー既存ライセンスとカウント除外 (Q5)</h2>【結論】社内の人がすでに以下のいずれかのライセンスを持っていて（同じテナントで付与済み）、会社のアカウント（Entra ID）で Power Pages サイトに入るなら、その人は「Power Pages の認証ユーザー数」には数えません。ライセンスが無い社内ユーザーや会社外の人だけが、Power Pages 認証容量を消費します。<p>対象となる既存ライセンス（どれか 1 つ持っていれば除外）:</p><ul><li>Power Apps per user（1 人で複数アプリ使えるライセンス）</li><li>Power Apps per app（指定された 1 サイト/アプリ分の利用権）</li><li>Dynamics 365 Enterprise ライセンス（該当業務アプリの利用権）</li></ul><p>【ポイント】</p><ol><li>すでに 上記既存ライセンスを保持しているユーザー → Power Pages の認証ユーザー容量を消費しない（カウント除外）</li><li>上記いずれのライセンスも持っていない社内ユーザー / 社外ユーザー（取引先・お客様など） → Power Pages の認証ユーザー容量を消費する</li></ol><p>【よくある誤解】</p><ul><li>誤解: 「社内ユーザーは全員 認証ユーザーとしてカウントされる」<ul><li>→ 正しくは: 上記の既存ライセンス保持者はカウントされません（容量を消費しません）。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-are-the-power-pages-use-rights-included-with-power-apps-and-dynamics-365-enterprise-licenses">Power Apps / Dynamics 365 に含まれる利用権 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#if-im-building-a-power-pages-website-for-my-employees-who-log-in-using-their-microsoft-entra-credentials-what-power-pages-licenses-do-i-need">社内ユーザー向けライセンス選択 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-pages/faq#are-the-guest-users-treated-as-internal-users-for-licensing">ゲスト ユーザーは内部扱いか (FAQ)</a></li></ul><h2 id="q6">匿名ユーザーの一意判定とブラウザ差異/Cookie削除の影響 (Q6)</h2>【結論】匿名ユーザーはブラウザ Cookie に保存される匿名 ID で月内ユニーク判定します。別ブラウザ・別端末・Cookie 削除で ID が変われば別ユーザーとしてカウントされます。<p>【ポイント】</p><ol><li>判定キー: 匿名 Cookie ID（ブラウザ/端末単位）</li><li>Cookie クリア / ブラウザ変更 / 端末変更: 新規ユーザーとして再カウントされ得る</li><li>同日匿名→認証ログイン: 認証側のみ残る（匿名で閲覧した後、認証ログインした場合は、認証ユーザーとしてのみカウントされる）</li><li>ログインページ / エラーページ等への訪問はカウントされない</li></ol><p>【よくある誤解】</p><ul><li>誤解: 「匿名はページビュー合計なので画像読み込み等も増加させる」<ul><li>→ 正しくは: 静的リソースのみではカウントされません。</li></ul></li><li>誤解: 「匿名で閲覧した後、ログイン認証した場合は、匿名ユーザーと認証ユーザーで 2 重計上される」<ul><li>→ 正しくは: 当日内は認証ユーザーとしてカウントされ、匿名ユーザーではカウントされません。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-is-an-anonymous-user-and-how-are-anonymous-users-per-websitemonth-calculated">匿名ユーザー月次カウント方法 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-are-the-scenarios-in-which-a-user-isnt-counted-as-an-anonymous-user-even-though-the-user-browses-an-anonymous-page-on-the-website">匿名にカウントされないシナリオ (FAQ)</a></li></ul><h2 id="summary">まとめ</h2>- Power Pages は 認証 / 匿名 の月次ユニークユーザー Capacity モデル。旧 Portals の「Login / Page View」課金とは概念が異なります。- 認証ユニーク: Contact ID ベース。匿名ユニーク: Cookie ID ベース。どちらも月初リセット。- 超過が懸念される場合は、追加購入・再割当・Pay-as-you-go を使い分けます。- 超過してしまっても、即停止・追加請求の心配はありません。- 内部ユーザーで Power Apps per user / per app / Dynamics 365 Enterprise ライセンス保持者は条件を満たせば認証容量を消費しません。<h2 id="notice">注意事項（情報の更新可能性）</h2>本記事は執筆日時点の公開情報に基づいています。ライセンス体系・容量定義・ UI 表示・最小割当値などは将来変更される可能性があります。最新情報は必ず公式ドキュメント（Power Pages Licensing FAQ / 管理センター画面 / 最新 Licensing Guide）でご確認ください。]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、PowerPlatformサポートチームの三田です。&lt;/p&gt;
&lt;p&gt;本記事では Power Pages のライセンスについて以下の Q1〜Q6 の質問に回答する形で整理します。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#q1&quot;&gt;Q1: Power Pages</summary>
      
    
    
    
    <category term="Power Pages" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Pages/"/>
    
    
    <category term="governance" scheme="https://jpdynamicscrm.github.io/blog/tags/governance/"/>
    
    <category term="powerpages" scheme="https://jpdynamicscrm.github.io/blog/tags/powerpages/"/>
    
    <category term="licensing" scheme="https://jpdynamicscrm.github.io/blog/tags/licensing/"/>
    
  </entry>
  
  <entry>
    <title>モデル駆動型アプリ削除ガイド</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerapps/model-driven-app-delete-guide/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerapps/model-driven-app-delete-guide/</id>
    <published>2025-09-15T16:00:00.000Z</published>
    <updated>2026-02-20T00:55:28.987Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、PowerPlatformサポートチームの三田です。</p><p>本記事ではモデル駆動型アプリの削除について、以下の Q1〜Q3 の質問に回答する形でご説明します。</p><ul><li><a href="#q1">Q1: モデル駆動型アプリの削除に必要な権限は？</a></li><li><a href="#q2">Q2: モデル駆動型アプリを削除する際に注意しなければならない「依存関係」とは？</a></li><li><a href="#q3">Q3: 削除を阻止する「依存関係」がないのに削除できないときの対処法は？</a></li></ul><h3 id="この記事でわかること"><a href="#この記事でわかること" class="headerlink" title="この記事でわかること"></a>この記事でわかること</h3><ul><li>削除に必要な基本ロールと最低限の権限</li><li>どの依存関係が削除を止めるのかの判断基準</li><li>マネージド / 案マネージド の違いによる削除可否の差</li><li>依存関係表示が空でも失敗する代表的内部要因</li><li>外部キーエラー (SQL 547) 発生時の実務的回復手順</li></ul><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#q1">モデル駆動型アプリ削除に必要な権限 (Q1)</a></li><li><a href="#q2">削除前に確認すべき依存関係の整理 (Q2)</a></li><li><a href="#q3">依存関係が表示されないのに削除できない場合の対処 (Q3)</a></li><li><a href="#summary">まとめ</a></li><li><a href="#notice">注意事項（情報の更新可能性）</a></li></ul><h2 id="q1">モデル駆動型アプリ削除に必要な権限 (Q1)</h2>【結論】モデル駆動型アプリを削除できる主な既定ロールはシステム管理者 (System Administrator) とシステムカスタマイザー (System Customizer) です。<p>これら以外のカスタムロールで削除を許可したい場合、両既定ロールが保有する App (App Module) の Delete、関連 Solution 操作 (Read / Write / Delete / Append / Append To) および Publish Customizations などの権限セットを完全に再現する必要があります。</p><p>マネージド ソリューションのアプリはロールに関わらず個別削除できず、マネージド ソリューション全体を環境から削除する必要があります。</p><p>【ポイント】</p><ol><li>既定ロール: システム管理者 (System Administrator) / システムカスタマイザー (System Customizer) </li><li>必須操作: App Module Delete + Publish Customizations</li><li>付随権限: Solution（Read / Write / Delete / Append / Append To）</li><li>カスタムロール: 上記権限を完全複製で代替可</li><li>マネージド 配下: 個別削除不可（ソリューション全体の削除）</li></ol><p> 【よくある誤解】</p><ul><li>誤解: アプリを作成したユーザなら誰でもそのアプリを削除できる。<ul><li>→ 正しくは: 作成者であっても適切な Delete 権限と関連カスタマイズ権限がなければ削除できません。</li></ul></li><li>誤解: マネージド ソリューションからインポートしたアプリも <a href="#https://make.powerapps.com/environments/Default-b78d9d9a-c2e6-42d2-9bcc-1fa7852ad660/home">Power Apps ポータル</a>から直接削除できる。<ul><li>→ 正しくは: マネージド ソリューション配下のコンポーネントは個別削除不可で、ソリューションの全体の削除が必要です。</li></ul></li><li>誤解: Publish Customizations 権限は削除には無関係である。<ul><li>→ 正しくは: 削除後の状態反映で公開処理が走るため関連カスタマイズ権限不足でエラーとなる場合があります。</li></ul></li><li>誤解: App Module の Delete 権限さえ付与されていればアプリを削除できる。<ul><li>→ 正しくは: Delete 単独では不十分で Solution への Read / Write / Delete / Append / Append To と Publish Customizations、および依存関係解消が揃って初めて削除可能です。誤設定リスク低減のため既定ロール (システム管理者 / システムカスタマイザー) の利用を推奨します。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/security-roles-privileges">セキュリティ ロールおよび特権 (Dataverse)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/model-driven-apps/privileges-required-customization">カスタマイズに必要な特権 (モデル駆動型アプリ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/managed-unmanaged-solutions">Managed と Unmanaged の違い</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/model-driven-apps/delete-model-driven-app">モデル駆動型アプリを削除する</a></li></ul><h2 id="q2">削除前に確認すべき依存関係の整理 (Q2)</h2>【結論】依存関係は「アプリが中で利用"している"項目 (用途：Uses)」と「そのアプリを利用"されている"項目 (使用者：Used by)」の 2 種類です。削除を止めるのは依存関係ページの「削除ブロック（Delete blocked by）」タブに表示される項目だけです。<p>代表例として SiteMap、テーブル (Table)、フォーム (SystemForm)、ビュー (SavedQuery)、ビューのチャート (SavedQueryVisualization)、ダッシュボード、Business Process Flow、ロール依存、Web リソース、URL Suffix などが該当します。</p><p>【ポイント】</p><ol><li>ブロック判定: “削除ブロック（Delete blocked by）” タブ列挙項目</li><li>代表的な要素: SiteMap / Table / SystemForm / SavedQuery / SavedQueryVisualization</li></ol><p>【補足】“使用者（Used by）” に表示されても “削除ブロック（Delete blocked by）” に現れない要素は削除ブロックではありません。無闇に削除すると他アプリや別ソリューションでリンク切れや機能欠落を生む恐れがあります。</p><p><a href="#https://make.powerapps.com/environments/Default-b78d9d9a-c2e6-42d2-9bcc-1fa7852ad660/home">Power Apps ポータル</a>で依存関係を確認する手順 (簡易):</p><ol><li>対象環境で ソリューション を開き、アプリを含むソリューションを選択<br> <img src="/blog/powerapps/model-driven-app-delete-guide/solution_app.png" alt="ソリューション内アプリ一覧"></li><li>アプリ行を選択後、該当行のコマンドバー (… など) から「詳細 &gt; 依存関係を表示」をクリック<br> <img src="/blog/powerapps/model-driven-app-delete-guide/app_detail.png" alt="アプリ詳細から依存関係を表示"></li><li>削除ブロック（Delete blocked by）/ 使用者 (Used by) / 用途 (Uses) の各タブで確認可能<br> <img src="/blog/powerapps/model-driven-app-delete-guide/view.png" alt="依存関係ビュー"></li></ol><p>【よくある誤解】</p><ul><li>誤解: アプリを削除すれば内部で参照しているビューやフォームも自動削除される。<ul><li>→ 正しくは: 参照コンポーネントは独立しており自動削除されないため別途クリーンアップが必要です。</li></ul></li><li>誤解: Used by に出た要素はすべて削除ブロックである。<ul><li>→ 正しくは: Delete blocked by に現れない限り直接のブロックではありません。</li></ul></li><li>誤解: マネージド コンポーネントは アンマネージド に変換しないと依存関係表示できない。<ul><li>→ 正しくは: マネージド でも依存関係ビューから直接確認可能です。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/data-platform/view-component-dependencies">コンポーネントの依存関係を表示する</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/remove-table-app">テーブルとモデル駆動型アプリ間の依存関係を削除する</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/removing-dependencies">依存関係の削除の概要</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/managed-unmanaged-solutions">Managed と Unmanaged の違い</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/model-driven-apps/delete-model-driven-app">モデル駆動型アプリを削除する</a></li></ul><h2 id="q3">依存関係が表示されないのに削除できない場合の対処 (Q3)</h2>【結論】依存関係ページにブロック項目が無くても AppSettingBase など内部設定テーブルの参照（外部キー）が残っていると削除が失敗する事例があります。<p>以下のようなエラーが発生しシステム管理者でも削除できない事例が複数報告されています。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Sql error: Statement conflicted with a constraint.</span><br><span class="line">The DELETE statement conflicted with the REFERENCE constraint &quot;appmodule_appsetting_parentappmoduleid&quot;.</span><br><span class="line">The conflict occurred in database &quot;db_crmcorejpn_********_********_****&quot;, table &quot;dbo.AppSettingBase&quot;, column &#x27;ParentAppModuleId&#x27;.</span><br><span class="line">The statement has been terminated.</span><br><span class="line">CRM ErrorCode: -2147185375</span><br><span class="line">Sql ErrorCode: -2146232060</span><br><span class="line">Sql Number: 547</span><br></pre></td></tr></table></figure><p>エラー文の要点:</p><ol><li>Sql Number 547 は参照整合性 (外部キー) 違反を示す一般的エラー</li><li>外部キー名 appmodule_appsetting_parentappmoduleid は AppSettingBase の ParentAppModuleId が対象 App Module を指しているレコードが残存していることを示唆</li><li>一時的な未公開 / キャッシュ状態や App 設定レイヤー未更新により不要な AppSetting レコード参照が残留している可能性があります。</li></ol><p>エラー対処手順:</p><ol><li>システム管理者が対象モデル駆動型アプリを Power Apps (Maker ポータル) で開き「保存して公開」(Save &amp; Publish) を実行<br>（「保存して公開」が非活性の場合はページの追加など軽微な編集を行ってください）</li><li>直後に「再生」(Play) を押下し一度アプリを起動</li></ol><p>【補足】上記手順でのエラーが解消されない場合は、問題発生直後のサポート リクエストの起票を推奨します。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/data-platform/view-component-dependencies">コンポーネントの依存関係を表示する</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/removing-dependencies">依存関係の削除の概要</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/managed-unmanaged-solutions">Managed と Unmanaged の違い</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/troubleshoot-common-solution-issues">ソリューションの一般的な問題のトラブルシューティング</a></li></ul><h2 id="summary">まとめ</h2>- モデル駆動型アプリ削除には システム管理者 (System Administrator) / システムカスタマイザー (System Customizer) または同等の削除権限を付与したカスタム セキュリティ ロール が必要です。- 依存関係は [Power Apps ポータル](#https://make.powerapps.com/environments/Default-b78d9d9a-c2e6-42d2-9bcc-1fa7852ad660/home) の「依存関係を表示」から 用途（Use） / 使用者（Used by） / 削除ブロック（Delete blocked by） を確認可能です。- SQL Number 547 (appmodule_appsetting_parentappmoduleid) は AppSettingBase 残留参照が原因で「保存して公開 → 再生 → 削除」手順が有効です。<h2 id="notice">注意事項（情報の更新可能性）</h2>本記事の内容は執筆日時点の公開情報に基づいています。仕様や UI、権限名称、依存関係の表示挙動は将来変更される可能性があります。最新情報は公式ドキュメントをご確認ください。]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、PowerPlatformサポートチームの三田です。&lt;/p&gt;
&lt;p&gt;本記事ではモデル駆動型アプリの削除について、以下の Q1〜Q3 の質問に回答する形でご説明します。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#q1&quot;&gt;Q1: モデル駆動型アプリの削除に必要な</summary>
      
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Model-driven app" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/Model-driven-app/"/>
    
    
    <category term="powerapps" scheme="https://jpdynamicscrm.github.io/blog/tags/powerapps/"/>
    
    <category term="dataverse" scheme="https://jpdynamicscrm.github.io/blog/tags/dataverse/"/>
    
    <category term="governance" scheme="https://jpdynamicscrm.github.io/blog/tags/governance/"/>
    
  </entry>
  
  <entry>
    <title>DLP ポリシーに関する様々な Q&amp;A について</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/overlapped-dlppolicy/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/overlapped-dlppolicy/</id>
    <published>2025-09-12T03:00:00.000Z</published>
    <updated>2026-02-20T00:55:29.245Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの宮﨑です。<br>本記事では、DLP ポリシーに関する様々な Q&amp;A についてご案内いたします。</p><span id="more"></span><ul><li><a href="#%E7%9B%AE%E6%AC%A1">目次</a></li><li><a href="#%E6%A6%82%E8%A6%81">概要</a><ul><li><a href="#anchor-about-dlp">Q1. DLP ポリシーとは</a></li><li><a href="#anchor-multi-dlp-applied">Q2. 個別環境に複数の DLP ポリシーが適用された場合</a></li><li><a href="#anchor-dlp-edit-history">Q3. DLP ポリシーの変更履歴を確認する方法</a></li><li><a href="#anchor-default-new-connector-classification">Q4. 新しいコネクタが追加されたときの分類</a></li><li><a href="#anchor-export-all-connectors">Q5. DLP ポリシーに設定されているコネクタの一覧を出力する</a></li><li><a href="#anchor-time-to-be-applied">Q6. DLP ポリシーを作成してから適用されるまでの時間</a></li><li><a href="#anchor-affect-to-app-flow">Q7. アプリとフローへの DLP ポリシーの影響</a><ul><li><a href="#anchor-affect-to-app-flow-create">1. アプリやフローを設計する段階での影響</a></li><li><a href="#anchor-affect-to-app-flow-run">2. アプリやフローを実行する段階での影響</a></li></ul></li></ul></li><li><a href="#%E8%A3%9C%E8%B6%B3">補足</a></li></ul><p><a id='概要'></a></p><h1 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h1><p>今回はよくあるお問い合わせとして、DLP ポリシーに関する様々な Q&amp;A についてご案内いたします。</p><p><a id='anchor-about-dlp'></a></p><h1 id="Q1-DLP-ポリシーとは"><a href="#Q1-DLP-ポリシーとは" class="headerlink" title="Q1. DLP ポリシーとは"></a>Q1. DLP ポリシーとは</h1><p>DLP ポリシーとは、「Data Loss Prevention (データ損失防止) ポリシー」の略で、企業や組織の重要なデータを守るための仕組みです。  </p><p>Power Platform では、様々な「コネクタ」を使用して Microsoft 365 や 外部サービスとデータをやり取りすることが可能です。<br>便利な反面、誤って社内機密を外部に送ってしまうというリスクも存在しています。  </p><p>DLP ポリシーはこのようなリスクを防ぐために、コネクタの利用範囲を制限することができます。<br>具体的には、「社内データは SharePoint や Outlook などのビジネスコネクタだけと連携可能」や、「SNS系コネクタは使用禁止」というルールを設定できます。  </p><p>(参考：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/wp-data-loss-prevention">データの消失防止 (DLP) ポリシー</a>)</p><p><a id='anchor-multi-dlp-applied'></a></p><h1 id="Q2-個別環境に複数の-DLP-ポリシーが適用された場合"><a href="#Q2-個別環境に複数の-DLP-ポリシーが適用された場合" class="headerlink" title="Q2. 個別環境に複数の DLP ポリシーが適用された場合"></a>Q2. 個別環境に複数の DLP ポリシーが適用された場合</h1><p>ある環境に対して、テナント全体に適用される DLP ポリシーとその環境のみに適用される DLP ポリシーが存在した場合の挙動について、詳細をご説明します。</p><h2 id="評価の基本ルール"><a href="#評価の基本ルール" class="headerlink" title="評価の基本ルール"></a>評価の基本ルール</h2><ol><li>すべての DLP ポリシーが同時に評価され、<strong>最も制限の厳しい設定が優先</strong>されます。<br>特に「ブロック済み」に分類されているコネクタは、他の DLP ポリシーで許可されている場合でも使用はできません。<br>例えば、全体に適用されている DLP ポリシーにおいて HTTP コネクタが「ブロック済み」に分類されている場合、<br>個別環境の DLP ポリシーで許可されていたとしても、使用することはできません。</li></ol><ol start="2"><li><p>同じコネクタが、ある DLP ポリシーでは「業務」、別の DLP ポリシーでは「非ビジネス」と分類されていた場合：<br> そのコネクタは <strong>単体では使用可能ですが、他のコネクタと一緒に使うことができなくなります</strong>。<br> これは、Power Platform ではアプリやフロー内で使用されるすべてのコネクタが、同じ「分類グループ」に属している必要があるためです。</p><p> 具体的には：</p><ul><li>「業務」に分類されているコネクタ同士は 併用可能  </li><li>「非ビジネス」に分類されているコネクタ同士は 併用可能  </li><li>「業務」と「非ビジネス」にまたがるコネクタは <strong>併用不可</strong></li></ul><p> となっています。</p></li></ol><p>(参考：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/dlp-combined-effect-multiple-policies">Microsoft Learn - DLP ポリシーの組み合わせ効果</a>)</p><h2 id="実際の例"><a href="#実際の例" class="headerlink" title="実際の例"></a>実際の例</h2><p>以降では、簡単な例を用いてより具体的な挙動について解説します。</p><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p>テナント全体に適用されている DLP ポリシーをグループ A 、個別環境に適用されている DLP ポリシーをグループ B という前提のもと、進めていきます。</p><h3 id="実際の挙動"><a href="#実際の挙動" class="headerlink" title="実際の挙動"></a>実際の挙動</h3><p>こちらが、グループＡとグループＢでのコネクタ分類と、それに基づく実際の挙動をまとめた表になります。</p><table><thead><tr><th>コネクタ名</th><th>グループＡ (全体 DLP)</th><th>グループＢ (個別 DLP)</th><th>個別環境での実際の挙動</th></tr></thead><tbody><tr><td>Salesforce</td><td>業務</td><td>ブロック済み</td><td>使用不可(「ブロック済み」が優先)</td></tr><tr><td>Dropbox</td><td>ブロック済み</td><td>非ビジネス</td><td>使用不可(「ブロック済み」が優先)</td></tr><tr><td>Excel Online (Business)</td><td>業務</td><td>業務</td><td>他の「業務」コネクタとの併用可能</td></tr><tr><td>Office 365 Outlook</td><td>非ビジネス</td><td>非ビジネス</td><td>他の「非ビジネス」コネクタとの併用可能</td></tr><tr><td>SharePoint</td><td>業務</td><td>非ビジネス</td><td>単体使用は可能。他のコネクタとの併用不可。</td></tr></tbody></table><p>このように、<strong>同じコネクタでもポリシーごとに分類が異なる場合、アプリやフロー内でのコネクタ使用に制限が生じてしまいます</strong>。<br>そのため、環境に適用する DLP ポリシーの数は最小限に抑えることが推奨されております。<br>また、同じコネクタに対して異なる分類 (業務／非ビジネス／ブロック済み) を設定しないようご留意ください。</p><p><a id='anchor-dlp-edit-history'></a></p><h1 id="Q3-設定した-DLP-ポリシーの変更履歴を確認する方法"><a href="#Q3-設定した-DLP-ポリシーの変更履歴を確認する方法" class="headerlink" title="Q3. 設定した DLP ポリシーの変更履歴を確認する方法"></a>Q3. 設定した DLP ポリシーの変更履歴を確認する方法</h1><p>DLP ポリシーの変更内容については、<strong>Microsoft Purview</strong> の「<strong>監査ログ</strong>」から確認いただけます。</p><p>以下の手順で変更履歴を取得することが可能です。</p><ol><li>アクセス権をもつアカウントで、Microsoft Purview 管理センターにアクセスしてください。</li><li>「監査＞検索」を選択し、「アクティビティ – 操作名」に「GovernanceApiPolicyOperation」を入力してください。</li><li>検索対象となる時間範囲を指定して「検索」を選択いただくことで、指定の時間範囲内の DLP ポリシーの変更履歴を確認することが可能です。</li></ol><p><img src="/blog/powerplatform/overlapped-dlppolicy/purview-log.png"></p><p>表示されますデータの例等の詳細につきましては、下記の公開情報をご参照ください。<br><br>(参考：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/admin-activity-logging#activity-category-data-policy-events">Microsoft Learn - Microsoft Purview のソリューションの概要を使用して Power Platform 管理ログを表示する</a>)</p><p><a id='anchor-default-new-connector-classification'></a></p><h1 id="Q4-新しいコネクタが追加されたときの分類"><a href="#Q4-新しいコネクタが追加されたときの分類" class="headerlink" title="Q4. 新しいコネクタが追加されたときの分類"></a>Q4. 新しいコネクタが追加されたときの分類</h1><p>新しいコネクタがリリースされたとき、そのコネクタは<strong>既定グループ</strong>に分類されます。<br><br>既定グループは、デフォルトで「<strong>非ビジネス</strong>」グループとなっております。</p><p><img src="/blog/powerplatform/overlapped-dlppolicy/image.png"></p><p>DLP ポリシーを作成するにあたって、任意のコネクタを他のグループに移動することはできますが、<br>最初から既定グループ以外に分類されるコネクタはございません。</p><p>既定グループを変更されたい場合は、以下の公開情報に手順がございますので、ご参照ください。<br><br>(参考：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/prevent-data-loss?tabs=new#change-the-default-data-group">Microsoft Learn - データポリシーを管理する</a>)</p><p><a id='anchor-export-all-connectors'></a></p><h1 id="Q5-DLP-ポリシーに設定されているコネクタの一覧を出力する"><a href="#Q5-DLP-ポリシーに設定されているコネクタの一覧を出力する" class="headerlink" title="Q5. DLP ポリシーに設定されているコネクタの一覧を出力する"></a>Q5. DLP ポリシーに設定されているコネクタの一覧を出力する</h1><p>以下のブログにて、DLP ポリシーに設定されたコネクタの一覧を CSV ファイルに出力する方法をご案内しておりますので、ご参照ください。</p><p><a href="https://jpdynamicscrm.github.io/blog/powerplatform/Output-dlp-policy-connector-list/">DLP ポリシーに設定されているコネクタの一覧を出力する | Japan Dynamics CRM &amp; Power Platform Support Blog</a></p><p><a id='anchor-time-to-be-applied'></a></p><h1 id="Q6-DLP-ポリシーを作成してから適用されるまでの時間"><a href="#Q6-DLP-ポリシーを作成してから適用されるまでの時間" class="headerlink" title="Q6. DLP ポリシーを作成してから適用されるまでの時間"></a>Q6. DLP ポリシーを作成してから適用されるまでの時間</h1><p>DLP ポリシーを作成してから、実際に適用されるようになるまでに<strong>最大 24 時間</strong>かかります。</p><p>ほとんどの場合、1 時間ほどで反映されますが、ポリシーの適用範囲によっても変動いたします。<br>ご使用のアプリ、フローの数が多いほど、変更が完全に有効になるまでの時間が長くなります。</p><p>公開情報については、以下をご参照ください。<br><br>(参考：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/wp-data-loss-prevention#latency-considerations">Microsoft Learn - 待機時間に関する考慮事項</a>)</p><p><a id='anchor-affect-to-app-flow'></a></p><h1 id="Q7-アプリとフローへの-DLP-ポリシーの影響"><a href="#Q7-アプリとフローへの-DLP-ポリシーの影響" class="headerlink" title="Q7. アプリとフローへの DLP ポリシーの影響"></a>Q7. アプリとフローへの DLP ポリシーの影響</h1><p>DLP ポリシーの追加・更新により、既存のアプリやフローにどのような影響がありうるかをご案内いたします。</p><p><a id='anchor-affect-to-app-flow-create'></a></p><h2 id="1-アプリやフローを設計する段階での影響"><a href="#1-アプリやフローを設計する段階での影響" class="headerlink" title="1. アプリやフローを設計する段階での影響"></a>1. アプリやフローを設計する段階での影響</h2><p>アプリやフローを構築する際、同じグループに属さないコネクタや、ポリシーでブロックされたコネクタを追加しようとすると、以下のようなエラーメッセージが表示されます。</p><p><img src="/blog/powerplatform/overlapped-dlppolicy/image2.png"></p><p><a id='anchor-affect-to-app-flow-run'></a></p><h2 id="2-アプリやフローを実行する段階への影響"><a href="#2-アプリやフローを実行する段階への影響" class="headerlink" title="2. アプリやフローを実行する段階への影響"></a>2. アプリやフローを実行する段階への影響</h2><p>アプリやフローは、作成当時の DLP ポリシーに従って設計されています。<br>DLP ポリシーが更新されると、<strong>更新後の DLP ポリシーで再評価されます</strong>。<br>その結果、それまでには問題がなかったアプリやフローの構成が違反として扱われる場合があります。</p><p>最新の DLP ポリシーに違反しているアプリやフローを実行しようとすると、以下のような状態になります。</p><ul><li><p>Power Automate の場合<br><strong>違反するフローは実行できなくなり、「中断（Suspended）」状態</strong> になります。<br>この状態では、DLP ポリシー違反を解消するまで、フローは実行できません。</p></li><li><p>Power Apps の場合<br>同じグループに属さないコネクタや、ブロックされたコネクタを含む<strong>アプリを開くことはできなくなります</strong>。</p></li></ul><p>(参考：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/dlp-impact-policies-apps-flows">Microsoft Learn - アプリとフローへのデータ ポリシーの影響</a>)</p><hr><p><a id='補足'></a></p><h1 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h1><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。<br>バージョンアップによって UI の遷移などが若干異なる場合があります。<br>その場合は画面の指示に従って進めてください。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの宮﨑です。&lt;br&gt;本記事では、DLP ポリシーに関する様々な Q&amp;amp;A についてご案内いたします。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Connector and Connection" scheme="https://jpdynamicscrm.github.io/blog/tags/Connector-and-Connection/"/>
    
  </entry>
  
  <entry>
    <title>Copilot Studio エージェントの作成に必要な権限について</title>
    <link href="https://jpdynamicscrm.github.io/blog/copilotstudio/how-to-block-access-mcsportal/"/>
    <id>https://jpdynamicscrm.github.io/blog/copilotstudio/how-to-block-access-mcsportal/</id>
    <published>2025-09-10T04:30:00.000Z</published>
    <updated>2026-02-20T00:55:28.955Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。Power Platform サポートチームの 網野 です。<br>今回は Copilot Studio でエージェントを作成できるユーザーに必要な権限についてご紹介します。</p><span id="more"></span><h2 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h2><p>Copilot Studioでエージェントを作成できるユーザーに、どのような権限が必要なのかを解説します。</p><p>ご留意点として、Copilot Studio は 2025 年 9 月現在、早いスピードで日々機能開発が進んでいます。そのため、実際にご利用いただく際は必ず最新の公開情報を参照していただけますようお願い申し上げます。</p><h2 id="Copilot-Studioでエージェント作成に必要な権限とは？"><a href="#Copilot-Studioでエージェント作成に必要な権限とは？" class="headerlink" title="Copilot Studioでエージェント作成に必要な権限とは？"></a>Copilot Studioでエージェント作成に必要な権限とは？</h2><p>Copilot Studio でエージェントを作成するには、ユーザーに <a href="https://learn.microsoft.com/en-us/microsoft-copilot-studio/billing-licensing#copilot-studio-use-rights-included-with-microsoft-365-copilot-license">Copilot Studio へのアクセス権</a>と、対象環境でリソースを作成するための<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=web#assign-environment-security-roles">セキュリティロール</a>が割り当てられている必要があります。<br>この2つの権限が揃っていないと、エージェントの作成や管理ができません。</p><h3 id="Copilot-Studio-へのアクセス権"><a href="#Copilot-Studio-へのアクセス権" class="headerlink" title="Copilot Studio へのアクセス権"></a>Copilot Studio へのアクセス権</h3><p>Copilot Studio ポータルにアクセスするためには、ユーザーに以下のいずれかのライセンスまたはロールが必要です。<br>※以下のいずれかに該当するとアクセスできるようになります。</p><ul><li>Copilot Studio ユーザーライセンス</li><li>Copilot Studio 試用版ライセンス</li><li>Microsoft 365 Copilot ライセンス</li><li>Power Platform 管理センター テナント設定の「Copilot Studio 作成者」ロール（※）<blockquote><p>※ 重量課金のみのライセンスでエージェントを作成する際に必要なロールです。<br>詳細は<a href="#%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E6%A8%A9%E3%81%AE%E8%A9%B3%E7%B4%B0">アクセス権の詳細</a>で説明します。</p></blockquote></li></ul><h3 id="対象環境でリソースを作成するためのセキュリティロール"><a href="#対象環境でリソースを作成するためのセキュリティロール" class="headerlink" title="対象環境でリソースを作成するためのセキュリティロール"></a>対象環境でリソースを作成するためのセキュリティロール</h3><p>エージェントを作成するためには、エージェントを作成する環境に対してセキュリティロールが必要となります。<br>リソースを作成するために必要なセキュリティロールは以下になります。</p><ul><li>環境作成者</li><li>システムカスタマイザー</li><li>システム管理者</li></ul><blockquote><p>※ 詳細は公開情報を参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/canvas-apps/sign-in-to-power-apps#filter-environments-by-role">https://learn.microsoft.com/ja-jp/power-apps/maker/canvas-apps/sign-in-to-power-apps#filter-environments-by-role</a></p></blockquote><h2 id="アクセス権の詳細"><a href="#アクセス権の詳細" class="headerlink" title="アクセス権の詳細"></a>アクセス権の詳細</h2><h3 id="Copilot-Studio-ユーザーライセンス"><a href="#Copilot-Studio-ユーザーライセンス" class="headerlink" title="Copilot Studio ユーザーライセンス"></a>Copilot Studio ユーザーライセンス</h3><p>Copilot Studio メッセージパックに含まれるライセンスで、<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing?tabs=web#assign-licenses-to-users">Microsoft 365 管理センター等から付与</a>することができます。<br>Copilot Studio の使用権が含まれています。</p><h3 id="Copilot-Studio-試用版ライセンス"><a href="#Copilot-Studio-試用版ライセンス" class="headerlink" title="Copilot Studio 試用版ライセンス"></a>Copilot Studio 試用版ライセンス</h3><p><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/sign-up-individual">ユーザーがセルフサービスサインアップで取得できる</a>期間限定のライセンスです。<br>有償ライセンスを購入いただく前のお試し用として、Copilot Studio ユーザーライセンスと同じ機能が利用できます。</p><h3 id="Microsoft-365-Copilot-ライセンス"><a href="#Microsoft-365-Copilot-ライセンス" class="headerlink" title="Microsoft 365 Copilot ライセンス"></a>Microsoft 365 Copilot ライセンス</h3><p>Copilot Studio を通じて <a href="https://learn.microsoft.com/ja-jp/copilot/microsoft-365/microsoft-365-copilot-overview">Microsoft 365 Copilot</a> を拡張することができるため、Microsoft 365 Copilot ライセンスを持つユーザーは Copilot Studio を利用することができます。  </p><p><a href="https://learn.microsoft.com/ja-jp/copilot/microsoft-365/microsoft-365-copilot-setup#step-2---provision-microsoft-365-copilot-licenses">Microsoft 365 管理センター等から付与</a>することができます。　<br>Copilot Studio だけなく、Microsoft 365 Copilot の使用権が含まれています。</p><div class="alert is-important"><p class="alert-title">重要</p><p>Copilot Studio にアクセスさせるためには、「Copilot Studio in Copilot for M365」サービスを有効にする必要があります。</p><p><img src="/blog/copilotstudio/how-to-block-access-mcsportal/m365copilot.png"></p></div><h3 id="Power-Platform-管理センター-テナント設定の「Copilot-Studio-作成者」ロール"><a href="#Power-Platform-管理センター-テナント設定の「Copilot-Studio-作成者」ロール" class="headerlink" title="Power Platform 管理センター テナント設定の「Copilot Studio 作成者」ロール"></a>Power Platform 管理センター テナント設定の「Copilot Studio 作成者」ロール</h3><p>従量課金環境のみを利用して Copilot Studio を利用するユーザー向けに用意された機能が「Copilot Studio 作成者」機能です。<br>他のユーザーに付与するライセンスと異なり、ユーザーごとにライセンスを付与する必要はありません。<br>Copilot Studio でエージェントを作成したいユーザーをセキュリティグループに追加し、Copilot Studio へのアクセスを許可します。</p><p>作成手順</p><ol><li>Azure ポータルでセキュリティグループを作成します。</li><li>Copilot Studio へのアクセスを許可したいユーザーをセキュリティグループに追加します。<br><img src="/blog/copilotstudio/how-to-block-access-mcsportal/securitygroup.png"></li><li><a href="https://admin.powerplatform.microsoft.com/manage/tenantsettings">Power Platform 管理センターのテナント設定</a>を開きます。</li><li>「Copilot Studio 作成者」を選択し、作成したセキュリティグループを設定します。<br><img src="/blog/copilotstudio/how-to-block-access-mcsportal/tenant_setting.png"></li></ol><h2 id="よくある質問"><a href="#よくある質問" class="headerlink" title="よくある質問"></a>よくある質問</h2><h3 id="テナント設定の「Copilot-Studio-作成者」に設定したセキュリティグループに属さないユーザーは、Copilot-Studio-にアクセスできないようになりますか。"><a href="#テナント設定の「Copilot-Studio-作成者」に設定したセキュリティグループに属さないユーザーは、Copilot-Studio-にアクセスできないようになりますか。" class="headerlink" title="テナント設定の「Copilot Studio 作成者」に設定したセキュリティグループに属さないユーザーは、Copilot Studio にアクセスできないようになりますか。"></a>テナント設定の「Copilot Studio 作成者」に設定したセキュリティグループに属さないユーザーは、Copilot Studio にアクセスできないようになりますか。</h3><p>いいえ、「Copilot Studio 作成者」に設定したセキュリティグループに属さないユーザーも、ユーザーライセンスを持っていれば Copilot Studio にアクセスできます。</p><h3 id="Copilot-Studio-にアクセスできないユーザーは-Copilot-Studio-で作成したエージェントを利用することができますか"><a href="#Copilot-Studio-にアクセスできないユーザーは-Copilot-Studio-で作成したエージェントを利用することができますか" class="headerlink" title="Copilot Studio にアクセスできないユーザーは Copilot Studio で作成したエージェントを利用することができますか"></a>Copilot Studio にアクセスできないユーザーは Copilot Studio で作成したエージェントを利用することができますか</h3><p>はい、利用できます。エージェントの利用者は、Copilot Studio にアクセスできる必要はありません。<br>ただし、Teams やカスタム Web サイトなど、エージェントを公開した場所にアクセスできる必要がございます。<br><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing?tabs=web">https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing?tabs=web</a><br><img src="/blog/copilotstudio/how-to-block-access-mcsportal/c2licensing.png"></p><h3 id="環境ごとにエージェントの作成を制限することはできますか"><a href="#環境ごとにエージェントの作成を制限することはできますか" class="headerlink" title="環境ごとにエージェントの作成を制限することはできますか"></a>環境ごとにエージェントの作成を制限することはできますか</h3><p>現時点では、エージェントの作成を制御するための機能はありません。<br><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/security-faq#can-i-disable-microsoft-copilot-studio-agent-creation-in-my-organization">https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/security-faq#can-i-disable-microsoft-copilot-studio-agent-creation-in-my-organization</a><br><img src="/blog/copilotstudio/how-to-block-access-mcsportal/control.png"></p><p>ただし、既定環境以外の環境では、 [対象環境でリソースを作成するためのセキュリティロール]を付与しないことで、環境へのアクセスを制御することが可能です。</p><div class="alert is-info"><p class="alert-title">Note</p><p>※ 既定環境では、「環境作成者」ロールが自動付与されるため、アクセスを制御することはできません。</p></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは。Power Platform サポートチームの 網野 です。&lt;br&gt;今回は Copilot Studio でエージェントを作成できるユーザーに必要な権限についてご紹介します。&lt;/p&gt;</summary>
    
    
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/categories/Microsoft-Copilot-Studio/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/tags/Microsoft-Copilot-Studio/"/>
    
  </entry>
  
  <entry>
    <title>Power Platform 管理センター からサポート リクエストを起票するために必要な権限について</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/ppac-azure-sr-roles-restriction/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/ppac-azure-sr-roles-restriction/</id>
    <published>2025-08-31T15:00:00.000Z</published>
    <updated>2026-02-20T00:55:29.262Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポート チームの三田です。<br>本記事では、Power Platform 管理センター（PPAC）からサポート リクエストを起票するために必要な権限についてご紹介いたします。</p><h3 id="【この記事からわかること】"><a href="#【この記事からわかること】" class="headerlink" title="【この記事からわかること】"></a>【この記事からわかること】</h3><ul><li>PPAC における サポート リクエスト 起票が可能なロールについて</li><li>PPAC から サポート リクエスト を起票する方法</li></ul><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#PPAC%E3%81%8B%E3%82%89%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%81%AE%E8%B5%B7%E7%A5%A8%E3%81%8C%E5%8F%AF%E8%83%BD%E3%81%AA%E3%83%AD%E3%83%BC%E3%83%AB">PPAC から サポート リクエスト の起票が可能なロール</a></li><li><a href="#PPAC%E3%81%8B%E3%82%89%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%82%92%E8%B5%B7%E7%A5%A8%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95">PPAC から サポート リクエスト を起票する方法</a></li><li><a href="#%E3%81%BE%E3%81%A8%E3%82%81">まとめ</a></li></ul><h2 id="PPAC-から-サポート-リクエスト-の起票が可能なロール"><a href="#PPAC-から-サポート-リクエスト-の起票が可能なロール" class="headerlink" title="PPAC から サポート リクエスト の起票が可能なロール"></a>PPAC から サポート リクエスト の起票が可能なロール</h2><p>Power Platform 管理センター（PPAC）では、サポート リクエストを作成するために、以下のサポート作成が有効化されたロールのいずれかを保持している必要がございます。</p><p>＜Microsoft Entra ロール＞</p><blockquote><ul><li>Microsoft Entra ロール管理者</li><li>会社管理者 (グローバル管理者)</li><li>課金管理者</li><li>サービス管理者</li><li>セキュリティ管理者</li><li>コンプライアンス管理者</li><li>ヘルプデスク管理者</li><li>パートナー代理管理者</li><li>SharePoint 管理者</li><li>チーム管理者 (Microsoft Teams 管理者)</li><li>Exchange 管理者</li><li>Power BI 管理者</li><li>Power Platform 管理者</li><li>CRM サービス管理者</li><li>Power Apps Full 管理者</li></ul></blockquote><p>＜セキュリティ ロール＞</p><blockquote><ul><li>環境管理者 (または Dataverse のシステム管理者ロール)</li><li>CRM 組織の管理者 (Dataverse のシステム管理者ロール)</li><li>Power Apps 環境管理者</li><li>LCS ユーザー</li></ul></blockquote><p>また、技術的サポートを受けるためには、ご契約のサポート プラン（Subscription／ProDirect／Unified など）が要件を満たしている必要がございますのでご留意ください。</p><p>＜参考資料＞</p><ul><li><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/get-help-support">サポートを受ける</a>  </p></li><li><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/support-overview#using-support">サポートの概要</a></p></li></ul><h2 id="PPAC-から-サポート-リクエスト-を起票する方法"><a href="#PPAC-から-サポート-リクエスト-を起票する方法" class="headerlink" title="PPAC から サポート リクエスト を起票する方法"></a>PPAC から サポート リクエスト を起票する方法</h2><p>事前に、<a href="#PPAC%E3%81%8B%E3%82%89%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%81%AE%E8%B5%B7%E7%A5%A8%E3%81%8C%E5%8F%AF%E8%83%BD%E3%81%AA%E3%83%AD%E3%83%BC%E3%83%AB">上記の起票に使用するアカウントの権限</a>と、ご契約のサポート プランの要件をご確認ください。最小権限での実施を推奨いたします。</p><ol><li><p>Power Platform 管理センター <a href="https://admin.powerplatform.microsoft.com/">https://admin.powerplatform.microsoft.com/</a> にアクセスし、対象テナントのアカウントでサインイン</p></li><li><p>左側ナビゲーションから「サポート」を選択し、「サポートを受ける」ボタンをクリック<br><img src="/blog/powerplatform/ppac-azure-sr-roles-restriction/step2_help+support.png" alt="PPAC サポート要求画面"></p></li><li><p>項目に従って、以下の情報を入力</p></li></ol><ul><li>製品/サービス: 例）Power Apps / Power Automate / Power Pages / Dataverse など</li><li>環境: 影響している環境（開発/本番など）</li><li>問題の種類/カテゴリ: 最も近い項目を選択</li><li>重大度（影響度）: 影響範囲・業務影響に応じて選択</li></ul><p>起票の際に「どんな動作を期待するか」など、詳細な情報をいただけますとより的確で迅速なご案内が可能でございます。ご協力よろしくお願いいたします。</p><p>(補足)<br>プレビュー機能で、<a href="#%E5%B7%A6%E5%81%B4%E3%83%8A%E3%83%93%E3%82%B2%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%8B%E3%82%89%E3%80%8C%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%80%8D%E3%82%92%E9%81%B8%E6%8A%9E%E3%81%97%E3%80%81%E3%80%8C%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%82%92%E5%8F%97%E3%81%91%E3%82%8B%E3%80%8D%E3%83%9C%E3%82%BF%E3%83%B3%E3%82%92%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF">ステップ2</a>の後に、サポートエージェントが起動します。サポートエージェントとのチャットボットを利用することで早期解決につなげることが可能でございますので、ぜひご活用ください。</p><p>＜参考資料＞<br><a href="#https://learn.microsoft.com/ja-jp/power-platform/admin/get-help-support#view-solutions-or-create-a-support-request-using-the-support-agent-preview">サポート エージェントを使用してソリューションを表示するか、サポート要求を作成する (プレビュー)</a></p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>本記事では、Power Platform 管理センター（PPAC）でサポート リクエスト（SR）を起票するために必要な権限についてご紹介いたしました。Power Platform について少しでもお困りごとがございましたら、私どもサポート チームが全力でご支援いたします。どうぞ本記事を参考に、気兼ねなく SR を起票くださいますようお願い申し上げます。</p><h2 id="注意事項（情報の更新可能性）"><a href="#注意事項（情報の更新可能性）" class="headerlink" title="注意事項（情報の更新可能性）"></a>注意事項（情報の更新可能性）</h2><p>本記事の内容は執筆日時点の情報に基づいております。製品の仕様や UI、ロールの名称・権限、制限事項、およびリンク先の内容は将来的に変更される可能性がございます。最新情報は公式ドキュメントをご確認くださいますようお願い申し上げます。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポート チームの三田です。&lt;br&gt;本記事では、Power Platform 管理センター（PPAC）からサポート リクエストを起票するために必要な権限についてご紹介いたします。&lt;/p&gt;
&lt;h3 id=&quot;【この記事からわかること】&quot;</summary>
      
    
    
    
    <category term="Power Platform Admin Center" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform-Admin-Center/"/>
    
    
    <category term="サポート リクエスト" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88-%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88/"/>
    
    <category term="SR" scheme="https://jpdynamicscrm.github.io/blog/tags/SR/"/>
    
    <category term="役割" scheme="https://jpdynamicscrm.github.io/blog/tags/%E5%BD%B9%E5%89%B2/"/>
    
    <category term="Power Platform 管理センター" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform-%E7%AE%A1%E7%90%86%E3%82%BB%E3%83%B3%E3%82%BF%E3%83%BC/"/>
    
  </entry>
  
  <entry>
    <title>Power Automate で Teams コネクタを使う際に改行を反映する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerautomate/cloudflow-specialcharacters/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerautomate/cloudflow-specialcharacters/</id>
    <published>2025-08-28T03:00:00.000Z</published>
    <updated>2026-02-20T00:55:29.026Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの宮﨑です。<br>本記事では Power Automate で Teams コネクタを使用してメッセージを投稿する際、文字列の改行を反映する方法についてご案内いたします。</p><span id="more"></span><h1 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h1><ol><li><a href="#anchor-intro">概要</a></li><li><a href="#anchor-line-break-issue">解決したい事象</a></li><li><a href="#anchor-line-break">改行を反映する方法</a><ol><li><a href="#anchor-line-break-replace">replace関数を使用する</a><ol><li><a href="#anchor-line-break-replace-flow">フローの例</a></li><li><a href="#anchor-line-break-replace-reason">なぜこれで解消できるのか</a></li></ol></li><li><a href="#anchor-line-break-pre">preタグを使用する</a><ol><li><a href="#anchor-line-break-pre-flow">フローの例</a></li><li><a href="#anchor-line-break-pre-reason">なぜこれで解消できるのか</a></li></ol></li></ol></li><li><a href="#%E8%A3%9C%E8%B6%B3">補足</a></li></ol><p><a id='anchor-intro'></a></p><h1 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h1><p>今回はよくあるお問い合わせとして、 Power Automate で Teams コネクタを使用してメッセージを投稿する際、文字列の改行を反映する方法についてご案内いたします。</p><p><a id='anchor-line-break-issue'></a></p><h2 id="解決したい事象"><a href="#解決したい事象" class="headerlink" title="解決したい事象"></a>解決したい事象</h2><p>下のような SharePoint リストから、Power Automate のクラウドフローで複数行テキストを取得する際、</p><p><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/list.png"></p><p>Teams に投稿すると改行が反映されないことがあります。</p><p><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/notify-failure.png"></p><p>以降では、このような事象の解決方法をご案内いたします。<br>※今回は Teams コネクタを使用している想定での事象となります。コネクタにより動作が異なる可能性がございますのでご留意ください。</p><p><a id='anchor-line-break'></a></p><h2 id="改行を反映する方法"><a href="#改行を反映する方法" class="headerlink" title="改行を反映する方法"></a>改行を反映する方法</h2><p>今回は事象の解決方法として、replace 関数を使用する方法と、&lt;pre&gt;タグを使用する方法の２つをご案内いたします。</p><p><a id='anchor-line-break-replace'></a></p><h3 id="replace-関数を使用する方法"><a href="#replace-関数を使用する方法" class="headerlink" title="replace 関数を使用する方法"></a>replace 関数を使用する方法</h3><p><a id='anchor-line-break-replace-flow'></a></p><h4 id="フローの例"><a href="#フローの例" class="headerlink" title="フローの例"></a>フローの例</h4><p>今回の例では、以下の状況を想定しています。</p><p>トリガー：SharePoint リストにアイテムが追加されたとき<br>アクション：アイテムの内容を Teams に投稿する</p><p>イメージ図<br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/flow-image.png"></p><p>フローの全体図は以下の通りです。<br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/replace/replace-flow-outline.png"></p><p>ここから、フローの詳細を順を追って解説いたします。</p><h4 id="トリガー：SharePoint-リストにアイテムが追加されたとき"><a href="#トリガー：SharePoint-リストにアイテムが追加されたとき" class="headerlink" title="トリガー：SharePoint リストにアイテムが追加されたとき"></a>トリガー：SharePoint リストにアイテムが追加されたとき</h4><p>※こちらのトリガーはあくまでも一例となります。</p><p>下画像のように、ご自身の SharePoint リストをご指定ください。<br><br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/sharepoint.png"></p><h4 id="アクション：アイテムの内容を-Teams-に投稿する"><a href="#アクション：アイテムの内容を-Teams-に投稿する" class="headerlink" title="アクション：アイテムの内容を Teams に投稿する"></a>アクション：アイテムの内容を Teams に投稿する</h4><p>下画像のように、投稿先の情報についてご指定ください。<br><br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/replace/teams.png"></p><h4 id="メッセージ部分"><a href="#メッセージ部分" class="headerlink" title="メッセージ部分"></a>メッセージ部分</h4><p>以下の式をアクション内で設定することで、投稿されたメッセージに改行を反映できるようになります。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">replace(改行を反映したい文字列, decodeUriComponent(&#x27;%0A&#x27;), &#x27;&lt;br&gt;&#x27;)</span><br></pre></td></tr></table></figure><p><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/replace/message.png"></p><hr><p><a id='anchor-line-break-replace-reason'></a></p><h4 id="なぜこれで解消できるのか"><a href="#なぜこれで解消できるのか" class="headerlink" title="なぜこれで解消できるのか"></a>なぜこれで解消できるのか</h4><p>SharePoint リストや Microsoft Excel から取得した複数行テキストを Teams に HTML形式で投稿する際には、<br>改行部分を「&lt;br&gt;」タグへ置換する必要がございます。</p><p>特定の文字列を別の文字列に置換する replace 関数を用いることで、「&lt;br&gt;」タグを挿入することが可能となります。</p><h4 id="replace-文字列-‘-n’-‘-lt-br-gt-’-ではなぜ解消しないのか"><a href="#replace-文字列-‘-n’-‘-lt-br-gt-’-ではなぜ解消しないのか" class="headerlink" title="replace(文字列, ‘\n’, ‘&lt;br&gt;’) ではなぜ解消しないのか"></a>replace(文字列, ‘\n’, ‘&lt;br&gt;’) ではなぜ解消しないのか</h4><p><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/replace/replace-json.png"></p><p>フロー内で文字列を扱う際、改行コードは「\n」と表示されますが、Power Automate で変換するときに特殊文字はそのまま扱えません。<br>そのため、replace( 文字列, ‘\n’, ‘&lt;br&gt;’ ) では、Power Automate が認識する改行部分を取得・置換することができません。</p><p>今回の方法では、decodeUriComponent 関数を使って「%0A」をデコードすることで、実際の改行文字（LF）を取得しています。<br>その改行文字を replace 関数で 「&lt;br&gt;」タグ に置換することで、Teams などに投稿する際に正しく改行が反映されるようになります。</p><p>他のテキストファイルなどからコピーして取得した文字列では、改行コードが LF とは限らない可能性がございますので、<br>上記方法で上手くいかない場合には、次の「pre タグを使用する方法」をお試しいただくか、以下の表をご参照ください。</p><p>※ 改行コードとURLエンコードの対応表</p><table><thead><tr><th>改行コード</th><th>意味</th><th>エンコード後の文字列</th></tr></thead><tbody><tr><td>LF</td><td>Line Feed（改行）</td><td><code>%0A</code></td></tr><tr><td>CR</td><td>Carriage Return（復帰）</td><td><code>%0D</code></td></tr><tr><td>CRLF</td><td>Carriage Return + Line Feed</td><td><code>%0D%0A</code></td></tr></tbody></table><ul><li><code>decodeUriComponent(&#39;%0A&#39;)</code> → LF（改行）を取得</li><li><code>decodeUriComponent(&#39;%0D&#39;)</code> → CR（復帰）を取得</li><li><code>decodeUriComponent(&#39;%0D%0A&#39;)</code> → CRLF（Windows系改行）を取得</li></ul><hr><p><a id='anchor-line-break-pre'></a></p><h3 id="pre-タグを使用する方法"><a href="#pre-タグを使用する方法" class="headerlink" title="pre タグを使用する方法"></a>pre タグを使用する方法</h3><p><a id='anchor-line-break-pre-flow'></a></p><h4 id="フローの例-1"><a href="#フローの例-1" class="headerlink" title="フローの例"></a>フローの例</h4><p>今回の例では、以下の状況を想定しています。</p><p>トリガー：SharePoint リストにアイテムが追加されたとき<br>アクション１：作成  pre タグの追加<br>アクション２：作成した変数の内容を Teams に投稿する</p><p>イメージ図<br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/flow-image.png"></p><p>フローの全体図は以下の通りです。<br><br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/pre/pre-flow-outline.png"></p><p>ここから、フローの詳細を順を追って解説いたします。</p><h4 id="トリガー：SharePoint-リストにアイテムが追加されたとき-1"><a href="#トリガー：SharePoint-リストにアイテムが追加されたとき-1" class="headerlink" title="トリガー：SharePoint リストにアイテムが追加されたとき"></a>トリガー：SharePoint リストにアイテムが追加されたとき</h4><p>※こちらのトリガーはあくまでも一例となります。</p><p>下画像のように、ご自身の SharePoint リストをご指定ください。<br><br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/sharepoint.png"></p><h4 id="アクション１：作成-pre-タグの追加"><a href="#アクション１：作成-pre-タグの追加" class="headerlink" title="アクション１：作成 pre タグの追加"></a>アクション１：作成 pre タグの追加</h4><p>下画像のように、取得したい文字列に &lt;pre&gt; タグを追加してください。<br><br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/pre/create.png"></p><h4 id="アクション２：作成した変数を-Teams-に投稿する"><a href="#アクション２：作成した変数を-Teams-に投稿する" class="headerlink" title="アクション２：作成した変数を Teams に投稿する"></a>アクション２：作成した変数を Teams に投稿する</h4><p>上で作成した変数をメッセージに設定することで、改行が反映されるようになります。<br><br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/pre/teams.png"></p><p><a id='anchor-line-break-pre-reason'></a></p><h4 id="なぜこれで解消できるのか-1"><a href="#なぜこれで解消できるのか-1" class="headerlink" title="なぜこれで解消できるのか"></a>なぜこれで解消できるのか</h4><p>HTML における &lt;pre&gt; タグは、整形済みのテキストとして表示するためのものになります。<br>これを使用することで、要素内に記述されたテキストの空白文字（スペース、タブ、改行）をまとめて反映できるようになります。</p><p>以上が、Power Automate で Teams コネクタを使用してメッセージを投稿する際、文字列の改行を反映する方法でございます。<br>お役に立てましたら幸いです。</p><p><a id='補足'></a></p><h1 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h1><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。バージョンアップによって UI の遷移などが若干異なる場合があります。その場合は画面の指示に従って進めてください。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの宮﨑です。&lt;br&gt;本記事では Power Automate で Teams コネクタを使用してメッセージを投稿する際、文字列の改行を反映する方法についてご案内いたします。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
  </entry>
  
  <entry>
    <title>Dataflow お問い合わせの際の情報取得手順</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerapps/helpful-information-for-dataflow-sr/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerapps/helpful-information-for-dataflow-sr/</id>
    <published>2025-08-20T00:00:00.000Z</published>
    <updated>2026-02-20T00:55:28.982Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの宮﨑です。<br>本記事では、Dataflow のトラブルシューティングにあたって、必要となる情報の取得手順についてご案内いたします。</p><span id="more"></span><h1 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h1><ol><li><a href="#anchor-intro">概要</a></li><li><a href="#anchor-how-to-collect">情報取得手順詳細</a><ol><li><a href="#anchor-about-situation">事象の発生状況</a></li><li><a href="#anchor-about-dataflow-datasource">データフローのデータソースの状況</a></li><li><a href="#anchor-about-onpremise-data-gateway">オンプレミスデータゲートウェイの使用状況</a></li><li><a href="#anchor-about-dataflow-type">データフローの型</a></li><li><a href="#anchor-network-trace">エラー発生時のネットワークトレース</a></li><li><a href="#anchor-dataflow-table">Dataflow テーブル</a></li><li><a href="#anchor-dataflow-history">Dataflow の更新履歴ファイル（ csv ）</a></li><li><a href="#anchor-solution-export">ソリューションのエクスポート</a></li><li><a href="#anchor-user-account">ユーザーアカウント</a></li></ol></li><li> <a href="#%E8%A3%9C%E8%B6%B3">補足</a></li></ol><p><a id='anchor-intro'></a></p><h1 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h1><p>弊社サポートでは、お問い合わせを頂いた際のトラブルシューティングにおいて、お問い合わせの内容をもとに調査方針を立てております。<br>発生している事象の把握のため、発生している事象の切り分けや情報提供をお願いすることがあります。<br>本記事では、Dataflow に関するサポートサービスのお問い合わせの際の情報取得手順につきまして、以下の通りご案内いたします。</p><p><a id='anchor-how-to-collect'></a></p><h1 id="情報取得手順詳細"><a href="#情報取得手順詳細" class="headerlink" title="情報取得手順詳細"></a>情報取得手順詳細</h1><p><a id='anchor-about-situation'></a></p><h2 id="事象の発生状況"><a href="#事象の発生状況" class="headerlink" title="事象の発生状況"></a>事象の発生状況</h2><p>エラーがどのような状況下で発生するかお知らせください。<br>事象の発生条件を特定することで、問題の特定だけではなく弊社環境での再現調査においても有用な情報が得られます。<br>以下の情報をお知らせいただくことでより明確に事象を把握することができます。</p><ol><li>事象が発生するタイミング <ul><li>いつから発生しているか・現在も継続して発生しているか</li><li>どれぐらいの頻度で発生しているか</li><li>発生前後で何らかの変更を行ったか</li><li>特定の操作で発生するか</li></ul></li><li>事象の発生環境<ul><li>機種</li><li>OS およびバージョン</li><li>ブラウザ種類 ( Microsoft Edge、Google Chrome、Firefox など)</li><li>プラグインや拡張機能の有無</li></ul></li><li>特定の利用で発生する事象か<ul><li>特定の端末か？</li><li>事象が発生している端末と事象が発生していない端末の差異</li><li>特定のユーザーか？</li><li>事象が発生しているユーザーと事象が発生していないユーザーの差</li><li>および、両者のメールアドレスやユーザープリンシパル名</li></ul></li><li>Dataflow をご利用いただいている端末のネットワーク環境の差異<ul><li>プロキシ経由かどうか</li><li>Azure Express Route の利用有無</li><li>セキュリティ製品の利用有無</li></ul></li></ol><p><a id='anchor-about-dataflow-datasource'></a></p><h2 id="データフローのデータソースの状況"><a href="#データフローのデータソースの状況" class="headerlink" title="データフローのデータソースの状況"></a>データフローのデータソースの状況</h2><p>以下の手順で、事象が発生しているデータフローのデータソースについてご確認ください。<br>データフローの編集画面を開きます。</p><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/dataflow-edit.png"> </p><p>画面右下にて、「ダイアグラム ビュー」をご選択ください。 </p><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/dataflow-diagram.png"> </p><p>以下のような表示画面が出てきましたら、「ソース」にカーソルを合わせていただき、どのようなデータソースをご使用になっているかご教示ください。　<br>（下画像では例として CSV ファイルを使用しております。）</p><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/dataflow-datasource.png"> </p><p><a id='anchor-about-onpremise-data-gateway'></a></p><h2 id="オンプレミスデータゲートウェイの使用状況"><a href="#オンプレミスデータゲートウェイの使用状況" class="headerlink" title="オンプレミスデータゲートウェイの使用状況"></a>オンプレミスデータゲートウェイの使用状況</h2><p>事象が発生しているデータフローにおきまして、オンプレミスデータゲートウェイのご利用についてご確認ください。（データフロー作成時にご選択されていない場合は「していない」とお答えください。）</p><p><a id='anchor-about-dataflow-type'></a></p><h2 id="データフローの型"><a href="#データフローの型" class="headerlink" title="データフローの型"></a>データフローの型</h2><p>対象となるデータフローの「型」列の値についてご教示ください。</p><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/dataflow-type.png"> </p><p><a id='anchor-network-trace'></a></p><h2 id="エラー発生時のネットワークトレース"><a href="#エラー発生時のネットワークトレース" class="headerlink" title="エラー発生時のネットワークトレース"></a>エラー発生時のネットワークトレース</h2><div class="alert is-info"><p class="alert-title">Note</p><p>以下の手順は、データフロー編集時にエラーが起きた場合にご実行ください。</p></div><p>エラーが発生する作業を実施したときの、ブラウザのネットワークトレースのご取得をお願いいたします。<br><br>データフローの編集を行う直前でログの記録を開始し、エラーが表示されるまでの動作をログに収録いただけますようお願い申し上げます。</p><p>ログの取得方法については、お手数ですが以下の公開情報をご参照ください。<br>※手順内の1. 及び2.ステップ記録ツール」については実施いただかなくて大丈夫です。<br><a href="https://learn.microsoft.com/ja-jp/azure/azure-portal/capture-browser-trace#google-chrome-and-microsoft-edge-chromium">https://learn.microsoft.com/ja-jp/azure/azure-portal/capture-browser-trace#google-chrome-and-microsoft-edge-chromium</a></p><p><a id='anchor-dataflow-table'></a></p><h2 id="Dataflowテーブル"><a href="#Dataflowテーブル" class="headerlink" title="Dataflowテーブル"></a>Dataflowテーブル</h2><p>対象のデータフローの ID やクエリの詳細を確認させていただくために、Dataverse 内の Dataflow テーブルのご提供をお願いいたします。<br>以下の手順にて Dataflow テーブルを表示して、ご提供頂けますようお願いいたします。</p><ol><li>Power Apps ( <a href="https://make.powerapps.com/">https://make.powerapps.com/</a> ) を開き、[設定] – [開発者リソース] の順にクリックします。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/developer-resource.png"> </p><ol start="2"><li>[Web API エンドポイント] を取得し、末尾に /msdyn_dataflows を追加したリンクを作成します。<br><br>例 : <a href="https://org/">https://org</a> **bbca2a.api.crm7.dynamics.com/api/data/v9.2/msdyn_dataflows</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/webapi-endpoint.png"></p><ol start="3"><li>項番 2 にて作成したリンクにアクセスし、保存します。<br><br>※ 以下の画面は Edge での例となります。　<br>※ 保存時に、ファイル名に環境 ID などの記載いただけますと幸いです。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/access-link.png"></p><p><a id='anchor-dataflow-history'></a></p><h2 id="データフローの更新履歴ファイル（-csv-）"><a href="#データフローの更新履歴ファイル（-csv-）" class="headerlink" title="データフローの更新履歴ファイル（ csv ）"></a>データフローの更新履歴ファイル（ csv ）</h2><p>対象のデータフローの更新履歴ファイル（ csv ）を開き、該当する問題の実行履歴をダウンロードしていただけますようお願いいたします。<br><br>また、過去に成功した実行履歴がある場合は、そちらも併せてダウンロードの上、ご提供いただけますと幸いです。</p><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/dataflow-history.png"><br><img src="/blog/powerapps/helpful-information-for-dataflow-sr/dataflow-download.png"></p><p><a id='anchor-solution-export'></a></p><h2 id="ソリューションのエクスポート"><a href="#ソリューションのエクスポート" class="headerlink" title="ソリューションのエクスポート"></a>ソリューションのエクスポート</h2><p>以下の手順にて対象のデータフローをソリューションに含めていただき、アンマネージドにてエクスポートをいただけますようお願いいたします。（実装の内容やご利用のコネクタについて確認をさせていただきます。）</p><ol><li><p>Power Automate ( <a href="https://make.powerautomate.com/">https://make.powerautomate.com/</a> )を開き、「ソリューション」をご選択ください（環境名がデータフローのものと一致しているかご確認ください）。<br><br><img src="/blog/powerapps/helpful-information-for-dataflow-sr/pa-solution.png"></p></li><li><p>新しいソリューションをご作成ください。（既存のソリューションが存在する場合は、この項目を飛ばしてください。）</p></li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/new-solution.png"></p><ol start="3"><li>作成したソリューションを開き、対象のデータフローを追加します。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/select-dataflow.png"></p><ol start="4"><li>「マネージド」が「いいえ」になっているかをご確認いただいた上で、「追加」をご選択ください。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/add-dataflow.png"></p><ol start="5"><li>「ソリューションに戻る」をクリックします。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/back-to-solution.png"></p><ol start="6"><li>作成したソリューションを選択し、「ソリューションをエクスポート」をお選びください。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/export-solution.png"></p><ol start="7"><li>「エクスポート前画面」にて「次へ」をクリックした後、アンマネージドに切り替えてエクスポートしてください。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/unmanaged-export.png"></p><ol start="8"><li>しばらくするとエクスポートが完了しますので、ダウンロードして .zip フォルダをご取得ください。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/download.png"></p><p><a id='anchor-user-account'></a></p><h2 id="ユーザーアカウント"><a href="#ユーザーアカウント" class="headerlink" title="ユーザーアカウント"></a>ユーザーアカウント</h2><p>対象のデータフロー所有者のユーザーアカウントをご教示ください。<br>もしご不明の場合は、対象のデータフローが含まれているソリューションをご選択いただき、<br>下記画像の通りに表示名がございますので、そちらをご教示いただければ幸いです。<br>※所有者の UPN もしくはオブジェクト ID がわかる場合は、そちらも併せてご提供ください。</p><h2 id=""><a href="#" class="headerlink" title=""></a><img src="/blog/powerapps/helpful-information-for-dataflow-sr/user-account.png"></h2><p><a id='補足'></a></p><h1 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h1><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。バージョンアップによって UI の遷移などが若干異なる場合があります。その場合は画面の指示に従って進めてください。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの宮﨑です。&lt;br&gt;本記事では、Dataflow のトラブルシューティングにあたって、必要となる情報の取得手順についてご案内いたします。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="サポートサービスのご利用について" scheme="https://jpdynamicscrm.github.io/blog/categories/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E3%81%94%E5%88%A9%E7%94%A8%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/"/>
    
    <category term="Dataflow" scheme="https://jpdynamicscrm.github.io/blog/categories/Dataflow/"/>
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Apps/"/>
    
    <category term="情報採取" scheme="https://jpdynamicscrm.github.io/blog/tags/%E6%83%85%E5%A0%B1%E6%8E%A1%E5%8F%96/"/>
    
    <category term="お問い合わせ全般" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%81%8A%E5%95%8F%E3%81%84%E5%90%88%E3%82%8F%E3%81%9B%E5%85%A8%E8%88%AC/"/>
    
    <category term="Dataflow" scheme="https://jpdynamicscrm.github.io/blog/tags/Dataflow/"/>
    
  </entry>
  
  <entry>
    <title>Dataverse Capacity について</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/Dataverse-Capacity/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/Dataverse-Capacity/</id>
    <published>2025-05-01T12:00:00.000Z</published>
    <updated>2026-02-20T00:55:29.172Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの吉永です。  </p><p>本記事では Dataverse ストレージにおけるライセンスごとに付与される容量の考え方についてご紹介させて頂きます。<br><br>なお、Dataverse ストレージの基本的な考え方や Dataverse ストレージ超過時の影響などは、過去に公開させて頂いた後述の記事をご参考にしていただけますと幸いです。<br><br>参考情報 : <a href="https://jpdynamicscrm.github.io/blog/powerplatform/About-Dataverse-Storage/">Dataverse のストレージ容量について</a></p><h2 id="content">目次</h2>  1. [はじめに](#anchor-begin)2. [テナントごとに付与されるストレージ容量のライセンスの概要](#anchor-dataverse-storeage)3. [購入いただいたライセンスの種類によって決定する既定の容量](#anchor-default-storage)4. [ライセンスやアドオンの購入数に応じて付与される追加容量](#anchor-addon-storage)5. [おわりに](#anchor-finish)<div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、 本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。  </p></div><p><a id="anchor-begin"></a></p><h2 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h2><p>Dataverse では各環境でご利用される容量を合計したものとをテナント全体の容量として管理する仕組みとなっております。<br>なお、実際のご利用にあたっては、ご契約いただいているライセンスの数や種類に応じて、テナントに付与される容量内でご利用いただく必要がございます。</p><p>実際にテナントに割り当てられている以上の容量をご利用いただいている場合でも、環境の利用が停止するといったことはございませんが、新たな環境の作成などが行えなくなるなど管理上の影響が発生するため、容量の不足が発生する場合については、容量の削減やライセンスの追加購入を検討いただく必要がございます。</p><blockquote><p>[本記事でご紹介する内容について]<br><br>Dataverse の容量については、従量課金を利用しているかどうかによって動作が一部異なります。<br><br>本記事では「従量課金」をご利用いただいていない場合のシナリオを元にご紹介させて頂いております。<br>従量課金制プランをご利用いただいている場合については、以下のドキュメントを合わせてご確認いただけますと幸いです。<br><br>参考情報 : <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/pay-as-you-go-meters?tabs=image#dataverse-capacity-meter">Dataverse 容量メーター</a></p></blockquote><p><a id='anchor-dataverse-storeage'></a></p><h2 id="テナントごとに付与される容量のライセンスの概要"><a href="#テナントごとに付与される容量のライセンスの概要" class="headerlink" title="テナントごとに付与される容量のライセンスの概要"></a>テナントごとに付与される容量のライセンスの概要</h2><p>Dataverse で利用可能な容量はご契約いただくライセンスの数や種類によって決定いたします。</p><p>なお、容量が割り当てられるかどうかや、割り当てられる場合の容量はライセンスによって異なるため、詳細についてはライセンスガイドをご確認頂きたくと存じますが、ライセンスのご契約によって割り当てられる容量には 2 種類の考え方がございます。</p><p>1.契約いただいたライセンスの種類によって決定されるテナント「既定の容量」<br><br>2.ライセンスやアドオンの購入数に応じて付与される「追加の容量」</p><blockquote><p>ライセンスガイドについては、以下のリンクからダウンロード可能でございます。<br><br>参考情報 : <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/pricing-billing-skus">Microsoft Power Platform のライセンスの概要</a></p></blockquote><p>つまり、Dataverse では以下の計算に基づきテナントに付与される容量が決定いたします。</p><p>・「ライセンスの種類によって決定する<font color="green"> 既定の容量」</font>  +  「ライセンスごとに追加される<font color="blue"> 追加の容量」 </font>  =  「テナントに付与される容量」</p><p><a id='anchor-default-storage'></a></p><h2 id="購入いただいたライセンスの種類によって決定する既定の容量"><a href="#購入いただいたライセンスの種類によって決定する既定の容量" class="headerlink" title="購入いただいたライセンスの種類によって決定する既定の容量"></a>購入いただいたライセンスの種類によって決定する既定の容量</h2><p>Dataverese ではご購入いただくライセンスの種類によって、テナントに付与される「既定の容量」が異なります。<br><br>既定の容量が付与されるライセンスの種類としては、主に以下のような製品に関するライセンスがございます。<br><br>・Power Apps <br><br>・Power Automate <br><br>・Copilot Studio <br><br>・Power Pages <br><br>・Dynamics <br></p><p>なお、具体的なライセンス例ごとに割り当てられる「既定の容量」は以下の通りとなります。<br><br><img src="/blog/powerplatform/Dataverse-Capacity/default%20capacity.png"></p><p>「既定の容量」はご契約いただいたライセンスごとの「既定の容量の合計値」ではなく、ご契約いただいたライセンスごとに定められた「既定の容量」の内、最も大きい容量が割り当てられる動作となります。</p><p>上記の動作について、具体的なシナリオ例についても合わせてご紹介させて頂きます。</p><h3 id="参考シナリオ"><a href="#参考シナリオ" class="headerlink" title="参考シナリオ"></a>参考シナリオ<br></h3><blockquote><p>購入ライセンス<br><br>・Power Apps Premium<br><br>・Power Apps Per App<br><br>・Copilot Studio<br></p></blockquote><p>上記のシナリオの場合、実際に適用される「既定の容量」は以下の通りとなります。<br><br><img src="/blog/powerplatform/Dataverse-Capacity/capacity-sample.png"></p><p>上記のシナリオでは、3 種類のライセンスをご契約いただいており、ライセンスごとに「既定の容量」が異なります。<br><br>ただし、テナントに割り当てられる「既定の容量」は、各ライセンスごとの「既定の容量」の合計値ではなく、最も大きい「既定の容量」が採用されます。<br><br>このため、本シナリオでは Power Apps Premium によって割り当てられる「既定の容量」がテナントに適用されます。</p><p><a id='anchor-addon-storage'></a></p><h2 id="ライセンスやアドオンの購入数に応じて付与される追加容量"><a href="#ライセンスやアドオンの購入数に応じて付与される追加容量" class="headerlink" title="ライセンスやアドオンの購入数に応じて付与される追加容量"></a>ライセンスやアドオンの購入数に応じて付与される追加容量</h2><p>Dataverse の容量は先述させて頂きました「既定の容量」とは別に、ライセンスやアドオンの購入数に応じてテナントに付与される追加容量がございます。<br><br>こちらは既定の容量とは異なり、購入いただいたライセンスとアドオンの数に応じて、付与される容量が変動する仕組みとなっております。<br><br>このため、ご契約いただくライセンスの数が多いほど、テナントに付与されるストレージ量は増加します。</p><p>なお、ライセンスの種類によって、ストレージ量が付与されるかどうか、どの程度のサイズが付与されるかが異なり、具体的な例として以下のような違いがございます。<br><br><img src="/blog/powerplatform/Dataverse-Capacity/add%20capacity.png"></p><p>また、購入いただいたライセンスに応じて付与される追加容量とは別に、ストレージ量の追加を目的として購入いただくアドオンがございます。<br><br>参考情報 : <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/add-storage#purchase-dataverse-capacity-add-on">テナントに Microsoft Dataverse 容量を追加</a></p><p>このアドオンは「データベース」「ファイル」「ログ」とストレージの種類ごとに購入いただくことが可能であり、いずれも 1 GB 単位で購入いただくことが可能です。<br><br>このため、お客様のテナントでストレージ量の不足が発生した場合については、ライセンスを追加でご契約いただくか、アドオンをご契約いただくことで、付与されるストレージ量を増加頂くことが可能です。</p><p>上記の動作について、具体的なシナリオ例についても合わせてご紹介させて頂きます。</p><h3 id="参考シナリオ-1"><a href="#参考シナリオ-1" class="headerlink" title="参考シナリオ"></a>参考シナリオ<br></h3><blockquote><p>購入ライセンス<br><br>・Power Apps Premium x 10<br><br>・Power Apps Per App x 20<br><br>・Copilot Studio x 5<br><br>・データベース キャパシティ アドオン (1 GB) x 10<br></p></blockquote><p>上記のシナリオの場合、実際に適用される「追加の容量」は、データベース、ファイル、ログごとに以下の通りとなります。<br></p><p>データベースの場合、「2.5 GB + 10 GB + 0 GB + 10 GB」で 22.5 GB<br><br><img src="/blog/powerplatform/Dataverse-Capacity/database.png"></p><p>ファイルの場合、「20 GB + 8 GB + 0 GB」で 28 GB<br><br><img src="/blog/powerplatform/Dataverse-Capacity/file.png"></p><p>ログの場合、「0 GB + 0 GB + 0 GB」で 0 GB<br><br><img src="/blog/powerplatform/Dataverse-Capacity/log.png"></p><p><a id='anchor-finish'></a></p><h2 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h2><p>本記事にてご説明させて頂きましたように Dataverse のキャパシティについては、ご契約いただいておりますライセンスの種類や数によって、利用可能なストレージ量が異なります。</p><p>実際にお客様のテナントにおいて、どの程度の容量が割り当てられているかという点については、Power Platforom 管理センターから確認頂くことが可能です。<br><br><br>参考情報 : <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/view-self-service-capacity">セルフサービス ストレージ容量の表示</a></p><!-- ![alt text](image.png) --><p>このため、お手元での計算と実際に割り当てられている容量が一致しない場合など、ご不明な点や、もし具体的にお困りの点などがございましたら、弊社サポート一同にてお待ち申し上げておりますので、ぜひお気軽にお問合せください。 </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの吉永です。  &lt;/p&gt;
&lt;p&gt;本記事では Dataverse ストレージにおけるライセンスごとに付与される容量の考え方についてご紹介させて頂きます。&lt;br&gt;&lt;br&gt;なお、Dataverse ストレージの基本的な考え方</summary>
      
    
    
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/categories/Dataverse/"/>
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/tags/Dataverse/"/>
    
    <category term="Dataverse ストレージ" scheme="https://jpdynamicscrm.github.io/blog/tags/Dataverse-%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8/"/>
    
  </entry>
  
  <entry>
    <title>Copilot Studio のエージェントを Teams に公開する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/copilotstudio/copilot-studio-teams/"/>
    <id>https://jpdynamicscrm.github.io/blog/copilotstudio/copilot-studio-teams/</id>
    <published>2025-04-22T07:00:00.000Z</published>
    <updated>2026-02-20T00:55:28.915Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの竹内です。<br>本記事では Copilot Studio (旧称 Power Virtual Agents) で作成したエージェントを Microsoft Teams (以降 Teams) に公開する方法についてご案内致します。</p><span id="more"></span><ul><li><a href="#%E7%9B%AE%E6%AC%A1">目次</a></li><li><a href="#1-%E6%A6%82%E8%A6%81">1. 概要</a></li><li><a href="#2-web-%E7%89%88-copilot-studio-%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92-teams-%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2. Web 版 Copilot Studio で作成したエージェントを Teams で利用する</a><ul><li><a href="#2-1-%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B">2-1. エージェントを公開する</a></li><li><a href="#2-2-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B">2-2. 他のユーザーと共有する</a></li><li><a href="#2-3-teams-%E3%81%A8-microsoft-365-copilot-%E3%83%81%E3%83%A3%E3%83%8D%E3%83%AB%E3%81%AB%E6%8E%A5%E7%B6%9A%E3%81%99%E3%82%8B">2-3. Teams と Microsoft 365 Copilot チャネルに接続する</a></li><li><a href="#2-4-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%8C-teams-%E3%81%A7%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2-4. 他のユーザーが Teams でエージェントを利用する</a><ul><li><a href="#2-4-1-%E3%83%AA%E3%83%B3%E3%82%AF%E3%81%AE%E5%85%B1%E6%9C%89">2-4-1. リンクの共有</a></li><li><a href="#2-4-2-teams-%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B9%E3%83%88%E3%82%A2%E3%81%AB%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B">2-4-2. Teams アプリストアに公開する</a></li><li><a href="#2-4-3-zip-%E3%81%A8%E3%81%97%E3%81%A6%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89">2-4-3. zip としてダウンロード・アップロード</a></li></ul></li><li><a href="#2-5-teams-%E3%83%81%E3%83%BC%E3%83%A0%E3%81%AB%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B">2-5. Teams チームにエージェントをインストールする</a></li></ul></li><li><a href="#3-teams-%E7%89%88-copilot-studio-%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92-teams-%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">3. Teams 版 Copilot Studio で作成したエージェントを Teams で利用する</a><ul><li><a href="#3-1-%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B">3-1. エージェントを公開する</a></li><li><a href="#3-2-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B">3-2. 他のユーザーと共有する</a></li><li><a href="#3-3-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%8C-teams-%E3%81%A7%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">3-3. 他のユーザーが Teams でエージェントを利用する</a></li></ul></li><li><a href="#%E8%A3%9C%E8%B6%B3">補足</a></li></ul><p><a id='1-概要'></a></p><h1 id="1-概要"><a href="#1-概要" class="headerlink" title="1. 概要"></a>1. 概要</h1><p>今回はよくあるお問い合わせとして、Copilot Studio で作成したエージェントを Teams に公開する方法についてご案内いたします。<br>この方法では Copilot Studio の設定だけでなく、Teams 管理センターなどの設定も必要となります。<br>そのため、一部 Teams 管理センターにアクセスできる権限がある管理者にてご実行いただく必要がある操作もございますので、ご留意ください。<br>※本稿では Microsoft 365 Copilot への公開方法・ご利用方法については扱わず、 Teams でのご利用方法についてご案内いたします。  </p><div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Teams 管理者様がご確認ください&gt;</p><p>Teams 管理センターでアクセス許可ポリシーを設定している場合、事前にカスタムアプリのアクセスを許可するようポリシーを設定する必要がございます。</p><p>本記事執筆時点で、アクセス許可ポリシーからアプリ中心の管理への移行が推奨されておりますので、本記事では詳細は割愛します。</p><p>アクセス許可ポリシーの設定方法等については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoftteams/teams-app-permission-policies">Microsoft Teams のアプリのアクセス許可ポリシーを管理する - Microsoft Teams | Microsoft Learn</a>  </p></div><p><a id='2-web-版-copilot-studio-で作成したエージェントを-teams-で利用する'></a></p><h1 id="2-Web-版-Copilot-Studio-で作成したエージェントを-Teams-で利用する"><a href="#2-Web-版-Copilot-Studio-で作成したエージェントを-Teams-で利用する" class="headerlink" title="2. Web 版 Copilot Studio で作成したエージェントを Teams で利用する"></a>2. Web 版 Copilot Studio で作成したエージェントを Teams で利用する</h1><p><img src="/blog/copilotstudio/copilot-studio-teams/web_copilot_studio_overview.png">  </p><p>※Dataverse for Teams 環境のボットを Web 版で作成することはサポートされていません。  </p><p><a id='2-1-エージェントを公開する'></a></p><h2 id="2-1-エージェントを公開する"><a href="#2-1-エージェントを公開する" class="headerlink" title="2-1. エージェントを公開する"></a>2-1. エージェントを公開する</h2><p>  エージェントを作成、編集した場合、そのエージェントを他の人が使えるようにするため、まずは公開する必要があります。<br>  作成、編集したエージェントを開き、画面右上の「公開」ボタンよりエージェントを公開してください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/publish.png">  </p><p>  下記のようなロード画面が表示され、しばらくすると公開が完了します。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/publishing.png">  </p><p><a id='2-2-他のユーザーと共有する'></a></p><h2 id="2-2-他のユーザーと共有する"><a href="#2-2-他のユーザーと共有する" class="headerlink" title="2-2. 他のユーザーと共有する"></a>2-2. 他のユーザーと共有する</h2><p>  作成したエージェントを、他のユーザーが利用できるようにします。<br>  他のユーザーとエージェントを共有するには 2 つの方法がございます。  </p><ol><li>セキュリティグループ、組織に利用者として共有する（エージェントと会話するユーザーとして）（<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=web#share-an-agent-for-chat">設定方法はこちら</a>）<div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Power Platform 管理者様がご確認ください&gt;</p><p>利用者としてエージェントを共有する場合、利用者のユーザーは Power Platform 環境のメンバーである必要はありません。</p><p>また、セキュリティロールを割り当てる必要もありません。</p><p>ただし、エージェントを通して環境内のデータやその他データソースへアクセスする場合には、別途データソースへのアクセス権限をユーザーに割り当てる必要があります。</p><p>一方、エージェントにナレッジとして直接追加されたファイルへアクセスする際には、アクセス権限やセキュリティロールを割り当てる必要はありません。  </p></div></li><li>ユーザーに共同編集者として共有する（エージェントと会話、およびエージェントを編集、管理するユーザーとして）（<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=web#share-an-agent-for-collaborative-authoring">設定方法はこちら</a>）  <div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Power Platform 管理者様がご確認ください&gt;</p><p>共同編集者としてエージェントを共有する場合、共有先のユーザーは環境のメンバーであり、環境作成者以上のセキュリティロールを持っている必要があります。</p><p>詳細については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=web#insufficient-environment-permissions">他のユーザーとエージェントを共有する - Microsoft Copilot Studio | Microsoft Learn</a></p></div></li></ol><p><a id='2-3-teams-チャネルに接続する'></a></p><h2 id="2-3-Teams-と-Microsoft-365-Copilot-チャネルに接続する"><a href="#2-3-Teams-と-Microsoft-365-Copilot-チャネルに接続する" class="headerlink" title="2-3. Teams と Microsoft 365 Copilot チャネルに接続する"></a>2-3. Teams と Microsoft 365 Copilot チャネルに接続する</h2><p>  次に、公開したエージェントを Teams で使えるようにするため、Teams と Microsoft 365 Copilot チャネルと接続します。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>&lt;Teams管理者様がご確認ください&gt;</p><p>Teams でエージェントを利用するためには、Teams 管理センターからカスタムアプリの使用を許可する必要があります。</p><p>具体的な設定方法は下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoftteams/manage-power-platform-apps">Microsoft Teams 管理センターで Microsoft Power Platform アプリを管理する - Microsoft Teams | Microsoft Learn</a>  </p></div><div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Power Platform 管理者様がご確認ください&gt;</p><p>Power Platform 管理センターより Teams チャネルへの接続を許可するよう DLP を設定しておく必要があります。</p><p>下記の「Microsoft Teams + M365 Channel in Copilot Studio」のコネクタを許可してください。</p><p><img src="/blog/copilotstudio/copilot-studio-teams/DLP_teams_m365_channel.png"></p><p>なお、Copilot Studio に関する DLP の詳細については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-data-loss-prevention#copilot-studio-connectors">エージェントのデータ損失防止ポリシーを構成する - Microsoft Copilot Studio | Microsoft Learn</a>  </p></div><p>  該当のエージェントを開き、画面上部の「チャネル」タブより「Microsoft Teams と Microsoft 365 Copilot」をご選択ください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/select_channel.png">  </p><p>  チャネルが追加されると下記の画面が表示されます。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_preview.png">  </p><p>  「詳細の編集」より Teams に公開する際のエージェントの外観等を編集することが可能です。<br>  また、エージェントを Teams チームに追加することの許可などもここから可能です。<br>  エージェントを Teams チームに追加する詳細については、<a href="#2-5-teams-%E3%83%81%E3%83%BC%E3%83%A0%E3%81%AB%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B">2-5 項</a>で後述します。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_edit_detail.png">    </p><p>  「Teams で エージェント を表示する」を選択すると、Teams が開き、下記の画面が表示されます。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_add.png">    </p><p>  「追加」を選択することで、Teams でエージェントを利用することが可能になります。<br>  ここまでの操作で、編集権限を持つユーザーだけが Teams で該当エージェントを使える状態となります。</p><div class="alert is-warning"><p class="alert-title">警告</p><p>Teams 管理センターの設定が適切に行われていない場合、下画像のようなエラーが表示されることがあります。</p><p><img src="/blog/copilotstudio/copilot-studio-teams/error_not_found.png"></p><p>&lt;Teams管理者様がご確認ください&gt;</p><p>Teams 管理センターの設定をご確認ください。</p><p>具体的な設定方法は下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoftteams/manage-power-platform-apps">Microsoft Teams 管理センターで Microsoft Power Platform アプリを管理する - Microsoft Teams | Microsoft Learn</a>  </p></div><p><a id='2-4-他のユーザーが-teams-でエージェントを利用する'></a></p><h2 id="2-4-他のユーザーが-Teams-でエージェントを利用する"><a href="#2-4-他のユーザーが-Teams-でエージェントを利用する" class="headerlink" title="2-4. 他のユーザーが Teams でエージェントを利用する"></a>2-4. 他のユーザーが Teams でエージェントを利用する</h2><p>  他のユーザーが Teams でこのエージェントと会話したり、エージェントにアクセスしたりできるようにするには、対象エージェントを他のユーザーが Teams で追加登録できるようにする作業が必要となります。<br>  その追加登録を可能にするための作業として、主に 3 つの方法があります。  </p><ol><li>リンクの共有</li><li>Teams アプリストアに公開する</li><li>zip としてダウンロード・アップロード</li></ol><p>  Copilot Studio 「チャネル」タブより「Microsoft Teams と Microsoft 365 Copilot」を選択すると、下記の画面が表示されます。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_preview.png">  </p><p>  他のユーザーがこのエージェントを利用できるようにするには、「可用性オプション」をご選択ください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_availability.png">  </p><p>  以降、3 つの方法それぞれの手順等について説明します。  </p><p><a id='2-4-1-リンクの共有'></a></p><h3 id="2-4-1-リンクの共有"><a href="#2-4-1-リンクの共有" class="headerlink" title="2-4-1. リンクの共有"></a>2-4-1. リンクの共有</h3><p>  まず、リンクの共有によって共有する方法です。<br>  この方法は事前に共有したいユーザーを入れたセキュリティグループに、エージェント自体を共有しておく必要があります。<br>  共有の方法については <a href="#2-2-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B">2-2 項</a> をご参照ください。  </p><p>  下記の画面で「リンクのコピー」を選択します。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/share_link.png">  </p><p>  すると、クリップボートに Teams でエージェントを利用するための URL がコピーされます。<br>  エージェントにアクセス権がある他ユーザーがその URL を入力すると、下記画面が表示されます。<br>  「追加」を選択することで、Teams でエージェントを利用することが可能となります。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_add.png">  </p><p>  この方法の詳細については下記の公開情報も合わせてご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#share-a-link-so-others-can-install-a-copilot">Teams と Microsoft 365 Copilot 向けのエージェントを接続し、構成する - Microsoft Copilot Studio | Microsoft Learn</a>  </p><div class="alert is-warning"><p class="alert-title">警告</p><p>エージェントが共有されていないユーザーが、リンクにアクセスした場合、下画像のエラーが表示されます。</p><p><img src="/blog/copilotstudio/copilot-studio-teams/error_not_found.png"></p><p><a href="#2-2-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B">2-2 項</a> をご参照のうえ、適切にエージェントが共有されいているかご確認ください。  </p></div><p><a id='2-4-2-teams-アプリストアに公開する'></a></p><h3 id="2-4-2-Teams-アプリストアに公開する"><a href="#2-4-2-Teams-アプリストアに公開する" class="headerlink" title="2-4-2. Teams アプリストアに公開する"></a>2-4-2. Teams アプリストアに公開する</h3><p>  次に、Teams アプリストアに公開する方法です。<br>  ※Teams チャネルに接続して公開する場合、Microsoft 認証 (Entra ID 認証) を利用していないと Teams アプリストアに表示できません。  </p><p>  Teams アプリストアに公開するには下記の二つの公開範囲別の方法があります。<br>  ご要件の公開範囲に応じた設定を行ってください。  </p><ol><li>共有ユーザーに表示する（<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#show-to-shared-users">設定方法はこちら</a>）</li><li>組織に表示する（<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#show-to-the-organization">設定方法はこちら</a>）</li></ol><p>  なお、この手順全体の詳細については下記の公開情報をご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#show-an-agent-in-the-teams-app-store">Teams と Microsoft 365 Copilot 向けのエージェントを接続し、構成する - Microsoft Copilot Studio | Microsoft Learn</a>  </p><p>  <img src="/blog/copilotstudio/copilot-studio-teams/show_in_teams_app_store.png">  </p><p><a id='2-4-3-zip-としてダウンロードアップロード'></a></p><h3 id="2-4-3-zip-としてダウンロード・アップロード"><a href="#2-4-3-zip-としてダウンロード・アップロード" class="headerlink" title="2-4-3. zip としてダウンロード・アップロード"></a>2-4-3. zip としてダウンロード・アップロード</h3><p>  この方法は .zip ファイルとしてエージェントをダウンロードし、直接マニフェストファイルを編集したり、他ユーザーと共有してアップロードする方法となります。</p><p>  ダウンロードするには、下記の画面で「.zip のダウンロード」を選択します。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/download_upload_zip.png">  </p><p>  ダウンロードしたファイルを Teams にアップロードして利用する方法については下記の公開情報をご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoftteams/platform/concepts/deploy-and-publish/apps-upload">カスタム アプリをアップロードする - Teams | Microsoft Learn</a></p><p>  なお、この方法の詳細については下記の公開情報も合わせてご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#download-the-teams-app-manifest-for-an-agent-advanced">Teams と Microsoft 365 Copilot 向けのエージェントを接続し、構成する - Microsoft Copilot Studio | Microsoft Learn</a>  </p><p><a id='2-5-teams-チームにエージェントをインストールする'></a></p><h2 id="2-5-Teams-チームにエージェントをインストールする"><a href="#2-5-Teams-チームにエージェントをインストールする" class="headerlink" title="2-5. Teams チームにエージェントをインストールする"></a>2-5. Teams チームにエージェントをインストールする</h2><p>  Teams 内のチームにエージェントをインストールし、チームの他のメンバーがエージェントを利用できるように設定することができます。  </p><p>  Copilot Studio 「チャネル」タブより「Microsoft Teams と Microsoft 365 Copilot」を選択すると、下記の画面が表示されますので、「詳細の編集」をご選択ください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/edit_detail.png">  </p><p>  「ユーザーはこの エージェント をチームに追加できます」のチェックボックスを埋めてください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/add_to_team.png">  </p><p>  上記の設定を行っている状態で、リンクの共有、または Teams アプリストアに公開を経由し、下記の「追加」ボタンを選択してください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_add.png">   </p><p>  すると、下記のように、Teams で開くか、特定のチームを選択してエージェントをインストールするか、選択が可能となります。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/select_install_team.png">  </p><p>  チームにエージェントをインストールする場合、インストール先のチームを選択し、インストールしてください。</p><p>  なお、この方法の詳細については下記の公開情報も合わせてご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#allow-users-to-add-an-agent-to-a-team-in-teams">Teams と Microsoft 365 Copilot 向けのエージェントを接続し、構成する - Microsoft Copilot Studio | Microsoft Learn</a></p><p><a id='3-teams-版-copilot-studio-で作成したエージェントを-teams-で利用する'></a></p><h1 id="3-Teams-版-Copilot-Studio-で作成したエージェントを-Teams-で利用する"><a href="#3-Teams-版-Copilot-Studio-で作成したエージェントを-Teams-で利用する" class="headerlink" title="3. Teams 版 Copilot Studio で作成したエージェントを Teams で利用する"></a>3. Teams 版 Copilot Studio で作成したエージェントを Teams で利用する</h1><p><img src="/blog/copilotstudio/copilot-studio-teams/teams_copilot_studio_overview.png">  </p><div class="alert is-info"><p class="alert-title">Note</p><p>Dataverse for Teams 環境にCopilotを作成します。</p><p><a href="https://jpdynamicscrm.github.io/blog/powerplatform/Manage-Dataverse-for-Teams/">Dataverse for Teams 環境の管理方法 | Japan Dynamics CRM &amp; Power Platform Support Blog</a></p><p>※作成されるのはクラシックボットで、Web版で作成されるボットと機能が異なります。  </p></div><p><a id='3-1-エージェントを公開する'></a></p><h2 id="3-1-エージェントを公開する"><a href="#3-1-エージェントを公開する" class="headerlink" title="3-1. エージェントを公開する"></a>3-1. エージェントを公開する</h2><p>  エージェントを作成、編集した場合、そのエージェントを他の人が使えるようにするため、まずは公開する必要があります。<br>  作成、編集したエージェントを開き、「公開」メニューより「公開」ボタンを選択し、エージェントを公開してください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_publish.png">  </p><p><a id='3-2-他のユーザーと共有する'></a></p><h2 id="3-2-他のユーザーと共有する"><a href="#3-2-他のユーザーと共有する" class="headerlink" title="3-2. 他のユーザーと共有する"></a>3-2. 他のユーザーと共有する</h2><p>  作成したエージェントを、他のユーザーが利用できるようにします。<br>  Web 版と同様に、他のユーザーとエージェントを共有するには 2 つの方法がございます。  </p><ol><li>セキュリティグループに利用者として共有する（エージェントと会話するユーザーとして）</li><li>ユーザーに共同編集者として共有する（エージェントと会話、およびエージェントを編集、管理するユーザーとして）</li></ol><p>  手順の詳細等については下記の公開情報をご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=teams">他のユーザーとエージェントを共有する - Microsoft Copilot Studio | Microsoft Learn</a>  </p><div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Power Platform 管理者様がご確認ください&gt;</p><p>利用者としてエージェントを共有する場合、利用者のユーザーは Power Platform 環境のメンバーである必要はありません。</p><p>また、セキュリティロールを割り当てる必要もありません。</p><p>ただし、エージェントのナレッジソースを通して環境内のデータやその他データソースへアクセスする場合には、別途データソースへのアクセス権限をユーザーに割り当てる必要があります。</p><p>一方、エージェントにナレッジとして直接追加されたファイルへアクセスする際には、セキュリティロールを割り当てる必要はありません。</p></div><p><a id='3-3-他のユーザーが-teams-でエージェントを利用する'></a></p><h2 id="3-3-他のユーザーが-Teams-でエージェントを利用する"><a href="#3-3-他のユーザーが-Teams-でエージェントを利用する" class="headerlink" title="3-3. 他のユーザーが Teams でエージェントを利用する"></a>3-3. 他のユーザーが Teams でエージェントを利用する</h2><p>  Web 版 Copilot Studio でエージェントを公開した直後や、下記の画面で「このエージェントの使用を他のユーザーに許可する」を選択すると、次の画面が表示されます。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_allow_setting.png">  </p><p>  <a href="#2-4-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%8C-teams-%E3%81%A7%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2-4 項</a>で説明した画面と同様の画面となります。<br>  それ以降の公開範囲に応じて、Web 版と同様の設定を行ってください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_menu.png">  </p><hr><p><a id='補足'></a></p><h1 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h1><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。バージョンアップによって UI の遷移などが若干異なる場合があります。その場合は画面の指示に従って進めてください。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの竹内です。&lt;br&gt;本記事では Copilot Studio (旧称 Power Virtual Agents) で作成したエージェントを Microsoft Teams (以降 Teams) に公開する方法についてご案内致します。&lt;/p&gt;</summary>
    
    
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/categories/Microsoft-Copilot-Studio/"/>
    
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/tags/Microsoft-Copilot-Studio/"/>
    
    <category term="Microsoft Teams 連携" scheme="https://jpdynamicscrm.github.io/blog/tags/Microsoft-Teams-%E9%80%A3%E6%90%BA/"/>
    
  </entry>
  
  <entry>
    <title>サポート インスタンスの提供</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/Provide-Support-Instance/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/Provide-Support-Instance/</id>
    <published>2025-03-28T08:30:00.000Z</published>
    <updated>2026-02-20T00:55:29.183Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの鎌田です。</p><p>本記事では当社サポートへお問い合わせいただいたお客様に向けてご案内しておりますサポート インスタンスについて紹介します。</p><h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><p>サポート インスタンスは、当社エンジニアがお客様の問題を再現させて調査することを目的とした環境です。<br><br>サポート インスタンスへお客様の事象が発生している環境をコピーすることで、当社で事象の再現確認と調査を一貫して行うことが可能となり、早期解決が見込めます。<br><br>当社エンジニアがサポート インスタンスを利用した調査が有効であると判断した場合、サポート インスタンスの作成について可否を伺います。了承いただける場合は、以下に記載のご対応をお願いいたします。</p><div class="alert is-important"><p class="alert-title">重要</p><p>お客様のテナントにサポート インスタンス (新しい環境) が作成されますが、お客様のテナントのストレージ容量には影響ございません。</p></div><hr><ol><li><a href="#criteria">サポート インスタンス作成条件の確認</a></li><li><a href="#information">情報の提供</a></li><li><a href="#create-instance">サポート インスタンスの作成</a>（当社の作業）</li></ol><hr><p><a id='criteria'></a></p><h2 id="1-サポート-インスタンス作成条件の確認"><a href="#1-サポート-インスタンス作成条件の確認" class="headerlink" title="1. サポート インスタンス作成条件の確認"></a>1. サポート インスタンス作成条件の確認</h2><p>サポート インスタンスを作成するために、次の条件を満たす必要がございます。</p><ul><li>お問い合わせ起票者が、事象発生環境にて、システム管理者のセキュリティ ロールを持っていること</li><li>お問い合わせにて、サポート インスタンス作成の同意レベルが、次のいずれかに設定されていること<ul><li>診断情報へのアクセスで <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/copy-environment#copy-over-customizations-and-schemas-only">最小限のコピー</a> を許可する</li><li>診断情報へのアクセスで <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/copy-environment#copy-over-everything">完全なコピー</a> を許可する</li></ul></li></ul><p>同意レベルが異なる場合 <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/support-environment#how-do-i-grant-or-revoke-consent-after-i-create-a-support-request">サポート リクエストを作成した後、同意を付与または取り消すにはどうすればよいですか?</a> を参考に、同意レベルの設定をお願いいたします。<br><img src="/blog/powerplatform/Provide-Support-Instance/consent.png"></p><div class="alert is-info"><p class="alert-title">Note</p><p>上記の同意レベルが表示されない場合は、当社にて同意レベルの変更を代理で実施いたします。</p><p></p><p>その場合、作業の同意として以下の項目について記載の上、メールにてご返信ください。</p><p></p><p>作業完了まで 1、2 営業日お時間いただく場合がございますので予めご了承ください。</p><p></p><p>—</p><p></p><p>SR No.: お問い合わせ番号 (例: 2500000000001234)</p><p></p><p>OrgURL: 事象が発生している環境 URL (例: <a href="https://xxx.crm7.dynamics.com/">https://xxx.crm7.dynamics.com</a>)</p><p></p><p>Consent: 変更する同意レベル Full or Minimal (例: Full)</p><p></p></div><p><a id='information'></a></p><h2 id="2-情報の提供"><a href="#2-情報の提供" class="headerlink" title="2. 情報の提供"></a>2. 情報の提供</h2><p>ステップ 1 完了後、サポート エンジニアへ <strong>事象発生環境 URL (*.crm*.dynamics.com)</strong> をご提供ください。</p><p><a id='create-instance'></a></p><h2 id="3-サポート-インスタンスの作成（当社の作業）"><a href="#3-サポート-インスタンスの作成（当社の作業）" class="headerlink" title="3. サポート インスタンスの作成（当社の作業）"></a>3. サポート インスタンスの作成（当社の作業）</h2><p>ステップ 2 の情報をもとに、当社にてサポート インスタンスを作成し、作成したサポート インスタンスへのコピーを当社にて実施いたします。作業完了まで 1、2 営業日お時間をいただく場合がございます。</p><p>また、当社システムの都合により、お客様側でのコピーをご依頼させていただく場合がございます。その際はサポート インスタンスの環境名をお伝えさせていただきますので、下記の手順で事象発生中の環境のサポート インスタンスへのコピーをお願いいたします。</p><ol><li><a href="https://admin.powerplatform.microsoft.com/">Power Platform 管理センター</a> へアクセス</li><li>環境一覧より、事象が発生中の環境を選択して開く</li><li>上部リボンの [コピー] をクリック<br><img src="/blog/powerplatform/Provide-Support-Instance/copy_button.png"></li><li>下図のように、[上書きコピー] と [上書きするターゲット環境を選択] を設定してコピーを実施 (グローバル管理者、Power Platform 管理者等が付与されておらずサポート インスタンスが表示されない場合は、下記の対処策をご確認下さい)<br><img src="/blog/powerplatform/Provide-Support-Instance/copy_support_instance.png"></li><li>コピーが完了したら担当エンジニアまで完了の旨をご連絡ください</li></ol><div class="alert is-info"><p class="alert-title">Note</p><p>ターゲット環境の検索は Ctrl + F が便利です。</p><p>監査ログをコピーすると、環境のコピーにかかる時間が大幅に長くなる可能性があり、既定では実行されません。当社エンジニアから監査ログのコピーを依頼された場合のみ [監査ログ] の箇所を「はい」としてください。</p></div><div class="alert is-important"><p class="alert-title">重要</p><p>コピーを実施するユーザーにグローバル管理者、Power Platform 管理者等が付与されていない場合、サポート インスタンスを検索してもターゲット環境として表示されません。</p><p>当社側でコピーを実施するユーザーに管理者ロールを付与することで環境が表示されるようになります。</p><p></p><p>これを実施するため、まずエンジニアから共有された環境 URL に一度アクセスし、環境を開けない旨が表示されることを確認してください。</p><p>この操作により、当該ユーザーがサポート インスタンスにプロビジョニングされます。</p><p></p><p>ここまで操作が完了したら、担当エンジニアへ当該ユーザーの UPN をお伝えください。管理者ロールが付与されたという連絡を受けたら、サポート インスタンスを表示できるようになっているため、再度コピー操作の実施をお願いいたします。</p></div><h2 id="参考情報"><a href="#参考情報" class="headerlink" title="参考情報"></a>参考情報</h2><table><thead><tr><th>リンク</th><th>内容</th></tr></thead><tbody><tr><td><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/support-environment#what-are-support-environments">サポート環境とは</a></td><td>サポート インスタンス全般の解説をしております。</td></tr><tr><td><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/copy-environment">環境のコピー</a></td><td>完全コピー (すべて) や最小限のコピー (カスタマイズとスキーマのみ) について解説をしております。</td></tr><tr><td><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/copy-environment#copying-audit-logs">監査ログのコピー</a></td><td>環境コピー時に監査ログをコピーする手順について解説をしております。</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの鎌田です。&lt;/p&gt;
&lt;p&gt;本記事では当社サポートへお問い合わせいただいたお客様に向けてご案内しておりますサポート インスタンスについて紹介します。&lt;/p&gt;
&lt;h2 id=&quot;概要&quot;&gt;&lt;a href=&quot;#概要&quot; clas</summary>
      
    
    
    
    <category term="サポートサービスのご利用について" scheme="https://jpdynamicscrm.github.io/blog/categories/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E3%81%94%E5%88%A9%E7%94%A8%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/"/>
    
    <category term="Dynamics 365" scheme="https://jpdynamicscrm.github.io/blog/categories/Dynamics-365/"/>
    
    
    <category term="お問い合わせ全般" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%81%8A%E5%95%8F%E3%81%84%E5%90%88%E3%82%8F%E3%81%9B%E5%85%A8%E8%88%AC/"/>
    
    <category term="Environment" scheme="https://jpdynamicscrm.github.io/blog/tags/Environment/"/>
    
    <category term="サポート" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88/"/>
    
  </entry>
  
  <entry>
    <title>Power Apps のキャンバスアプリ一覧を管理者が取得する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/canvasapp/list-canvas-app/"/>
    <id>https://jpdynamicscrm.github.io/blog/canvasapp/list-canvas-app/</id>
    <published>2025-03-11T03:00:00.000Z</published>
    <updated>2026-02-20T00:55:28.883Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの大友です。<br>本記事では、Power Apps のキャンバスアプリの一覧を取得する方法を詳しくご案内します。</p><span id="more"></span><ul><li><a href="#overview">1. 概要</a></li><li><a href="#how_to_list_canvas_app">2. キャンバスアプリの一覧を取得する方法</a><ul><li><a href="#with_analytics_feature">2-1. テナントレベルの分析を利用する</a><ul><li><a href="#with_analytics_ui">2-1‐1. 分析レポート画面を利用する</a></li><li><a href="#with_analytics_export">2-1-2. 分析データのエクスポート機能を利用する</a></li></ul></li><li><a href="#with_powershell">2-2. PowerShell を利用する</a></li><li><a href="#with_connector">2-3. Power Apps for Admins コネクタを利用する</a></li></ul></li><li><a href="#%E3%81%BE%E3%81%A8%E3%82%81">まとめ</a></li></ul><p><a id='overview'></a></p><h1 id="1-概要"><a href="#1-概要" class="headerlink" title="1. 概要"></a>1. 概要</h1><p>Power Apps をご利用頂いているお客様より、テナント内で作成されたすべてのキャンバスアプリを管理者にて確認したいというお問い合わせを多く頂いております。<br>本記事では、テナント全体のキャンバスアプリを一覧化するための具体的な方法を解説します。(※ <a href="https://learn.microsoft.com/ja-jp/power-platform/guidance/coe/starter-kit">Microsoft Power Platform CoE キット</a> は除いております。)  </p><p>なお、本記事のアクションやコマンドは管理者 (グローバル管理者、Power Platform 管理者) アカウントを用いて実行する必要がございますので、ご注意ください。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>本記事で紹介しているサンプルコードをご利用いただく際には、本記事末尾に記載のある免責事項を先にご確認ください。    </p></div><p><a id='how_to_list_canvas_app'></a></p><h1 id="2-キャンバスアプリ一覧を取得する方法"><a href="#2-キャンバスアプリ一覧を取得する方法" class="headerlink" title="2. キャンバスアプリ一覧を取得する方法"></a>2. キャンバスアプリ一覧を取得する方法</h1><p>本記事では、キャンバスアプリの一覧を取得する具体的な方法として以下の3つを説明します。</p><ul><li><a href="#with_analytics_feature">テナントレベル分析</a></li><li><a href="#with_powershell">PowerShell スクリプト</a></li><li><a href="#with_connector">Power Apps for Admins コネクタ</a></li></ul><p><a id='with_analytics_feature'></a></p><h2 id="2-1-テナントレベルの分析を利用する"><a href="#2-1-テナントレベルの分析を利用する" class="headerlink" title="2-1. テナントレベルの分析を利用する"></a>2-1. テナントレベルの分析を利用する</h2><div class="alert is-important"><p class="alert-title">重要</p><p>この方法は事前にテナントレベルの分析を有効にする必要がございます。</p><p>有効にする方法については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/tenant-level-analytics#how-do-i-enable-tenant-level-analytics">テナント レベルでの分析 - Power Platform | Microsoft Learn</a></p></div><p><a id='with_analytics_ui'></a></p><h3 id="2-1‐1-分析レポート画面を利用する"><a href="#2-1‐1-分析レポート画面を利用する" class="headerlink" title="2-1‐1. 分析レポート画面を利用する"></a>2-1‐1. 分析レポート画面を利用する</h3><p>Power Platform 管理センターに用意されたレポートを参照する方法です。<br><a href="https://admin.powerplatform.microsoft.com/">Power Platform 管理センター</a> の [管理] &gt; [Power Apps] の画面よりご確認いただくことができます。  </p><p>この方法の詳細については、下記の公開情報をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-platform-inventory">Power Platform インベントリ (プレビュー)</a>  </p><p>テナントレベルの分析で表示される各項目の詳細等については下記の公開情報をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-analytics-reports">Power Apps のテナント レベルの分析</a>  </p><p><a id='with_analytics_export'></a></p><h3 id="2-1-2-分析データのエクスポート機能を利用する"><a href="#2-1-2-分析データのエクスポート機能を利用する" class="headerlink" title="2-1-2. 分析データのエクスポート機能を利用する"></a>2-1-2. 分析データのエクスポート機能を利用する</h3><p>Power Platform 管理センターの分析レポートの基となるデータをエクスポートし、そのデータを利用することでご利用者様の用途に合わせて利用状況を分析頂く事ができます。  </p><ol><li><a href="https://admin.powerplatform.microsoft.com/">Power Platform 管理センター</a> にサインインします。  </li><li>左側メニューの [管理] &gt; [データ エクスポート] を選択します。  </li><li>画面上部 [(+)新しいデータ エクスポート] より Azure Data Lake Storage へのエクスポートを構成いたします。<br><img src="/blog/canvasapp/list-canvas-app/data_export_apps.png"></li><li>構成した宛先の Azure Data Lake Storage へ、分析画面の基となるデータがエクスポートされます。<br><img src="/blog/canvasapp/list-canvas-app/data_export_apps2.png"></li></ol><p>データ エクスポートの詳細については下記の公開情報をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/self-service-analytics">Microsoft Power Platform セルフサービス分析</a></p><p><a id='with_powershell'></a></p><h2 id="2-2-PowerShell-を利用する"><a href="#2-2-PowerShell-を利用する" class="headerlink" title="2-2. PowerShell を利用する"></a>2-2. PowerShell を利用する</h2><p>PowerShellを使用すると、詳細なキャンバスアプリ情報をCSV形式でエクスポートし、分析に役立てることができます。</p><ol><li>PowerShell を管理者権限で開きます。</li><li>以下のコマンドを順番に実行します。</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> <span class="literal">-Name</span> Microsoft.PowerApps.Administration.PowerShell</span><br><span class="line"><span class="built_in">Add-PowerAppsAccount</span> <span class="comment"># ここで管理者アカウントでログインしてください。</span></span><br><span class="line"><span class="built_in">Get-AdminPowerApp</span> | <span class="built_in">Export-Csv</span> <span class="literal">-Path</span> <span class="string">&quot;app.csv&quot;</span> <span class="literal">-Encoding</span> UTF8</span><br></pre></td></tr></table></figure><p>実行後に生成された <code>app.csv</code> ファイルを利用し、キャンバスアプリの詳細を把握できます。<br>CSVファイルには作成者、キャンバスアプリ名、作成日などの詳細な情報が含まれています。<br><img src="/blog/canvasapp/list-canvas-app/powershell_export_csv.png">  </p><div class="alert is-info"><p class="alert-title">Note</p><p>Power Platform の PowerShell コマンド実行についての詳細は下記の情報をご確認ください。</p><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-powershell#module-installation-and-sign-in">Power Apps と Power Automate の PowerShell サポート - Power Platform | Microsoft Learn</a></p><p>また、キャンバスアプリ一覧を取得するコマンドの詳細については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.powerapps.administration.powershell/get-adminpowerapp?view=pa-ps-latest">Get-AdminPowerApp (Microsoft.PowerApps.Administration.PowerShell) | Microsoft Learn</a>  </p></div><p>各キャンバスアプリの詳細な情報の取得がご入用である場合、対象のキャンバスアプリの AppName と、そのキャンバスアプリが存在する環境の EnvironmentName を代入の上、実行してください。  </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-AdminPowerApp</span> <span class="literal">-AppName</span> *&lt;AppName&gt;* <span class="literal">-EnvironmentName</span> *&lt;EnvironmentName&gt;*</span><br></pre></td></tr></table></figure><p>下記画面のように、キャンバスアプリの詳細な情報を確認することができます。  </p><p><img src="/blog/canvasapp/list-canvas-app/powershell_apps.png">  </p><p>上記コマンドを用いて、テナント内の全キャンバスアプリを取得する際のサンプルコードを下記に記載いたします。<br>こちらのコードを実行すると、各キャンバスアプリにて利用されている接続や連携しているフローを確認頂けます。<br>ご要件に合わせてご調整頂けましたら幸いでございます。<br>※あくまでサンプルとなりますため、ご実行の前には本記事末尾の免責事項をご確認ください。  </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 出力先ファイル作成</span></span><br><span class="line"><span class="variable">$outputFile</span>=<span class="string">&quot;.\powerappsinventory.csv&quot;</span></span><br><span class="line"><span class="comment"># 結果格納用変数作成</span></span><br><span class="line"><span class="variable">$powerappsObjects</span>=<span class="selector-tag">@</span>()</span><br><span class="line"><span class="comment"># 環境一覧取得</span></span><br><span class="line"><span class="variable">$environments</span> = <span class="built_in">Get-AdminPowerAppEnvironment</span></span><br><span class="line"><span class="comment"># Power Apps 一覧作成</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$e</span> <span class="keyword">in</span> <span class="variable">$environments</span>) &#123;</span><br><span class="line">    <span class="comment"># 環境名表示</span></span><br><span class="line">    <span class="built_in">write-host</span> <span class="string">&quot;Environment:&quot;</span> <span class="variable">$e</span>.displayname</span><br><span class="line">    <span class="comment"># 環境内キャンバスアプリ一覧取得</span></span><br><span class="line">    <span class="variable">$powerapps</span> = <span class="built_in">Get-AdminPowerApp</span> <span class="literal">-EnvironmentName</span> <span class="variable">$e</span>.EnvironmentName</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$pa</span> <span class="keyword">in</span> <span class="variable">$powerapps</span>) &#123;</span><br><span class="line">        <span class="comment"># キャンバスアプリ情報表示</span></span><br><span class="line">        <span class="built_in">write-host</span> <span class="string">&quot; App Name:&quot;</span> <span class="variable">$pa</span>.DisplayName <span class="string">&quot;-&quot;</span> <span class="variable">$pa</span>.AppName</span><br><span class="line">        <span class="comment"># キャンバスアプリ詳細取得</span></span><br><span class="line">        <span class="variable">$papp</span> = <span class="built_in">Get-AdminPowerApp</span> <span class="literal">-EnvironmentName</span> <span class="variable">$e</span>.EnvironmentName <span class="literal">-AppName</span> <span class="variable">$pa</span>.AppName</span><br><span class="line">        <span class="comment"># 接続の確認</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$conRef</span> <span class="keyword">in</span> <span class="variable">$papp</span>.Internal.properties.connectionReferences) &#123;</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="variable">$con</span> <span class="keyword">in</span> <span class="variable">$conRef</span>) &#123;</span><br><span class="line">                <span class="keyword">foreach</span> (<span class="variable">$conId</span> <span class="keyword">in</span> (<span class="variable">$con</span> | <span class="built_in">Get-Member</span> <span class="literal">-MemberType</span> NoteProperty).Name) &#123;</span><br><span class="line">                    <span class="variable">$conDetails</span> = <span class="variable">$</span>(<span class="variable">$con</span>.<span class="variable">$conId</span>)</span><br><span class="line">                    <span class="variable">$apiTier</span> = <span class="variable">$conDetails</span>.apiTier</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$conDetails</span>.isCustomApiConnection) &#123;<span class="variable">$apiTier</span> = <span class="string">&quot;Premium (CustomAPI)&quot;</span>&#125;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$conDetails</span>.isOnPremiseConnection ) &#123;<span class="variable">$apiTier</span> = <span class="string">&quot;Premium (OnPrem)&quot;</span>&#125;</span><br><span class="line">                    <span class="comment"># 接続情報表示</span></span><br><span class="line">                    <span class="built_in">Write-Host</span> <span class="string">&quot; &quot;</span><span class="variable">$conDetails</span>.displayName <span class="string">&quot;(&quot;</span> <span class="variable">$apiTier</span> <span class="string">&quot;)&quot;</span></span><br><span class="line">                    <span class="variable">$paObj</span>=<span class="selector-tag">@</span>&#123;</span><br><span class="line">                        EnvironmentName = <span class="variable">$e</span>.displayname</span><br><span class="line">                        EnvironmentId = <span class="variable">$e</span>.EnvironmentName</span><br><span class="line">                        AppName = <span class="variable">$papp</span>.DisplayName</span><br><span class="line">                        AppId = <span class="variable">$papp</span>.AppName</span><br><span class="line">                        ConnectionName = <span class="variable">$conDetails</span>.displayName</span><br><span class="line">                        Tier = <span class="variable">$apiTier</span></span><br><span class="line">                        FlowId = <span class="variable">$conDetails</span>.parameterHints.workflowName.value</span><br><span class="line">                        createdDate = <span class="variable">$papp</span>.CreatedTime</span><br><span class="line">                        createdBy = <span class="variable">$papp</span>.Owner</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment"># 結果に格納</span></span><br><span class="line">                    <span class="variable">$powerappsObjects</span> += <span class="variable">$</span>(<span class="built_in">new-object</span> psobject <span class="literal">-Property</span> <span class="variable">$paObj</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># CSV 出力</span></span><br><span class="line"><span class="variable">$powerappsObjects</span> | <span class="built_in">Export-Csv</span> <span class="variable">$outputFile</span> <span class="literal">-NoTypeInformation</span> <span class="literal">-Encoding</span> UTF8</span><br></pre></td></tr></table></figure><div class="alert is-info"><p class="alert-title">Note</p><p>テナント内のキャンバスアプリ数が多い場合、処理完了までに長時間を要する可能性がございます。    </p></div><p><img src="/blog/canvasapp/list-canvas-app/powershell_apps_detail.png">  </p><p><a id='with_connector'></a></p><h2 id="2-3-Power-Apps-for-Admins-コネクタを利用する"><a href="#2-3-Power-Apps-for-Admins-コネクタを利用する" class="headerlink" title="2-3. Power Apps for Admins コネクタを利用する"></a>2-3. Power Apps for Admins コネクタを利用する</h2><p>この方法では Power Automate クラウドフローを用いて、テナント内のキャンバスアプリを一覧化いたします。</p><ol><li>Power Automate で新規クラウドフローを作成します。</li><li>任意のトリガー（例:手動）を選択します。</li><li>アクションに「Power Apps for Admins」コネクタを追加し、「アプリを管理者として取得する」アクションを選びます。</li><li>取得対象の環境 ID を入力してください。</li><li>アクション実行後、得られたアプリ情報は後続のアクションでご利用頂けます。</li></ol><p><img src="/blog/canvasapp/list-canvas-app/flow-list-apps1.png"> </p><p>テナント内の全環境を対象として実行したい場合、「管理者向け Power Platform」コネクタの「環境一覧を管理者として作成する」アクションと組み合わせてください。<br>その場合、下記のように設定してください。</p><p>「それぞれに適用する」：outputs(‘環境一覧を管理者として作成する’)?[‘body/value’]<br>「アプリを管理者として取得する」：items(‘それぞれに適用する’)?[‘name’]  </p><p><img src="/blog/canvasapp/list-canvas-app/flow-list-apps2.png"><br><img src="/blog/canvasapp/list-canvas-app/flow-list-apps3.png">  </p><p>「Power Apps for Admins」コネクタの詳細は下記の公開情報をご覧ください。<br><a href="https://learn.microsoft.com/ja-jp/connectors/powerappsforadmins/">Power Apps for Admins - Connectors | Microsoft Learn</a></p><p><a id='まとめ'></a></p><h1 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h1><p>上記三つの方法から、ご要件に応じて適切な方法をご選択いただき、ご利用ください。<br>本記事が適切な管理の一助となりましたら幸いでございます。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>===サンプルコード免責事項===</p><p>・本記事で紹介しているサンプルコードは説明のためのサンプルであり、お客様の要望を直接満たすためのご提供ではございません。</p><p>そのため、製品の実運用環境で使用されることを前提に提供されるものではありません。</p><p>・エラー処理などは含まれておりません。また、弊社にてその動作を保証するものではございません。</p><p>・サンプル コードおよびそれに関連するあらゆる情報は、”現状のまま” で</p><p>提供されるものであり、商品性や特定の目的への適合性に関する黙示の保証も含め、</p><p>明示、黙示を問わずいかなる保証も付されるものではありません。</p><p>ご使用の際には、十分にご検証いただき、ご使用くださいますようお願い申し上げます。</p><p>マイクロソフトは、お客様に対し、サンプル コードを使用および改変するための</p><p>非排他的かつ無償の権利ならびに本サンプル コードをオブジェクト コードの形式で</p><p>複製および頒布するための非排他的かつ無償の権利を許諾します。</p><p>但し、お客様は下記に同意するものとします。</p><p>(1) サンプル コードが組み込まれたお客様のソフトウェア製品のマーケティングのために</p><p>    マイクロソフトの会社名、ロゴまたは商標を用いないこと</p><p>(2) サンプル コードが組み込まれたお客様のソフトウェア製品に有効な著作権表示をすること</p><p>(3) サンプル コードの使用または頒布から生じるあらゆる損害 (弁護士費用を含む) に</p><p>    関する請求または訴訟について、マイクロソフトおよびマイクロソフトの取引業者に対し補償し、</p><p>    損害を与えないこと</p></div><hr><p>※ 本記事の内容は執筆時点の情報に基づいています。最新の情報については公式ドキュメントも合わせてご確認ください。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの大友です。&lt;br&gt;本記事では、Power Apps のキャンバスアプリの一覧を取得する方法を詳しくご案内します。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Canvas App" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/Canvas-App/"/>
    
    <category term="Power Platform Admin Center" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform-Admin-Center/"/>
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Apps/"/>
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Governance" scheme="https://jpdynamicscrm.github.io/blog/tags/Governance/"/>
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
  </entry>
  
</feed>
