<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan Dynamics CRM &amp; Power Platform Support Blog</title>
  
  <subtitle>日本マイクロソフトの Dynamics CRM &amp; Power Platform テクニカル サポート チームより、情報をお届けします！</subtitle>
  <link href="https://jpdynamicscrm.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpdynamicscrm.github.io/blog/"/>
  <updated>2025-10-23T09:21:14.525Z</updated>
  <id>https://jpdynamicscrm.github.io/blog/</id>
  
  <author>
    <name>Japan Dynamics CRM &amp; Power Platform Support Team</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ネットワークトレースの取り方と機密情報を含む場合の対処</title>
    <link href="https://jpdynamicscrm.github.io/blog/information/network-trace-har-collection-and-pii-submission-guide/"/>
    <id>https://jpdynamicscrm.github.io/blog/information/network-trace-har-collection-and-pii-submission-guide/</id>
    <published>2025-09-18T15:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.525Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、PowerPlatformサポートチームの三田です。</p><p>本記事ではネットワークトレース取得と機密情報を含む場合の共有配慮について、以下の Q1〜Q2 の質問に回答する形でご説明します。</p><ul><li><a href="#q1">Q1: ネットワークトレースって？</a></li><li><a href="#q2">Q2: 機密情報が含まれてしまうけどサポートエンジニアに共有して大丈夫？</a></li></ul><h3 id="この記事でわかること"><a href="#この記事でわかること" class="headerlink" title="この記事でわかること"></a>この記事でわかること</h3><ul><li>ネットワークトレースの概要と役割</li><li>主要ブラウザーでの具体的な取得手順</li><li>記録前の準備と再現時のポイント</li><li>安全に最小化し共有するための手順</li><li>サニタイズ（sanitized）と手動マスキングの使い分け</li><li>サポート エンジニアの機密情報取り扱いについて</li></ul><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#q1">ネットワークトレースの説明と基本的な取得手順 (Q1)</a></li><li><a href="#q2">機密情報を含む可能性と安全な共有手順 (Q2)</a></li></ul><h2 id="q1">ネットワークトレースの説明と基本的な取得手順 (Q1)</h2><p>【結論】ネットワークトレースとはブラウザーがページを表示するために送受信した通信を起きた順番で並べた記録です。<br>問題が出た操作を 1 回だけ記録し HAR ファイルとして共有すると原因調査が速く正確になります。<br>（HAR はその通信記録を 1 つにまとめたファイル形式です。）<br>古いログを消し発生直前に開始し発生直後に停止することで関係ない通信や機密情報を減らせます。</p><p>【補足】再現が複数画面遷移を含む場合は Preserve log（ログ保持）を有効にすると途中で消えにくくなります。</p><p>【手順】ネットワーク トレース (HAR) の採取手順 (Edge 例)</p><ol><li>ブラウザーで F12 キーを押し開発者ツールを開きます。</li><li>以下の画像を参考に、① Network(ネットワーク) タブ → ② 必要なら Preserve log をオン → ③ Clear(クリア) で古いログを消します。</li></ol><p><img src="/blog/information/network-trace-har-collection-and-pii-submission-guide/Networktracing_1.jpg" alt="Edge 開発者ツールで Network タブを選び Preserve log をチェックし Clear を押す例"></p><ol start="3"><li>同じタブ内で問題の操作を最小の手順で 1 回だけ再現します。</li><li>以下の画像を参考に、① 記録停止 (Stop recording network log) を押し ② Export HAR (sanitized があればそちらを優先) をクリックして保存します。<br>アイコンが隠れている場合は開発者ツール領域の幅を広げてください。</li></ol><p><img src="/blog/information/network-trace-har-collection-and-pii-submission-guide/Networktracing_2.jpg" alt="記録停止後に Export HAR アイコンを押して HAR を保存する例"></p><ol start="5"><li>必要なら Console タブでログを保存し HAR と一緒に ZIP 圧縮します。</li><li>ファイル名は <code>YYYYMMDD_issue.har</code> のように日付と短い説明を入れると区別しやすくなります。</li></ol><p>【補足】操作手順（GUI）は Microsoft Edge の例ですが Chrome でもほぼ同じです。<br>細部が異なる場合は下記の参考資料を参照してください。</p><p>【ポイント】</p><ol><li>問題直前に開始し終わったらすぐ停止する。</li><li>余計なタブや拡張機能操作を避け最小の再現だけ行う。</li><li>記録中に不要なページ遷移やリロードをしない。</li><li>停止後 Export HAR (sanitized) があればそれを使う。</li><li>Console ログが必要なら一緒に保存する。</li><li>HAR を ZIP 圧縮し分かる名前 (日付+概要) を付けて添付する。</li></ol><p>【よくある誤解】</p><ul><li>誤解: 画面を更新し続けるほど詳しい情報が増えて解析が良くなる。<br>→ 正しくは: 不要な通信が増え肝心な要求が埋もれるため最小の再現だけに留めるべきです。</li><li>誤解: HAR を取得する前に問題を何度も再現しておいた方が良い。<br>→ 正しくは: 記録開始後の 1 回の再現のみで十分です。</li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/azure-portal/capture-browser-trace">ブラウザー トレースの取得 (Azure Portal) </a></li><li><a href="https://learn.microsoft.com/ja-jp/power-bi/support/service-admin-capturing-additional-diagnostic-information-for-power-bi">Power BI サービスの追加診断情報取得 (Network ログ出力) </a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/azure-web-pubsub/howto-troubleshoot-network-trace#collect-a-network-trace">Web PubSub ネットワーク トレース収集 </a></li></ul><h2 id="q2">機密情報を含む可能性と安全な共有手順 (Q2)</h2><p>【結論】サポート エンジニアは NDA（秘密保持契約）の下でお客様の情報を守る体制になっています。<br>HAR には認証トークンや氏名やメールアドレスなどの機密情報が含まれることがあるため可能な範囲で sanitized 出力（ブラウザーが自動で一部の機密情報を除外した HAR 出力。完全ではない簡易版）や短時間記録で余計な情報を減らし負担がなければ簡易マスキングを行ってください。<br>マスキング作業が負担で難しい場合は無加工のままでも NDA に基づき適切に扱われます。</p><p>【補足】Export HAR (sanitized) は一部の機密情報を自動除外しますが完全ではありません。<br>送る前に自分で中身を開き最小化されているか確認してください。<br>マスキングを省略した場合でもサポート側で厳重に扱います。<br>マスキングが再現解析に影響しそうな場合は「トークン末尾 3 文字のみ伏字」「ユーザー名を仮名へ置換」など概要を添えてください。</p><p>【ポイント】</p><ol><li>再現直前に開始し再現直後に停止して不要通信を避ける。</li><li>sanitized 出力があればまずそれを選ぶ (なければ通常の HAR で問題ありません)。</li><li>負担にならなければ HAR をテキストエディターで開き以下の語を検索する: “Authorization” “Bearer “ “token” “Set-Cookie” “api-key” “pwd” メールアドレス形式 <code>@</code> GUID らしき 32/36 文字。</li><li>マスキングする場合は値の一部を残し末尾を <code>***</code> などで伏字 (例: <code>abc123XYZtoken</code> → <code>abc123***</code>)。</li><li>値を区別したい場合は先頭 6〜8 文字だけ残すなどルールを 1 つに統一。</li><li>添付時にマスキングした/しなかった理由を一言添える (例: 「時間の都合で未マスキング」「トークン末尾のみ伏字」)。</li></ol><p>【よくある誤解】</p><ul><li>誤解: HAR は自動で安全化されるので中身を開かず送ってよい。<br>→ 正しくは: 自動除去は限定的なので送付前セルフチェックが必要です。</li><li>誤解: 機密情報やトークンを全部削除しないと共有してはならない。<br>→ 正しくは: NDA 下で扱われるため最小化が難しい場合は無加工でも構いません。</li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/azure-portal/capture-browser-trace">ブラウザー トレースの取得 (Azure Portal) </a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/devops/user-guide/capture-browser-trace?view=azure-devops">Azure DevOps ブラウザートレース取得 (敏感情報注意) </a></li><li><a href="https://learn.microsoft.com/en-us/power-platform/admin/support-environment">Support environments and consent to access customer data (Microsoft Learn, 英語)</a></li></ul><h2 id="summary">まとめ</h2><ul><li>ネットワークトレースはブラウザー通信の記録で問題解析を助けます。</li><li>取得手順は「開発者ツール → Network → 記録 → 再現 → 停止 → HAR 保存」です。</li><li>不要操作を避け最小操作でノイズを減らします。</li><li>sanitized 出力と短時間記録と手動マスキング (可能なら) で機密情報を減らします。</li><li>マスキングが難しくても NDA の下で安全に扱われ必要に応じて同意ベースアクセス統制も機能します。</li></ul><h2 id="notice">注意事項（情報の更新可能性）</h2>本記事の内容は執筆日時点の公開情報に基づいています。仕様や UI、制限事項は将来変わる可能性があります。最新情報は公式ドキュメントをご確認ください。]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、PowerPlatformサポートチームの三田です。&lt;/p&gt;
&lt;p&gt;本記事ではネットワークトレース取得と機密情報を含む場合の共有配慮について、以下の Q1〜Q2 の質問に回答する形でご説明します。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#q1&quot;&gt;Q1: ネ</summary>
      
    
    
    
    <category term="information" scheme="https://jpdynamicscrm.github.io/blog/categories/information/"/>
    
    
    <category term="HAR" scheme="https://jpdynamicscrm.github.io/blog/tags/HAR/"/>
    
    <category term="サポート" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88/"/>
    
    <category term="ネットワークトレース" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B9/"/>
    
    <category term="機密情報" scheme="https://jpdynamicscrm.github.io/blog/tags/%E6%A9%9F%E5%AF%86%E6%83%85%E5%A0%B1/"/>
    
  </entry>
  
  <entry>
    <title>Power Pages ライセンスについて</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerpages/power-pages-licensing-guide/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerpages/power-pages-licensing-guide/</id>
    <published>2025-09-15T16:30:00.000Z</published>
    <updated>2025-10-23T09:21:14.664Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、PowerPlatformサポートチームの三田です。</p><p>本記事では Power Pages のライセンスについて以下の Q1〜Q6 の質問に回答する形で整理します。</p><ul><li><a href="#q1">Q1: Power Pages の基本的なライセンスモデル（何をどの単位で購入 / 課金するか）は？</a></li><li><a href="#q2">Q2: 認証ユーザー (Authenticated) と匿名ユーザー (Anonymous) のカウント方式の違いは？</a></li><li><a href="#q3">Q3: 月中で想定より利用が増えた（超過しそう / した）場合はどう判断・対応する？</a></li><li><a href="#q4">Q4: 認証ユーザー数の「ユニーク」判定はどのように行われる？（複数回ログイン時の扱い）</a></li><li><a href="#q5">Q5: 既に Power Apps / Dynamics 365 ライセンスを持つ社内（内部）ユーザーは別途カウント / 課金が必要か？</a></li><li><a href="#q6">Q6: 匿名ユーザー数はどのように一意判定され異なるデバイスやCookie削除時はどう扱われるか？</a></li></ul><h3 id="この記事でわかること"><a href="#この記事でわかること" class="headerlink" title="この記事でわかること"></a>この記事でわかること</h3><ul><li>現行 Power Pages の容量（Capacity）ベース課金モデルの全体像</li><li>認証 / 匿名ユーザーの「月次ユニーク」測定基準と非カウント条件</li><li>既存 Power Apps / Dynamics 365 ライセンス保有ユーザーの扱い（重複課金回避）</li><li>超過（Overage）したときの対処法</li><li>よくある誤解（旧ポータル Login/Page View モデルとの混同 など）の整理</li></ul><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#q1">Power Pages の基本ライセンスモデル (Q1)</a></li><li><a href="#q2">認証ユーザーと匿名ユーザーのカウント方式 (Q2)</a></li><li><a href="#q3">利用が超過しそうまたは超過した場合の対応 (Q3)</a></li><li><a href="#q4">認証ユーザーのユニーク判定（重複ログインの扱い） (Q4)</a></li><li><a href="#q5">内部ユーザー既存ライセンスとカウント除外 (Q5)</a></li><li><a href="#q6">匿名ユーザーの一意判定とブラウザ差異/Cookie削除の影響 (Q6)</a></li><li><a href="#summary">まとめ</a></li><li><a href="#notice">注意事項（情報の更新可能性）</a></li></ul><h2 id="q1">Power Pages の基本ライセンスモデル (Q1)</h2>【結論】Power Pages は「月次ユニークユーザー数」を軸にした Capacity（容量）ベースのライセンスモデルです。対象は (1) 認証ユーザー (Authenticated users) と (2) 匿名ユーザー (Anonymous users) の 2 系列です。サブスクリプション購入（事前割当）と Pay-as-you-go メーター（実使用後精算）が併存します。<p>【ポイント】</p><ol><li>ライセンス対象単位: 「サイト単位の月次ユニークユーザー数」</li><li>種別: 認証ユーザー (Authenticated users) と 匿名ユーザー (Anonymous users) は人数を「別々に」数える（互いに混ざらない・合算しない）</li><li>購入形態: 容量パック (100 認証 / 500 匿名 単位) のサブスクリプション、または Azure 課金の Pay-as-you-go メーター</li><li>認証/匿名いずれも「その月に 1 回以上アクセスした一意ユーザー」で 1 カウント（基本的には複数回アクセスしても追加カウントされない）</li><li>旧モデル (ログイン数 / ページビュー) とは測定概念が異なる（ログイン回数ではなくユーザー人数）</li></ol><p>【サブスクリプション 容量パック 概要（抜粋）】</p><ul><li>認証: 1 パック = 100 ユーザー / 月</li><li>匿名: 1 パック = 500 ユーザー / 月</li></ul><p>（複数 パック 積み上げでサイト想定上限を設計。内部的には環境ごとに最小割当値: 認証 25 / 匿名 200）</p><p>【よくある誤解】</p><ul><li>誤解: 「ログイン回数が課金対象である」<ul><li>→ 正しくは: 月内ユニークユーザー数。1 ユーザーが 30 回ログインしても 1 です。</li></ul></li><li>誤解: 「容量パック を買うと未使用ぶんは翌月に繰り越せる」<ul><li>→ 正しくは: 繰り越し不可（月ごとリセット）。</li></ul></li><li>誤解: 「サイト数に比例して必ず追加 Dataverse 容量が必要」<ul><li>→ 正しくは: 今の Power Pages ではサイトを作るときに Dataverse の容量を新しく買い足す必要はありません（最初からある分で始められます）。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#how-is-power-pages-licensed">Power Pages のライセンス体系 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-are-the-main-differences-between-power-pages-and-power-apps-portals-licensing">Power Pages と旧 Power Apps ポータル ライセンス比較 (FAQ)</a></li></ul><h2 id="q2">認証ユーザーと匿名ユーザーのカウント方式 (Q2)</h2>【結論】認証ユーザーは Dataverse の Contact レコード ID で一意判定し、匿名ユーザーはブラウザ Cookie に保持される匿名ユーザー ID で一意化されます。いずれも「その暦月に初めてカウントされた時点で 1」となり再度ログイン（または閲覧）しても加算されません。<p>【ポイント】</p><ol><li>認証ユーザー: ログインに成功した Contact 1 件 = 1（同月内複数回ログインは再カウント無し）</li><li>匿名ユーザー: 匿名ページを閲覧したブラウザ Cookie 単位で初回のみカウント（同月内の複数回訪問は再カウント無し）</li><li>匿名ユーザーとして数えない主なケース：「テスト用で触っているだけ」「ログインするための画面だけ見た」「機械（検索ロボット）が来た」「その日あとでログインして本人だと分かった」など。（こうした場合は匿名人数を増やさず、必要なら認証ユーザー側だけ数えます。）</li><li>同一人物が異なるブラウザ・端末・Cookie クリアを行うと別匿名ユーザーとして計上され得る</li><li>匿名→同日内ログイン移行時は「認証ユーザーのみ」計上（匿名側重複排除）</li></ol><p>【よくある誤解】</p><ul><li>誤解: 「匿名はページビュー合計」<ul><li>→ 正しくは: ユニーク匿名ユーザー（Cookie ベース）</li></ul></li><li>誤解: 「ログインページ（サインイン）閲覧も匿名ユーザーとしてカウントされる」<ul><li>→ 正しくは: ログインページは非カウント対象</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-is-an-authenticated-user-and-how-are-authenticated-users-per-websitemonth-calculated">認証ユーザーの定義と算出方法 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-is-an-anonymous-user-and-how-are-anonymous-users-per-websitemonth-calculated">匿名ユーザーの定義と算出方法 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-are-the-scenarios-in-which-a-user-isnt-counted-as-an-anonymous-user-even-though-the-user-browses-an-anonymous-page-on-the-website">匿名ユーザーにカウントされないシナリオ (FAQ)</a></li></ul><h2 id="q3">利用が超過しそうまたは超過した場合の対応 (Q3)</h2>【結論】月次集計は月初にリセットされ日次累積で増加します。想定上限に近づいたら (1) 追加 容量パック 割当、(2) 他環境からの再配分、(3) Pay-as-you-go への紐付け検討 の順に評価することを推奨します。また、超過した場合、即座にサイトが停止したり、超過分の料金を請求されることはありません。<p>【補足】データが反映されるまでに 1 日程度かかることがあります。</p><p>【ポイント】</p><ol><li>対応オプション: 追加購入・未割当容量の再割当・Pay-as-you-go 化（Azure サブスクリプション）</li><li>計画: 事前に、季節変動がある場合はピーク月を基準に容量パックの検討</li></ol><p>【よくある誤解】</p><ul><li>誤解: 「超過したら即座にサイト停止や罰金のような追加請求が起きる」<ul><li>→ 正しくは: 即時停止・即ペナルティ的課金はありませんが、継続超過は早期の容量見直しが必要です。</li></ul></li><li>誤解: 「Pay-as-you-go にするとサブスクリプション容量は不要になる」<ul><li>→ 正しくは: 併用設計可。ベース容量 + 変動部を Pay-as-you-go で吸収するハイブリッドが実務上多い。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-pages/admin/capacity-management#licensing-summary-view">容量の監視: ライセンス サマリービュー (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-pages/admin/capacity-management#capacity-management">容量管理ペイン (Docs)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#for-subscription-based-licenses-what-is-the-minimum-number-of-authenticated-and-anonymous-user-capacity-i-need-to-assign-to-an-environment">最小割り当て数 / パック (FAQ)</a></li></ul><h2 id="q4">認証ユーザーのユニーク判定（重複ログインの扱い） (Q4)</h2>【結論】同一 Contact に紐づくユーザーが暦月中に複数回ログインしても 1 カウントのみです。判定キーは Dataverse Contact レコード ID で、月初リセット後に再度初回ログインした時点で新しい月の 1 として加算されます。<p>【ポイント】</p><ol><li>判定キー: Dataverse Contact ID</li><li>同月内複数ログイン: 再カウント無し</li><li>翌月: 初回アクセス時に再び 1 としてカウント</li><li>旧“ログイン” 課金との比較: 旧 Portals Login (日次ユニーク * 日数) と違い総ログイン回数増加は費用へ直結しない</li></ol><p>【よくある誤解】</p><ul><li>誤解: 「同じ人が 1 日に何回もログインすると、その回数分追加料金がかかる」<ul><li>→ 正: その月に 1 回でもログインした“その人”は 1 人として数えます。翌月になるまで同じ人が何十回ログインしても増えません。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-is-an-authenticated-user-and-how-are-authenticated-users-per-websitemonth-calculated">認証ユーザー月次カウント方法 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-is-the-difference-between-power-apps-portals-login-capacity-and-power-pages-authenticated-per-usermonth-capacity">旧ログイン容量との違い (FAQ)</a></li></ul><h2 id="q5">内部ユーザー既存ライセンスとカウント除外 (Q5)</h2>【結論】社内の人がすでに以下のいずれかのライセンスを持っていて（同じテナントで付与済み）、会社のアカウント（Entra ID）で Power Pages サイトに入るなら、その人は「Power Pages の認証ユーザー数」には数えません。ライセンスが無い社内ユーザーや会社外の人だけが、Power Pages 認証容量を消費します。<p>対象となる既存ライセンス（どれか 1 つ持っていれば除外）:</p><ul><li>Power Apps per user（1 人で複数アプリ使えるライセンス）</li><li>Power Apps per app（指定された 1 サイト/アプリ分の利用権）</li><li>Dynamics 365 Enterprise ライセンス（該当業務アプリの利用権）</li></ul><p>【ポイント】</p><ol><li>すでに 上記既存ライセンスを保持しているユーザー → Power Pages の認証ユーザー容量を消費しない（カウント除外）</li><li>上記いずれのライセンスも持っていない社内ユーザー / 社外ユーザー（取引先・お客様など） → Power Pages の認証ユーザー容量を消費する</li></ol><p>【よくある誤解】</p><ul><li>誤解: 「社内ユーザーは全員 認証ユーザーとしてカウントされる」<ul><li>→ 正しくは: 上記の既存ライセンス保持者はカウントされません（容量を消費しません）。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-are-the-power-pages-use-rights-included-with-power-apps-and-dynamics-365-enterprise-licenses">Power Apps / Dynamics 365 に含まれる利用権 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#if-im-building-a-power-pages-website-for-my-employees-who-log-in-using-their-microsoft-entra-credentials-what-power-pages-licenses-do-i-need">社内ユーザー向けライセンス選択 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-pages/faq#are-the-guest-users-treated-as-internal-users-for-licensing">ゲスト ユーザーは内部扱いか (FAQ)</a></li></ul><h2 id="q6">匿名ユーザーの一意判定とブラウザ差異/Cookie削除の影響 (Q6)</h2>【結論】匿名ユーザーはブラウザ Cookie に保存される匿名 ID で月内ユニーク判定します。別ブラウザ・別端末・Cookie 削除で ID が変われば別ユーザーとしてカウントされます。<p>【ポイント】</p><ol><li>判定キー: 匿名 Cookie ID（ブラウザ/端末単位）</li><li>Cookie クリア / ブラウザ変更 / 端末変更: 新規ユーザーとして再カウントされ得る</li><li>同日匿名→認証ログイン: 認証側のみ残る（匿名で閲覧した後、認証ログインした場合は、認証ユーザーとしてのみカウントされる）</li><li>ログインページ / エラーページ等への訪問はカウントされない</li></ol><p>【よくある誤解】</p><ul><li>誤解: 「匿名はページビュー合計なので画像読み込み等も増加させる」<ul><li>→ 正しくは: 静的リソースのみではカウントされません。</li></ul></li><li>誤解: 「匿名で閲覧した後、ログイン認証した場合は、匿名ユーザーと認証ユーザーで 2 重計上される」<ul><li>→ 正しくは: 当日内は認証ユーザーとしてカウントされ、匿名ユーザーではカウントされません。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-is-an-anonymous-user-and-how-are-anonymous-users-per-websitemonth-calculated">匿名ユーザー月次カウント方法 (FAQ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-are-the-scenarios-in-which-a-user-isnt-counted-as-an-anonymous-user-even-though-the-user-browses-an-anonymous-page-on-the-website">匿名にカウントされないシナリオ (FAQ)</a></li></ul><h2 id="summary">まとめ</h2>- Power Pages は 認証 / 匿名 の月次ユニークユーザー Capacity モデル。旧 Portals の「Login / Page View」課金とは概念が異なります。- 認証ユニーク: Contact ID ベース。匿名ユニーク: Cookie ID ベース。どちらも月初リセット。- 超過が懸念される場合は、追加購入・再割当・Pay-as-you-go を使い分けます。- 超過してしまっても、即停止・追加請求の心配はありません。- 内部ユーザーで Power Apps per user / per app / Dynamics 365 Enterprise ライセンス保持者は条件を満たせば認証容量を消費しません。<h2 id="notice">注意事項（情報の更新可能性）</h2>本記事は執筆日時点の公開情報に基づいています。ライセンス体系・容量定義・ UI 表示・最小割当値などは将来変更される可能性があります。最新情報は必ず公式ドキュメント（Power Pages Licensing FAQ / 管理センター画面 / 最新 Licensing Guide）でご確認ください。]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、PowerPlatformサポートチームの三田です。&lt;/p&gt;
&lt;p&gt;本記事では Power Pages のライセンスについて以下の Q1〜Q6 の質問に回答する形で整理します。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#q1&quot;&gt;Q1: Power Pages</summary>
      
    
    
    
    <category term="powerplatform" scheme="https://jpdynamicscrm.github.io/blog/categories/powerplatform/"/>
    
    
    <category term="governance" scheme="https://jpdynamicscrm.github.io/blog/tags/governance/"/>
    
    <category term="powerpages" scheme="https://jpdynamicscrm.github.io/blog/tags/powerpages/"/>
    
    <category term="licensing" scheme="https://jpdynamicscrm.github.io/blog/tags/licensing/"/>
    
  </entry>
  
  <entry>
    <title>モデル駆動型アプリ削除ガイド</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerapps/model-driven-app-delete-guide/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerapps/model-driven-app-delete-guide/</id>
    <published>2025-09-15T16:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.548Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、PowerPlatformサポートチームの三田です。</p><p>本記事ではモデル駆動型アプリの削除について、以下の Q1〜Q3 の質問に回答する形でご説明します。</p><ul><li><a href="#q1">Q1: モデル駆動型アプリの削除に必要な権限は？</a></li><li><a href="#q2">Q2: モデル駆動型アプリを削除する際に注意しなければならない「依存関係」とは？</a></li><li><a href="#q3">Q3: 削除を阻止する「依存関係」がないのに削除できないときの対処法は？</a></li></ul><h3 id="この記事でわかること"><a href="#この記事でわかること" class="headerlink" title="この記事でわかること"></a>この記事でわかること</h3><ul><li>削除に必要な基本ロールと最低限の権限</li><li>どの依存関係が削除を止めるのかの判断基準</li><li>マネージド / 案マネージド の違いによる削除可否の差</li><li>依存関係表示が空でも失敗する代表的内部要因</li><li>外部キーエラー (SQL 547) 発生時の実務的回復手順</li></ul><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#q1">モデル駆動型アプリ削除に必要な権限 (Q1)</a></li><li><a href="#q2">削除前に確認すべき依存関係の整理 (Q2)</a></li><li><a href="#q3">依存関係が表示されないのに削除できない場合の対処 (Q3)</a></li><li><a href="#summary">まとめ</a></li><li><a href="#notice">注意事項（情報の更新可能性）</a></li></ul><h2 id="q1">モデル駆動型アプリ削除に必要な権限 (Q1)</h2>【結論】モデル駆動型アプリを削除できる主な既定ロールはシステム管理者 (System Administrator) とシステムカスタマイザー (System Customizer) です。<p>これら以外のカスタムロールで削除を許可したい場合、両既定ロールが保有する App (App Module) の Delete、関連 Solution 操作 (Read / Write / Delete / Append / Append To) および Publish Customizations などの権限セットを完全に再現する必要があります。</p><p>マネージド ソリューションのアプリはロールに関わらず個別削除できず、マネージド ソリューション全体を環境から削除する必要があります。</p><p>【ポイント】</p><ol><li>既定ロール: システム管理者 (System Administrator) / システムカスタマイザー (System Customizer) </li><li>必須操作: App Module Delete + Publish Customizations</li><li>付随権限: Solution（Read / Write / Delete / Append / Append To）</li><li>カスタムロール: 上記権限を完全複製で代替可</li><li>マネージド 配下: 個別削除不可（ソリューション全体の削除）</li></ol><p> 【よくある誤解】</p><ul><li>誤解: アプリを作成したユーザなら誰でもそのアプリを削除できる。<ul><li>→ 正しくは: 作成者であっても適切な Delete 権限と関連カスタマイズ権限がなければ削除できません。</li></ul></li><li>誤解: マネージド ソリューションからインポートしたアプリも <a href="#https://make.powerapps.com/environments/Default-b78d9d9a-c2e6-42d2-9bcc-1fa7852ad660/home">Power Apps ポータル</a>から直接削除できる。<ul><li>→ 正しくは: マネージド ソリューション配下のコンポーネントは個別削除不可で、ソリューションの全体の削除が必要です。</li></ul></li><li>誤解: Publish Customizations 権限は削除には無関係である。<ul><li>→ 正しくは: 削除後の状態反映で公開処理が走るため関連カスタマイズ権限不足でエラーとなる場合があります。</li></ul></li><li>誤解: App Module の Delete 権限さえ付与されていればアプリを削除できる。<ul><li>→ 正しくは: Delete 単独では不十分で Solution への Read / Write / Delete / Append / Append To と Publish Customizations、および依存関係解消が揃って初めて削除可能です。誤設定リスク低減のため既定ロール (システム管理者 / システムカスタマイザー) の利用を推奨します。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/security-roles-privileges">セキュリティ ロールおよび特権 (Dataverse)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/model-driven-apps/privileges-required-customization">カスタマイズに必要な特権 (モデル駆動型アプリ)</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/managed-unmanaged-solutions">Managed と Unmanaged の違い</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/model-driven-apps/delete-model-driven-app">モデル駆動型アプリを削除する</a></li></ul><h2 id="q2">削除前に確認すべき依存関係の整理 (Q2)</h2>【結論】依存関係は「アプリが中で利用"している"項目 (用途：Uses)」と「そのアプリを利用"されている"項目 (使用者：Used by)」の 2 種類です。削除を止めるのは依存関係ページの「削除ブロック（Delete blocked by）」タブに表示される項目だけです。<p>代表例として SiteMap、テーブル (Table)、フォーム (SystemForm)、ビュー (SavedQuery)、ビューのチャート (SavedQueryVisualization)、ダッシュボード、Business Process Flow、ロール依存、Web リソース、URL Suffix などが該当します。</p><p>【ポイント】</p><ol><li>ブロック判定: “削除ブロック（Delete blocked by）” タブ列挙項目</li><li>代表的な要素: SiteMap / Table / SystemForm / SavedQuery / SavedQueryVisualization</li></ol><p>【補足】“使用者（Used by）” に表示されても “削除ブロック（Delete blocked by）” に現れない要素は削除ブロックではありません。無闇に削除すると他アプリや別ソリューションでリンク切れや機能欠落を生む恐れがあります。</p><p><a href="#https://make.powerapps.com/environments/Default-b78d9d9a-c2e6-42d2-9bcc-1fa7852ad660/home">Power Apps ポータル</a>で依存関係を確認する手順 (簡易):</p><ol><li>対象環境で ソリューション を開き、アプリを含むソリューションを選択<br> <img src="/blog/powerapps/model-driven-app-delete-guide/solution_app.png" alt="ソリューション内アプリ一覧"></li><li>アプリ行を選択後、該当行のコマンドバー (… など) から「詳細 &gt; 依存関係を表示」をクリック<br> <img src="/blog/powerapps/model-driven-app-delete-guide/app_detail.png" alt="アプリ詳細から依存関係を表示"></li><li>削除ブロック（Delete blocked by）/ 使用者 (Used by) / 用途 (Uses) の各タブで確認可能<br> <img src="/blog/powerapps/model-driven-app-delete-guide/view.png" alt="依存関係ビュー"></li></ol><p>【よくある誤解】</p><ul><li>誤解: アプリを削除すれば内部で参照しているビューやフォームも自動削除される。<ul><li>→ 正しくは: 参照コンポーネントは独立しており自動削除されないため別途クリーンアップが必要です。</li></ul></li><li>誤解: Used by に出た要素はすべて削除ブロックである。<ul><li>→ 正しくは: Delete blocked by に現れない限り直接のブロックではありません。</li></ul></li><li>誤解: マネージド コンポーネントは アンマネージド に変換しないと依存関係表示できない。<ul><li>→ 正しくは: マネージド でも依存関係ビューから直接確認可能です。</li></ul></li></ul><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/data-platform/view-component-dependencies">コンポーネントの依存関係を表示する</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/remove-table-app">テーブルとモデル駆動型アプリ間の依存関係を削除する</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/removing-dependencies">依存関係の削除の概要</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/managed-unmanaged-solutions">Managed と Unmanaged の違い</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/model-driven-apps/delete-model-driven-app">モデル駆動型アプリを削除する</a></li></ul><h2 id="q3">依存関係が表示されないのに削除できない場合の対処 (Q3)</h2>【結論】依存関係ページにブロック項目が無くても AppSettingBase など内部設定テーブルの参照（外部キー）が残っていると削除が失敗する事例があります。<p>以下のようなエラーが発生しシステム管理者でも削除できない事例が複数報告されています。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Sql error: Statement conflicted with a constraint.</span><br><span class="line">The DELETE statement conflicted with the REFERENCE constraint &quot;appmodule_appsetting_parentappmoduleid&quot;.</span><br><span class="line">The conflict occurred in database &quot;db_crmcorejpn_********_********_****&quot;, table &quot;dbo.AppSettingBase&quot;, column &#x27;ParentAppModuleId&#x27;.</span><br><span class="line">The statement has been terminated.</span><br><span class="line">CRM ErrorCode: -2147185375</span><br><span class="line">Sql ErrorCode: -2146232060</span><br><span class="line">Sql Number: 547</span><br></pre></td></tr></table></figure><p>エラー文の要点:</p><ol><li>Sql Number 547 は参照整合性 (外部キー) 違反を示す一般的エラー</li><li>外部キー名 appmodule_appsetting_parentappmoduleid は AppSettingBase の ParentAppModuleId が対象 App Module を指しているレコードが残存していることを示唆</li><li>一時的な未公開 / キャッシュ状態や App 設定レイヤー未更新により不要な AppSetting レコード参照が残留している可能性があります。</li></ol><p>エラー対処手順:</p><ol><li>システム管理者が対象モデル駆動型アプリを Power Apps (Maker ポータル) で開き「保存して公開」(Save &amp; Publish) を実行<br>（「保存して公開」が非活性の場合はページの追加など軽微な編集を行ってください）</li><li>直後に「再生」(Play) を押下し一度アプリを起動</li></ol><p>【補足】上記手順でのエラーが解消されない場合は、問題発生直後のサポート リクエストの起票を推奨します。</p><p>＜参考資料＞</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/data-platform/view-component-dependencies">コンポーネントの依存関係を表示する</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/removing-dependencies">依存関係の削除の概要</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/managed-unmanaged-solutions">Managed と Unmanaged の違い</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/alm/troubleshoot-common-solution-issues">ソリューションの一般的な問題のトラブルシューティング</a></li></ul><h2 id="summary">まとめ</h2>- モデル駆動型アプリ削除には システム管理者 (System Administrator) / システムカスタマイザー (System Customizer) または同等の削除権限を付与したカスタム セキュリティ ロール が必要です。- 依存関係は [Power Apps ポータル](#https://make.powerapps.com/environments/Default-b78d9d9a-c2e6-42d2-9bcc-1fa7852ad660/home) の「依存関係を表示」から 用途（Use） / 使用者（Used by） / 削除ブロック（Delete blocked by） を確認可能です。- SQL Number 547 (appmodule_appsetting_parentappmoduleid) は AppSettingBase 残留参照が原因で「保存して公開 → 再生 → 削除」手順が有効です。<h2 id="notice">注意事項（情報の更新可能性）</h2>本記事の内容は執筆日時点の公開情報に基づいています。仕様や UI、権限名称、依存関係の表示挙動は将来変更される可能性があります。最新情報は公式ドキュメントをご確認ください。]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、PowerPlatformサポートチームの三田です。&lt;/p&gt;
&lt;p&gt;本記事ではモデル駆動型アプリの削除について、以下の Q1〜Q3 の質問に回答する形でご説明します。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#q1&quot;&gt;Q1: モデル駆動型アプリの削除に必要な</summary>
      
    
    
    
    <category term="powerapps" scheme="https://jpdynamicscrm.github.io/blog/categories/powerapps/"/>
    
    
    <category term="powerapps" scheme="https://jpdynamicscrm.github.io/blog/tags/powerapps/"/>
    
    <category term="dataverse" scheme="https://jpdynamicscrm.github.io/blog/tags/dataverse/"/>
    
    <category term="governance" scheme="https://jpdynamicscrm.github.io/blog/tags/governance/"/>
    
  </entry>
  
  <entry>
    <title>DLP ポリシーに関する様々な Q&amp;A について</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/overlapped-dlppolicy/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/overlapped-dlppolicy/</id>
    <published>2025-09-12T03:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.775Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの宮﨑です。<br>本記事では、DLP ポリシーに関する様々な Q&amp;A についてご案内いたします。</p><span id="more"></span><ul><li><a href="#%E7%9B%AE%E6%AC%A1">目次</a></li><li><a href="#%E6%A6%82%E8%A6%81">概要</a><ul><li><a href="#anchor-about-dlp">Q1. DLP ポリシーとは</a></li><li><a href="#anchor-multi-dlp-applied">Q2. 個別環境に複数の DLP ポリシーが適用された場合</a></li><li><a href="#anchor-dlp-edit-history">Q3. DLP ポリシーの変更履歴を確認する方法</a></li><li><a href="#anchor-default-new-connector-classification">Q4. 新しいコネクタが追加されたときの分類</a></li><li><a href="#anchor-export-all-connectors">Q5. DLP ポリシーに設定されているコネクタの一覧を出力する</a></li><li><a href="#anchor-time-to-be-applied">Q6. DLP ポリシーを作成してから適用されるまでの時間</a></li><li><a href="#anchor-affect-to-app-flow">Q7. アプリとフローへの DLP ポリシーの影響</a><ul><li><a href="#anchor-affect-to-app-flow-create">1. アプリやフローを設計する段階での影響</a></li><li><a href="#anchor-affect-to-app-flow-run">2. アプリやフローを実行する段階での影響</a></li></ul></li></ul></li><li><a href="#%E8%A3%9C%E8%B6%B3">補足</a></li></ul><p><a id='概要'></a></p><h1 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h1><p>今回はよくあるお問い合わせとして、DLP ポリシーに関する様々な Q&amp;A についてご案内いたします。</p><p><a id='anchor-about-dlp'></a></p><h1 id="Q1-DLP-ポリシーとは"><a href="#Q1-DLP-ポリシーとは" class="headerlink" title="Q1. DLP ポリシーとは"></a>Q1. DLP ポリシーとは</h1><p>DLP ポリシーとは、「Data Loss Prevention (データ損失防止) ポリシー」の略で、企業や組織の重要なデータを守るための仕組みです。  </p><p>Power Platform では、様々な「コネクタ」を使用して Microsoft 365 や 外部サービスとデータをやり取りすることが可能です。<br>便利な反面、誤って社内機密を外部に送ってしまうというリスクも存在しています。  </p><p>DLP ポリシーはこのようなリスクを防ぐために、コネクタの利用範囲を制限することができます。<br>具体的には、「社内データは SharePoint や Outlook などのビジネスコネクタだけと連携可能」や、「SNS系コネクタは使用禁止」というルールを設定できます。  </p><p>(参考：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/wp-data-loss-prevention">データの消失防止 (DLP) ポリシー</a>)</p><p><a id='anchor-multi-dlp-applied'></a></p><h1 id="Q2-個別環境に複数の-DLP-ポリシーが適用された場合"><a href="#Q2-個別環境に複数の-DLP-ポリシーが適用された場合" class="headerlink" title="Q2. 個別環境に複数の DLP ポリシーが適用された場合"></a>Q2. 個別環境に複数の DLP ポリシーが適用された場合</h1><p>ある環境に対して、テナント全体に適用される DLP ポリシーとその環境のみに適用される DLP ポリシーが存在した場合の挙動について、詳細をご説明します。</p><h2 id="評価の基本ルール"><a href="#評価の基本ルール" class="headerlink" title="評価の基本ルール"></a>評価の基本ルール</h2><ol><li>すべての DLP ポリシーが同時に評価され、<strong>最も制限の厳しい設定が優先</strong>されます。<br>特に「ブロック済み」に分類されているコネクタは、他の DLP ポリシーで許可されている場合でも使用はできません。<br>例えば、全体に適用されている DLP ポリシーにおいて HTTP コネクタが「ブロック済み」に分類されている場合、<br>個別環境の DLP ポリシーで許可されていたとしても、使用することはできません。</li></ol><ol start="2"><li><p>同じコネクタが、ある DLP ポリシーでは「業務」、別の DLP ポリシーでは「非ビジネス」と分類されていた場合：<br> そのコネクタは <strong>単体では使用可能ですが、他のコネクタと一緒に使うことができなくなります</strong>。<br> これは、Power Platform ではアプリやフロー内で使用されるすべてのコネクタが、同じ「分類グループ」に属している必要があるためです。</p><p> 具体的には：</p><ul><li>「業務」に分類されているコネクタ同士は 併用可能  </li><li>「非ビジネス」に分類されているコネクタ同士は 併用可能  </li><li>「業務」と「非ビジネス」にまたがるコネクタは <strong>併用不可</strong></li></ul><p> となっています。</p></li></ol><p>(参考：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/dlp-combined-effect-multiple-policies">Microsoft Learn - DLP ポリシーの組み合わせ効果</a>)</p><h2 id="実際の例"><a href="#実際の例" class="headerlink" title="実際の例"></a>実際の例</h2><p>以降では、簡単な例を用いてより具体的な挙動について解説します。</p><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p>テナント全体に適用されている DLP ポリシーをグループ A 、個別環境に適用されている DLP ポリシーをグループ B という前提のもと、進めていきます。</p><h3 id="実際の挙動"><a href="#実際の挙動" class="headerlink" title="実際の挙動"></a>実際の挙動</h3><p>こちらが、グループＡとグループＢでのコネクタ分類と、それに基づく実際の挙動をまとめた表になります。</p><table><thead><tr><th>コネクタ名</th><th>グループＡ (全体 DLP)</th><th>グループＢ (個別 DLP)</th><th>個別環境での実際の挙動</th></tr></thead><tbody><tr><td>Salesforce</td><td>業務</td><td>ブロック済み</td><td>使用不可(「ブロック済み」が優先)</td></tr><tr><td>Dropbox</td><td>ブロック済み</td><td>非ビジネス</td><td>使用不可(「ブロック済み」が優先)</td></tr><tr><td>Excel Online (Business)</td><td>業務</td><td>業務</td><td>他の「業務」コネクタとの併用可能</td></tr><tr><td>Office 365 Outlook</td><td>非ビジネス</td><td>非ビジネス</td><td>他の「非ビジネス」コネクタとの併用可能</td></tr><tr><td>SharePoint</td><td>業務</td><td>非ビジネス</td><td>単体使用は可能。他のコネクタとの併用不可。</td></tr></tbody></table><p>このように、<strong>同じコネクタでもポリシーごとに分類が異なる場合、アプリやフロー内でのコネクタ使用に制限が生じてしまいます</strong>。<br>そのため、環境に適用する DLP ポリシーの数は最小限に抑えることが推奨されております。<br>また、同じコネクタに対して異なる分類 (業務／非ビジネス／ブロック済み) を設定しないようご留意ください。</p><p><a id='anchor-dlp-edit-history'></a></p><h1 id="Q3-設定した-DLP-ポリシーの変更履歴を確認する方法"><a href="#Q3-設定した-DLP-ポリシーの変更履歴を確認する方法" class="headerlink" title="Q3. 設定した DLP ポリシーの変更履歴を確認する方法"></a>Q3. 設定した DLP ポリシーの変更履歴を確認する方法</h1><p>DLP ポリシーの変更内容については、<strong>Microsoft Purview</strong> の「<strong>監査ログ</strong>」から確認いただけます。</p><p>以下の手順で変更履歴を取得することが可能です。</p><ol><li>アクセス権をもつアカウントで、Microsoft Purview 管理センターにアクセスしてください。</li><li>「監査＞検索」を選択し、「アクティビティ – 操作名」に「GovernanceApiPolicyOperation」を入力してください。</li><li>検索対象となる時間範囲を指定して「検索」を選択いただくことで、指定の時間範囲内の DLP ポリシーの変更履歴を確認することが可能です。</li></ol><p><img src="/blog/powerplatform/overlapped-dlppolicy/purview-log.png"></p><p>表示されますデータの例等の詳細につきましては、下記の公開情報をご参照ください。<br><br>(参考：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/admin-activity-logging#activity-category-data-policy-events">Microsoft Learn - Microsoft Purview のソリューションの概要を使用して Power Platform 管理ログを表示する</a>)</p><p><a id='anchor-default-new-connector-classification'></a></p><h1 id="Q4-新しいコネクタが追加されたときの分類"><a href="#Q4-新しいコネクタが追加されたときの分類" class="headerlink" title="Q4. 新しいコネクタが追加されたときの分類"></a>Q4. 新しいコネクタが追加されたときの分類</h1><p>新しいコネクタがリリースされたとき、そのコネクタは<strong>既定グループ</strong>に分類されます。<br><br>既定グループは、デフォルトで「<strong>非ビジネス</strong>」グループとなっております。</p><p><img src="/blog/powerplatform/overlapped-dlppolicy/image.png"></p><p>DLP ポリシーを作成するにあたって、任意のコネクタを他のグループに移動することはできますが、<br>最初からに既定グループ以外に分類されるコネクタはございません。</p><p>既定グループを変更されたい場合は、以下の公開情報に手順がございますので、ご参照ください。<br><br>(参考：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/prevent-data-loss?tabs=new#change-the-default-data-group">Microsoft Learn - データポリシーを管理する</a>)</p><p><a id='anchor-export-all-connectors'></a></p><h1 id="Q5-DLP-ポリシーに設定されているコネクタの一覧を出力する"><a href="#Q5-DLP-ポリシーに設定されているコネクタの一覧を出力する" class="headerlink" title="Q5. DLP ポリシーに設定されているコネクタの一覧を出力する"></a>Q5. DLP ポリシーに設定されているコネクタの一覧を出力する</h1><p>以下のブログにて、DLP ポリシーに設定されたコネクタの一覧を CSV ファイルに出力する方法をご案内しておりますので、ご参照ください。</p><p><a href="https://jpdynamicscrm.github.io/blog/powerplatform/Output-dlp-policy-connector-list/">DLP ポリシーに設定されているコネクタの一覧を出力する | Japan Dynamics CRM &amp; Power Platform Support Blog</a></p><p><a id='anchor-time-to-be-applied'></a></p><h1 id="Q6-DLP-ポリシーを作成してから適用されるまでの時間"><a href="#Q6-DLP-ポリシーを作成してから適用されるまでの時間" class="headerlink" title="Q6. DLP ポリシーを作成してから適用されるまでの時間"></a>Q6. DLP ポリシーを作成してから適用されるまでの時間</h1><p>DLP ポリシーを作成してから、実際に適用されるようになるまでに<strong>最大 24 時間</strong>かかります。</p><p>ほとんどの場合、1 時間ほどで反映されますが、ポリシーの適用範囲によっても変動いたします。<br>ご使用のアプリ、フローの数が多いほど、変更が完全に有効になるまでの時間が長くなります。</p><p>公開情報については、以下をご参照ください。<br><br>(参考：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/wp-data-loss-prevention#latency-considerations">Microsoft Learn - 待機時間に関する考慮事項</a>)</p><p><a id='anchor-affect-to-app-flow'></a></p><h1 id="Q7-アプリとフローへの-DLP-ポリシーの影響"><a href="#Q7-アプリとフローへの-DLP-ポリシーの影響" class="headerlink" title="Q7. アプリとフローへの DLP ポリシーの影響"></a>Q7. アプリとフローへの DLP ポリシーの影響</h1><p>DLP ポリシーの追加・更新により、既存のアプリやフローにどのような影響がありうるかをご案内いたします。</p><p><a id='anchor-affect-to-app-flow-create'></a></p><h2 id="1-アプリやフローを設計する段階での影響"><a href="#1-アプリやフローを設計する段階での影響" class="headerlink" title="1. アプリやフローを設計する段階での影響"></a>1. アプリやフローを設計する段階での影響</h2><p>アプリやフローを構築する際、同じグループに属さないコネクタや、ポリシーでブロックされたコネクタを追加しようとすると、以下のようなエラーメッセージが表示されます。</p><p><img src="/blog/powerplatform/overlapped-dlppolicy/image2.png"></p><p><a id='anchor-affect-to-app-flow-run'></a></p><h2 id="2-アプリやフローを実行する段階への影響"><a href="#2-アプリやフローを実行する段階への影響" class="headerlink" title="2. アプリやフローを実行する段階への影響"></a>2. アプリやフローを実行する段階への影響</h2><p>アプリやフローは、作成当時の DLP ポリシーに従って設計されています。<br>DLP ポリシーが更新されると、<strong>更新後の DLP ポリシーで再評価されます</strong>。<br>その結果、それまでには問題がなかったアプリやフローの構成が違反として扱われる場合があります。</p><p>最新の DLP ポリシーに違反しているアプリやフローを実行しようとすると、以下のような状態になります。</p><ul><li><p>Power Automate の場合<br><strong>違反するフローは実行できなくなり、「中断（Suspended）」状態</strong> になります。<br>この状態では、DLP ポリシー違反を解消するまで、フローは実行できません。</p></li><li><p>Power Apps の場合<br>同じグループに属さないコネクタや、ブロックされたコネクタを含む<strong>アプリを開くことはできなくなります</strong>。</p></li></ul><p>(参考：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/dlp-impact-policies-apps-flows">Microsoft Learn - アプリとフローへのデータ ポリシーの影響</a>)</p><hr><p><a id='補足'></a></p><h1 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h1><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。<br>バージョンアップによって UI の遷移などが若干異なる場合があります。<br>その場合は画面の指示に従って進めてください。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの宮﨑です。&lt;br&gt;本記事では、DLP ポリシーに関する様々な Q&amp;amp;A についてご案内いたします。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Connector and Connection" scheme="https://jpdynamicscrm.github.io/blog/tags/Connector-and-Connection/"/>
    
  </entry>
  
  <entry>
    <title>Copilot Studio エージェントの作成に必要な権限について</title>
    <link href="https://jpdynamicscrm.github.io/blog/copilotstudio/how-to-block-access-mcsportal/"/>
    <id>https://jpdynamicscrm.github.io/blog/copilotstudio/how-to-block-access-mcsportal/</id>
    <published>2025-09-10T04:30:00.000Z</published>
    <updated>2025-10-23T09:21:14.513Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。Power Platform サポートチームの 網野 です。<br>今回は Copilot Studio でエージェントを作成できるユーザーに必要な権限についてご紹介します。</p><span id="more"></span><h2 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h2><p>Copilot Studioでエージェントを作成できるユーザーに、どのような権限が必要なのかを解説します。</p><p>ご留意点として、Copilot Studio は 2025 年 9 月現在、早いスピードで日々機能開発が進んでいます。そのため、実際にご利用いただく際は必ず最新の公開情報を参照していただけますようお願い申し上げます。</p><h2 id="Copilot-Studioでエージェント作成に必要な権限とは？"><a href="#Copilot-Studioでエージェント作成に必要な権限とは？" class="headerlink" title="Copilot Studioでエージェント作成に必要な権限とは？"></a>Copilot Studioでエージェント作成に必要な権限とは？</h2><p>Copilot Studio でエージェントを作成するには、ユーザーに <a href="https://learn.microsoft.com/en-us/microsoft-copilot-studio/billing-licensing#copilot-studio-use-rights-included-with-microsoft-365-copilot-license">Copilot Studio へのアクセス権</a>と、対象環境でリソースを作成するための<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=web#assign-environment-security-roles">セキュリティロール</a>が割り当てられている必要があります。<br>この2つの権限が揃っていないと、エージェントの作成や管理ができません。</p><h3 id="Copilot-Studio-へのアクセス権"><a href="#Copilot-Studio-へのアクセス権" class="headerlink" title="Copilot Studio へのアクセス権"></a>Copilot Studio へのアクセス権</h3><p>Copilot Studio ポータルにアクセスするためには、ユーザーに以下のいずれかのライセンスまたはロールが必要です。<br>※以下のいずれかに該当するとアクセスできるようになります。</p><ul><li>Copilot Studio ユーザーライセンス</li><li>Copilot Studio 試用版ライセンス</li><li>Microsoft 365 Copilot ライセンス</li><li>Power Platform 管理センター テナント設定の「Copilot Studio 作成者」ロール（※）<blockquote><p>※ 重量課金のみのライセンスでエージェントを作成する際に必要なロールです。<br>詳細は<a href="#%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E6%A8%A9%E3%81%AE%E8%A9%B3%E7%B4%B0">アクセス権の詳細</a>で説明します。</p></blockquote></li></ul><h3 id="対象環境でリソースを作成するためのセキュリティロール"><a href="#対象環境でリソースを作成するためのセキュリティロール" class="headerlink" title="対象環境でリソースを作成するためのセキュリティロール"></a>対象環境でリソースを作成するためのセキュリティロール</h3><p>エージェントを作成するためには、エージェントを作成する環境に対してセキュリティロールが必要となります。<br>リソースを作成するために必要なセキュリティロールは以下になります。</p><ul><li>環境作成者</li><li>システムカスタマイザー</li><li>システム管理者</li></ul><blockquote><p>※ 詳細は公開情報を参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/canvas-apps/sign-in-to-power-apps#filter-environments-by-role">https://learn.microsoft.com/ja-jp/power-apps/maker/canvas-apps/sign-in-to-power-apps#filter-environments-by-role</a></p></blockquote><h2 id="アクセス権の詳細"><a href="#アクセス権の詳細" class="headerlink" title="アクセス権の詳細"></a>アクセス権の詳細</h2><h3 id="Copilot-Studio-ユーザーライセンス"><a href="#Copilot-Studio-ユーザーライセンス" class="headerlink" title="Copilot Studio ユーザーライセンス"></a>Copilot Studio ユーザーライセンス</h3><p>Copilot Studio メッセージパックに含まれるライセンスで、<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing?tabs=web#assign-licenses-to-users">Microsoft 365 管理センター等から付与</a>することができます。<br>Copilot Studio の使用権が含まれています。</p><h3 id="Copilot-Studio-試用版ライセンス"><a href="#Copilot-Studio-試用版ライセンス" class="headerlink" title="Copilot Studio 試用版ライセンス"></a>Copilot Studio 試用版ライセンス</h3><p><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/sign-up-individual">ユーザーがセルフサービスサインアップで取得できる</a>期間限定のライセンスです。<br>有償ライセンスを購入いただく前のお試し用として、Copilot Studio ユーザーライセンスと同じ機能が利用できます。</p><h3 id="Microsoft-365-Copilot-ライセンス"><a href="#Microsoft-365-Copilot-ライセンス" class="headerlink" title="Microsoft 365 Copilot ライセンス"></a>Microsoft 365 Copilot ライセンス</h3><p>Copilot Studio を通じて <a href="https://learn.microsoft.com/ja-jp/copilot/microsoft-365/microsoft-365-copilot-overview">Microsoft 365 Copilot</a> を拡張することができるため、Microsoft 365 Copilot ライセンスを持つユーザーは Copilot Studio を利用することができます。  </p><p><a href="https://learn.microsoft.com/ja-jp/copilot/microsoft-365/microsoft-365-copilot-setup#step-2---provision-microsoft-365-copilot-licenses">Microsoft 365 管理センター等から付与</a>することができます。　<br>Copilot Studio だけなく、Microsoft 365 Copilot の使用権が含まれています。</p><div class="alert is-important"><p class="alert-title">重要</p><p>Copilot Studio にアクセスさせるためには、「Copilot Studio in Copilot for M365」サービスを有効にする必要があります。</p><p><img src="/blog/copilotstudio/how-to-block-access-mcsportal/m365copilot.png"></p></div><h3 id="Power-Platform-管理センター-テナント設定の「Copilot-Studio-作成者」ロール"><a href="#Power-Platform-管理センター-テナント設定の「Copilot-Studio-作成者」ロール" class="headerlink" title="Power Platform 管理センター テナント設定の「Copilot Studio 作成者」ロール"></a>Power Platform 管理センター テナント設定の「Copilot Studio 作成者」ロール</h3><p>従量課金環境のみを利用して Copilot Studio を利用するユーザー向けに用意された機能が「Copilot Studio 作成者」機能です。<br>他のユーザーに付与するライセンスと異なり、ユーザーごとにライセンスを付与する必要はありません。<br>Copilot Studio でエージェントを作成したいユーザーをセキュリティグループに追加し、Copilot Studio へのアクセスを許可します。</p><p>作成手順</p><ol><li>Azure ポータルでセキュリティグループを作成します。</li><li>Copilot Studio へのアクセスを許可したいユーザーをセキュリティグループに追加します。<br><img src="/blog/copilotstudio/how-to-block-access-mcsportal/securitygroup.png"></li><li><a href="https://admin.powerplatform.microsoft.com/manage/tenantsettings">Power Platform 管理センターのテナント設定</a>を開きます。</li><li>「Copilot Studio 作成者」を選択し、作成したセキュリティグループを設定します。<br><img src="/blog/copilotstudio/how-to-block-access-mcsportal/tenant_setting.png"></li></ol><h2 id="よくある質問"><a href="#よくある質問" class="headerlink" title="よくある質問"></a>よくある質問</h2><h3 id="テナント設定の「Copilot-Studio-作成者」に設定したセキュリティグループに属さないユーザーは、Copilot-Studio-にアクセスできないようになりますか。"><a href="#テナント設定の「Copilot-Studio-作成者」に設定したセキュリティグループに属さないユーザーは、Copilot-Studio-にアクセスできないようになりますか。" class="headerlink" title="テナント設定の「Copilot Studio 作成者」に設定したセキュリティグループに属さないユーザーは、Copilot Studio にアクセスできないようになりますか。"></a>テナント設定の「Copilot Studio 作成者」に設定したセキュリティグループに属さないユーザーは、Copilot Studio にアクセスできないようになりますか。</h3><p>いいえ、「Copilot Studio 作成者」に設定したセキュリティグループに属さないユーザーも、ユーザーライセンスを持っていれば Copilot Studio にアクセスできます。</p><h3 id="Copilot-Studio-にアクセスできないユーザーは-Copilot-Studio-で作成したエージェントを利用することができますか"><a href="#Copilot-Studio-にアクセスできないユーザーは-Copilot-Studio-で作成したエージェントを利用することができますか" class="headerlink" title="Copilot Studio にアクセスできないユーザーは Copilot Studio で作成したエージェントを利用することができますか"></a>Copilot Studio にアクセスできないユーザーは Copilot Studio で作成したエージェントを利用することができますか</h3><p>はい、利用できます。エージェントの利用者は、Copilot Studio にアクセスできる必要はありません。<br>ただし、Teams やカスタム Web サイトなど、エージェントを公開した場所にアクセスできる必要がございます。<br><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing?tabs=web">https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing?tabs=web</a><br><img src="/blog/copilotstudio/how-to-block-access-mcsportal/c2licensing.png"></p><h3 id="環境ごとにエージェントの作成を制限することはできますか"><a href="#環境ごとにエージェントの作成を制限することはできますか" class="headerlink" title="環境ごとにエージェントの作成を制限することはできますか"></a>環境ごとにエージェントの作成を制限することはできますか</h3><p>現時点では、エージェントの作成を制御するための機能はありません。<br><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/security-faq#can-i-disable-microsoft-copilot-studio-agent-creation-in-my-organization">https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/security-faq#can-i-disable-microsoft-copilot-studio-agent-creation-in-my-organization</a><br><img src="/blog/copilotstudio/how-to-block-access-mcsportal/control.png"></p><p>ただし、既定環境以外の環境では、 [対象環境でリソースを作成するためのセキュリティロール]を付与しないことで、環境へのアクセスを制御することが可能です。</p><div class="alert is-info"><p class="alert-title">Note</p><p>※ 既定環境では、「環境作成者」ロールが自動付与されるため、アクセスを制御することはできません。</p></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは。Power Platform サポートチームの 網野 です。&lt;br&gt;今回は Copilot Studio でエージェントを作成できるユーザーに必要な権限についてご紹介します。&lt;/p&gt;</summary>
    
    
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/categories/Microsoft-Copilot-Studio/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Power Virtual Agents" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Virtual-Agents/"/>
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/tags/Microsoft-Copilot-Studio/"/>
    
  </entry>
  
  <entry>
    <title>Power Platform 管理センター からサポート リクエストを起票するために必要な権限について</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/ppac-azure-sr-roles-restriction/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/ppac-azure-sr-roles-restriction/</id>
    <published>2025-08-31T15:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.790Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポート チームの三田です。<br>本記事では、Power Platform 管理センター（PPAC）からサポート リクエストを起票するために必要な権限についてご紹介いたします。</p><h3 id="【この記事からわかること】"><a href="#【この記事からわかること】" class="headerlink" title="【この記事からわかること】"></a>【この記事からわかること】</h3><ul><li>PPAC における サポート リクエスト 起票が可能なロールについて</li><li>PPAC から サポート リクエスト を起票する方法</li></ul><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li><a href="#PPAC%E3%81%8B%E3%82%89%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%81%AE%E8%B5%B7%E7%A5%A8%E3%81%8C%E5%8F%AF%E8%83%BD%E3%81%AA%E3%83%AD%E3%83%BC%E3%83%AB">PPAC から サポート リクエスト の起票が可能なロール</a></li><li><a href="#PPAC%E3%81%8B%E3%82%89%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%82%92%E8%B5%B7%E7%A5%A8%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95">PPAC から サポート リクエスト を起票する方法</a></li><li><a href="#%E3%81%BE%E3%81%A8%E3%82%81">まとめ</a></li></ul><h2 id="PPAC-から-サポート-リクエスト-の起票が可能なロール"><a href="#PPAC-から-サポート-リクエスト-の起票が可能なロール" class="headerlink" title="PPAC から サポート リクエスト の起票が可能なロール"></a>PPAC から サポート リクエスト の起票が可能なロール</h2><p>Power Platform 管理センター（PPAC）では、サポート リクエストを作成するために、以下のサポート作成が有効化されたロールのいずれかを保持している必要がございます。</p><p>＜Microsoft Entra ロール＞</p><blockquote><ul><li>Microsoft Entra ロール管理者</li><li>会社管理者 (グローバル管理者)</li><li>課金管理者</li><li>サービス管理者</li><li>セキュリティ管理者</li><li>コンプライアンス管理者</li><li>ヘルプデスク管理者</li><li>パートナー代理管理者</li><li>SharePoint 管理者</li><li>チーム管理者 (Microsoft Teams 管理者)</li><li>Exchange 管理者</li><li>Power BI 管理者</li><li>Power Platform 管理者</li><li>CRM サービス管理者</li><li>Power Apps Full 管理者</li></ul></blockquote><p>＜セキュリティ ロール＞</p><blockquote><ul><li>環境管理者 (または Dataverse のシステム管理者ロール)</li><li>CRM 組織の管理者 (Dataverse のシステム管理者ロール)</li><li>Power Apps 環境管理者</li><li>LCS ユーザー</li></ul></blockquote><p>また、技術的サポートを受けるためには、ご契約のサポート プラン（Subscription／ProDirect／Unified など）が要件を満たしている必要がございますのでご留意ください。</p><p>＜参考資料＞</p><ul><li><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/get-help-support">サポートを受ける</a>  </p></li><li><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/support-overview#using-support">サポートの概要</a></p></li></ul><h2 id="PPAC-から-サポート-リクエスト-を起票する方法"><a href="#PPAC-から-サポート-リクエスト-を起票する方法" class="headerlink" title="PPAC から サポート リクエスト を起票する方法"></a>PPAC から サポート リクエスト を起票する方法</h2><p>事前に、<a href="#PPAC%E3%81%8B%E3%82%89%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%81%AE%E8%B5%B7%E7%A5%A8%E3%81%8C%E5%8F%AF%E8%83%BD%E3%81%AA%E3%83%AD%E3%83%BC%E3%83%AB">上記の起票に使用するアカウントの権限</a>と、ご契約のサポート プランの要件をご確認ください。最小権限での実施を推奨いたします。</p><ol><li><p>Power Platform 管理センター <a href="https://admin.powerplatform.microsoft.com/">https://admin.powerplatform.microsoft.com/</a> にアクセスし、対象テナントのアカウントでサインイン</p></li><li><p>左側ナビゲーションから「サポート」を選択し、「サポートを受ける」ボタンをクリック<br><img src="/blog/powerplatform/ppac-azure-sr-roles-restriction/step2_help+support.png" alt="PPAC サポート要求画面"></p></li><li><p>項目に従って、以下の情報を入力</p></li></ol><ul><li>製品/サービス: 例）Power Apps / Power Automate / Power Pages / Dataverse など</li><li>環境: 影響している環境（開発/本番など）</li><li>問題の種類/カテゴリ: 最も近い項目を選択</li><li>重大度（影響度）: 影響範囲・業務影響に応じて選択</li></ul><p>起票の際に「どんな動作を期待するか」など、詳細な情報をいただけますとより的確で迅速なご案内が可能でございます。ご協力よろしくお願いいたします。</p><p>(補足)<br>プレビュー機能で、<a href="#%E5%B7%A6%E5%81%B4%E3%83%8A%E3%83%93%E3%82%B2%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%8B%E3%82%89%E3%80%8C%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%80%8D%E3%82%92%E9%81%B8%E6%8A%9E%E3%81%97%E3%80%81%E3%80%8C%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%82%92%E5%8F%97%E3%81%91%E3%82%8B%E3%80%8D%E3%83%9C%E3%82%BF%E3%83%B3%E3%82%92%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF">ステップ2</a>の後に、サポートエージェントが起動します。サポートエージェントとのチャットボットを利用することで早期解決につなげることが可能でございますので、ぜひご活用ください。</p><p>＜参考資料＞<br><a href="#https://learn.microsoft.com/ja-jp/power-platform/admin/get-help-support#view-solutions-or-create-a-support-request-using-the-support-agent-preview">サポート エージェントを使用してソリューションを表示するか、サポート要求を作成する (プレビュー)</a></p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>本記事では、Power Platform 管理センター（PPAC）でサポート リクエスト（SR）を起票するために必要な権限についてご紹介いたしました。Power Platform について少しでもお困りごとがございましたら、私どもサポート チームが全力でご支援いたします。どうぞ本記事を参考に、気兼ねなく SR を起票くださいますようお願い申し上げます。</p><h2 id="注意事項（情報の更新可能性）"><a href="#注意事項（情報の更新可能性）" class="headerlink" title="注意事項（情報の更新可能性）"></a>注意事項（情報の更新可能性）</h2><p>本記事の内容は執筆日時点の情報に基づいております。製品の仕様や UI、ロールの名称・権限、制限事項、およびリンク先の内容は将来的に変更される可能性がございます。最新情報は公式ドキュメントをご確認くださいますようお願い申し上げます。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポート チームの三田です。&lt;br&gt;本記事では、Power Platform 管理センター（PPAC）からサポート リクエストを起票するために必要な権限についてご紹介いたします。&lt;/p&gt;
&lt;h3 id=&quot;【この記事からわかること】&quot;</summary>
      
    
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform/"/>
    
    <category term="サポート" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88/"/>
    
    
    <category term="サポート リクエスト" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88-%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88/"/>
    
    <category term="SR" scheme="https://jpdynamicscrm.github.io/blog/tags/SR/"/>
    
    <category term="役割" scheme="https://jpdynamicscrm.github.io/blog/tags/%E5%BD%B9%E5%89%B2/"/>
    
    <category term="Power Platform 管理センター" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform-%E7%AE%A1%E7%90%86%E3%82%BB%E3%83%B3%E3%82%BF%E3%83%BC/"/>
    
  </entry>
  
  <entry>
    <title>Power Automate で Teams コネクタを使う際に改行を反映する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerautomate/cloudflow-specialcharacters/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerautomate/cloudflow-specialcharacters/</id>
    <published>2025-08-28T03:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.585Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの宮﨑です。<br>本記事では Power Automate で Teams コネクタを使用してメッセージを投稿する際、文字列の改行を反映する方法についてご案内いたします。</p><span id="more"></span><h1 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h1><ol><li><a href="#anchor-intro">概要</a></li><li><a href="#anchor-line-break-issue">解決したい事象</a></li><li><a href="#anchor-line-break">改行を反映する方法</a><ol><li><a href="#anchor-line-break-replace">replace関数を使用する</a><ol><li><a href="#anchor-line-break-replace-flow">フローの例</a></li><li><a href="#anchor-line-break-replace-reason">なぜこれで解消できるのか</a></li></ol></li><li><a href="#anchor-line-break-pre">preタグを使用する</a><ol><li><a href="#anchor-line-break-pre-flow">フローの例</a></li><li><a href="#anchor-line-break-pre-reason">なぜこれで解消できるのか</a></li></ol></li></ol></li><li><a href="#%E8%A3%9C%E8%B6%B3">補足</a></li></ol><p><a id='anchor-intro'></a></p><h1 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h1><p>今回はよくあるお問い合わせとして、 Power Automate で Teams コネクタを使用してメッセージを投稿する際、文字列の改行を反映する方法についてご案内いたします。</p><p><a id='anchor-line-break-issue'></a></p><h2 id="解決したい事象"><a href="#解決したい事象" class="headerlink" title="解決したい事象"></a>解決したい事象</h2><p>下のような SharePoint リストから、Power Automate のクラウドフローで複数行テキストを取得する際、</p><p><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/list.png"></p><p>Teams に投稿すると改行が反映されないことがあります。</p><p><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/notify-failure.png"></p><p>以降では、このような事象の解決方法をご案内いたします。<br>※今回は Teams コネクタを使用している想定での事象となります。コネクタにより動作が異なる可能性がございますのでご留意ください。</p><p><a id='anchor-line-break'></a></p><h2 id="改行を反映する方法"><a href="#改行を反映する方法" class="headerlink" title="改行を反映する方法"></a>改行を反映する方法</h2><p>今回は事象の解決方法として、replace 関数を使用する方法と、&lt;pre&gt;タグを使用する方法の２つをご案内いたします。</p><p><a id='anchor-line-break-replace'></a></p><h3 id="replace-関数を使用する方法"><a href="#replace-関数を使用する方法" class="headerlink" title="replace 関数を使用する方法"></a>replace 関数を使用する方法</h3><p><a id='anchor-line-break-replace-flow'></a></p><h4 id="フローの例"><a href="#フローの例" class="headerlink" title="フローの例"></a>フローの例</h4><p>今回の例では、以下の状況を想定しています。</p><p>トリガー：SharePoint リストにアイテムが追加されたとき<br>アクション：アイテムの内容を Teams に投稿する</p><p>イメージ図<br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/flow-image.png"></p><p>フローの全体図は以下の通りです。<br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/replace/replace-flow-outline.png"></p><p>ここから、フローの詳細を順を追って解説いたします。</p><h4 id="トリガー：SharePoint-リストにアイテムが追加されたとき"><a href="#トリガー：SharePoint-リストにアイテムが追加されたとき" class="headerlink" title="トリガー：SharePoint リストにアイテムが追加されたとき"></a>トリガー：SharePoint リストにアイテムが追加されたとき</h4><p>※こちらのトリガーはあくまでも一例となります。</p><p>下画像のように、ご自身の SharePoint リストをご指定ください。<br><br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/sharepoint.png"></p><h4 id="アクション：アイテムの内容を-Teams-に投稿する"><a href="#アクション：アイテムの内容を-Teams-に投稿する" class="headerlink" title="アクション：アイテムの内容を Teams に投稿する"></a>アクション：アイテムの内容を Teams に投稿する</h4><p>下画像のように、投稿先の情報についてご指定ください。<br><br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/replace/teams.png"></p><h4 id="メッセージ部分"><a href="#メッセージ部分" class="headerlink" title="メッセージ部分"></a>メッセージ部分</h4><p>以下の式をアクション内で設定することで、投稿されたメッセージに改行を反映できるようになります。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">replace(改行を反映したい文字列, decodeUriComponent(&#x27;%0A&#x27;), &#x27;&lt;br&gt;&#x27;)</span><br></pre></td></tr></table></figure><p><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/replace/message.png"></p><hr><p><a id='anchor-line-break-replace-reason'></a></p><h4 id="なぜこれで解消できるのか"><a href="#なぜこれで解消できるのか" class="headerlink" title="なぜこれで解消できるのか"></a>なぜこれで解消できるのか</h4><p>SharePoint リストや Microsoft Excel から取得した複数行テキストを Teams に HTML形式で投稿する際には、<br>改行部分を「&lt;br&gt;」タグへ置換する必要がございます。</p><p>特定の文字列を別の文字列に置換する replace 関数を用いることで、「&lt;br&gt;」タグを挿入することが可能となります。</p><h4 id="replace-文字列-‘-n’-‘-lt-br-gt-’-ではなぜ解消しないのか"><a href="#replace-文字列-‘-n’-‘-lt-br-gt-’-ではなぜ解消しないのか" class="headerlink" title="replace(文字列, ‘\n’, ‘&lt;br&gt;’) ではなぜ解消しないのか"></a>replace(文字列, ‘\n’, ‘&lt;br&gt;’) ではなぜ解消しないのか</h4><p><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/replace/replace-json.png"></p><p>フロー内で文字列を扱う際、改行コードは「\n」と表示されますが、Power Automate で変換するときに特殊文字はそのまま扱えません。<br>そのため、replace( 文字列, ‘\n’, ‘&lt;br&gt;’ ) では、Power Automate が認識する改行部分を取得・置換することができません。</p><p>今回の方法では、decodeUriComponent 関数を使って「%0A」をデコードすることで、実際の改行文字（LF）を取得しています。<br>その改行文字を replace 関数で 「&lt;br&gt;」タグ に置換することで、Teams などに投稿する際に正しく改行が反映されるようになります。</p><p>他のテキストファイルなどからコピーして取得した文字列では、改行コードが LF とは限らない可能性がございますので、<br>上記方法で上手くいかない場合には、次の「pre タグを使用する方法」をお試しいただくか、以下の表をご参照ください。</p><p>※ 改行コードとURLエンコードの対応表</p><table><thead><tr><th>改行コード</th><th>意味</th><th>エンコード後の文字列</th></tr></thead><tbody><tr><td>LF</td><td>Line Feed（改行）</td><td><code>%0A</code></td></tr><tr><td>CR</td><td>Carriage Return（復帰）</td><td><code>%0D</code></td></tr><tr><td>CRLF</td><td>Carriage Return + Line Feed</td><td><code>%0D%0A</code></td></tr></tbody></table><ul><li><code>decodeUriComponent(&#39;%0A&#39;)</code> → LF（改行）を取得</li><li><code>decodeUriComponent(&#39;%0D&#39;)</code> → CR（復帰）を取得</li><li><code>decodeUriComponent(&#39;%0D%0A&#39;)</code> → CRLF（Windows系改行）を取得</li></ul><hr><p><a id='anchor-line-break-pre'></a></p><h3 id="pre-タグを使用する方法"><a href="#pre-タグを使用する方法" class="headerlink" title="pre タグを使用する方法"></a>pre タグを使用する方法</h3><p><a id='anchor-line-break-pre-flow'></a></p><h4 id="フローの例-1"><a href="#フローの例-1" class="headerlink" title="フローの例"></a>フローの例</h4><p>今回の例では、以下の状況を想定しています。</p><p>トリガー：SharePoint リストにアイテムが追加されたとき<br>アクション１：作成  pre タグの追加<br>アクション２：作成した変数の内容を Teams に投稿する</p><p>イメージ図<br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/flow-image.png"></p><p>フローの全体図は以下の通りです。<br><br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/pre/pre-flow-outline.png"></p><p>ここから、フローの詳細を順を追って解説いたします。</p><h4 id="トリガー：SharePoint-リストにアイテムが追加されたとき-1"><a href="#トリガー：SharePoint-リストにアイテムが追加されたとき-1" class="headerlink" title="トリガー：SharePoint リストにアイテムが追加されたとき"></a>トリガー：SharePoint リストにアイテムが追加されたとき</h4><p>※こちらのトリガーはあくまでも一例となります。</p><p>下画像のように、ご自身の SharePoint リストをご指定ください。<br><br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/sharepoint.png"></p><h4 id="アクション１：作成-pre-タグの追加"><a href="#アクション１：作成-pre-タグの追加" class="headerlink" title="アクション１：作成 pre タグの追加"></a>アクション１：作成 pre タグの追加</h4><p>下画像のように、取得したい文字列に &lt;pre&gt; タグを追加してください。<br><br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/pre/create.png"></p><h4 id="アクション２：作成した変数を-Teams-に投稿する"><a href="#アクション２：作成した変数を-Teams-に投稿する" class="headerlink" title="アクション２：作成した変数を Teams に投稿する"></a>アクション２：作成した変数を Teams に投稿する</h4><p>上で作成した変数をメッセージに設定することで、改行が反映されるようになります。<br><br><img src="/blog/powerautomate/cloudflow-specialcharacters/line-break/pre/teams.png"></p><p><a id='anchor-line-break-pre-reason'></a></p><h4 id="なぜこれで解消できるのか-1"><a href="#なぜこれで解消できるのか-1" class="headerlink" title="なぜこれで解消できるのか"></a>なぜこれで解消できるのか</h4><p>HTML における &lt;pre&gt; タグは、整形済みのテキストとして表示するためのものになります。<br>これを使用することで、要素内に記述されたテキストの空白文字（スペース、タブ、改行）をまとめて反映できるようになります。</p><p>以上が、Power Automate で Teams コネクタを使用してメッセージを投稿する際、文字列の改行を反映する方法でございます。<br>お役に立てましたら幸いです。</p><p><a id='補足'></a></p><h1 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h1><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。バージョンアップによって UI の遷移などが若干異なる場合があります。その場合は画面の指示に従って進めてください。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの宮﨑です。&lt;br&gt;本記事では Power Automate で Teams コネクタを使用してメッセージを投稿する際、文字列の改行を反映する方法についてご案内いたします。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
  </entry>
  
  <entry>
    <title>Dataflow お問い合わせの際の情報取得手順</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerapps/helpful-information-for-dataflow-sr/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerapps/helpful-information-for-dataflow-sr/</id>
    <published>2025-08-20T00:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.539Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの宮﨑です。<br>本記事では、Dataflow のトラブルシューティングにあたって、必要となる情報の取得手順についてご案内いたします。</p><span id="more"></span><h1 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h1><ol><li><a href="#anchor-intro">概要</a></li><li><a href="#anchor-how-to-collect">情報取得手順詳細</a><ol><li><a href="#anchor-about-situation">事象の発生状況</a></li><li><a href="#anchor-about-dataflow-datasource">データフローのデータソースの状況</a></li><li><a href="#anchor-about-onpremise-data-gateway">オンプレミスデータゲートウェイの使用状況</a></li><li><a href="#anchor-about-dataflow-type">データフローの型</a></li><li><a href="#anchor-network-trace">エラー発生時のネットワークトレース</a></li><li><a href="#anchor-dataflow-table">Dataflow テーブル</a></li><li><a href="#anchor-dataflow-history">Dataflow の更新履歴ファイル（ csv ）</a></li><li><a href="#anchor-solution-export">ソリューションのエクスポート</a></li><li><a href="#anchor-user-account">ユーザーアカウント</a></li></ol></li><li> <a href="#%E8%A3%9C%E8%B6%B3">補足</a></li></ol><p><a id='anchor-intro'></a></p><h1 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h1><p>弊社サポートでは、お問い合わせを頂いた際のトラブルシューティングにおいて、お問い合わせの内容をもとに調査方針を立てております。<br>発生している事象の把握のため、発生している事象の切り分けや情報提供をお願いすることがあります。<br>本記事では、Dataflow に関するサポートサービスのお問い合わせの際の情報取得手順につきまして、以下の通りご案内いたします。</p><p><a id='anchor-how-to-collect'></a></p><h1 id="情報取得手順詳細"><a href="#情報取得手順詳細" class="headerlink" title="情報取得手順詳細"></a>情報取得手順詳細</h1><p><a id='anchor-about-situation'></a></p><h2 id="事象の発生状況"><a href="#事象の発生状況" class="headerlink" title="事象の発生状況"></a>事象の発生状況</h2><p>エラーがどのような状況下で発生するかお知らせください。<br>事象の発生条件を特定することで、問題の特定だけではなく弊社環境での再現調査においても有用な情報が得られます。<br>以下の情報をお知らせいただくことでより明確に事象を把握することができます。</p><ol><li>事象が発生するタイミング <ul><li>いつから発生しているか・現在も継続して発生しているか</li><li>どれぐらいの頻度で発生しているか</li><li>発生前後で何らかの変更を行ったか</li><li>特定の操作で発生するか</li></ul></li><li>事象の発生環境<ul><li>機種</li><li>OS およびバージョン</li><li>ブラウザ種類 ( Microsoft Edge、Google Chrome、Firefox など)</li><li>プラグインや拡張機能の有無</li></ul></li><li>特定の利用で発生する事象か<ul><li>特定の端末か？</li><li>事象が発生している端末と事象が発生していない端末の差異</li><li>特定のユーザーか？</li><li>事象が発生しているユーザーと事象が発生していないユーザーの差</li><li>および、両者のメールアドレスやユーザープリンシパル名</li></ul></li><li>Dataflow をご利用いただいている端末のネットワーク環境の差異<ul><li>プロキシ経由かどうか</li><li>Azure Express Route の利用有無</li><li>セキュリティ製品の利用有無</li></ul></li></ol><p><a id='anchor-about-dataflow-datasource'></a></p><h2 id="データフローのデータソースの状況"><a href="#データフローのデータソースの状況" class="headerlink" title="データフローのデータソースの状況"></a>データフローのデータソースの状況</h2><p>以下の手順で、事象が発生しているデータフローのデータソースについてご確認ください。<br>データフローの編集画面を開きます。</p><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/dataflow-edit.png"> </p><p>画面右下にて、「ダイアグラム ビュー」をご選択ください。 </p><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/dataflow-diagram.png"> </p><p>以下のような表示画面が出てきましたら、「ソース」にカーソルを合わせていただき、どのようなデータソースをご使用になっているかご教示ください。　<br>（下画像では例として CSV ファイルを使用しております。）</p><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/dataflow-datasource.png"> </p><p><a id='anchor-about-onpremise-data-gateway'></a></p><h2 id="オンプレミスデータゲートウェイの使用状況"><a href="#オンプレミスデータゲートウェイの使用状況" class="headerlink" title="オンプレミスデータゲートウェイの使用状況"></a>オンプレミスデータゲートウェイの使用状況</h2><p>事象が発生しているデータフローにおきまして、オンプレミスデータゲートウェイのご利用についてご確認ください。（データフロー作成時にご選択されていない場合は「していない」とお答えください。）</p><p><a id='anchor-about-dataflow-type'></a></p><h2 id="データフローの型"><a href="#データフローの型" class="headerlink" title="データフローの型"></a>データフローの型</h2><p>対象となるデータフローの「型」列の値についてご教示ください。</p><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/dataflow-type.png"> </p><p><a id='anchor-network-trace'></a></p><h2 id="エラー発生時のネットワークトレース"><a href="#エラー発生時のネットワークトレース" class="headerlink" title="エラー発生時のネットワークトレース"></a>エラー発生時のネットワークトレース</h2><div class="alert is-info"><p class="alert-title">Note</p><p>以下の手順は、データフロー編集時にエラーが起きた場合にご実行ください。</p></div><p>エラーが発生する作業を実施したときの、ブラウザのネットワークトレースのご取得をお願いいたします。<br><br>データフローの編集を行う直前でログの記録を開始し、エラーが表示されるまでの動作をログに収録いただけますようお願い申し上げます。</p><p>ログの取得方法については、お手数ですが以下の公開情報をご参照ください。<br>※手順内の1. 及び2.ステップ記録ツール」については実施いただかなくて大丈夫です。<br><a href="https://learn.microsoft.com/ja-jp/azure/azure-portal/capture-browser-trace#google-chrome-and-microsoft-edge-chromium">https://learn.microsoft.com/ja-jp/azure/azure-portal/capture-browser-trace#google-chrome-and-microsoft-edge-chromium</a></p><p><a id='anchor-dataflow-table'></a></p><h2 id="Dataflowテーブル"><a href="#Dataflowテーブル" class="headerlink" title="Dataflowテーブル"></a>Dataflowテーブル</h2><p>対象のデータフローの ID やクエリの詳細を確認させていただくために、Dataverse 内の Dataflow テーブルのご提供をお願いいたします。<br>以下の手順にて Dataflow テーブルを表示して、ご提供頂けますようお願いいたします。</p><ol><li>Power Apps ( <a href="https://make.powerapps.com/">https://make.powerapps.com/</a> ) を開き、[設定] – [開発者リソース] の順にクリックします。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/developer-resource.png"> </p><ol start="2"><li>[Web API エンドポイント] を取得し、末尾に /msdyn_dataflows を追加したリンクを作成します。<br><br>例 : <a href="https://org/">https://org</a> **bbca2a.api.crm7.dynamics.com/api/data/v9.2/msdyn_dataflows</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/webapi-endpoint.png"></p><ol start="3"><li>項番 2 にて作成したリンクにアクセスし、保存します。<br><br>※ 以下の画面は Edge での例となります。　<br>※ 保存時に、ファイル名に環境 ID などの記載いただけますと幸いです。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/access-link.png"></p><p><a id='anchor-dataflow-history'></a></p><h2 id="データフローの更新履歴ファイル（-csv-）"><a href="#データフローの更新履歴ファイル（-csv-）" class="headerlink" title="データフローの更新履歴ファイル（ csv ）"></a>データフローの更新履歴ファイル（ csv ）</h2><p>対象のデータフローの更新履歴ファイル（ csv ）を開き、該当する問題の実行履歴をダウンロードしていただけますようお願いいたします。<br><br>また、過去に成功した実行履歴がある場合は、そちらも併せてダウンロードの上、ご提供いただけますと幸いです。</p><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/dataflow-history.png"><br><img src="/blog/powerapps/helpful-information-for-dataflow-sr/dataflow-download.png"></p><p><a id='anchor-solution-export'></a></p><h2 id="ソリューションのエクスポート"><a href="#ソリューションのエクスポート" class="headerlink" title="ソリューションのエクスポート"></a>ソリューションのエクスポート</h2><p>以下の手順にて対象のデータフローをソリューションに含めていただき、アンマネージドにてエクスポートをいただけますようお願いいたします。（実装の内容やご利用のコネクタについて確認をさせていただきます。）</p><ol><li><p>Power Automate ( <a href="https://make.powerautomate.com/">https://make.powerautomate.com/</a> )を開き、「ソリューション」をご選択ください（環境名がデータフローのものと一致しているかご確認ください）。<br><br><img src="/blog/powerapps/helpful-information-for-dataflow-sr/pa-solution.png"></p></li><li><p>新しいソリューションをご作成ください。（既存のソリューションが存在する場合は、この項目を飛ばしてください。）</p></li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/new-solution.png"></p><ol start="3"><li>作成したソリューションを開き、対象のデータフローを追加します。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/select-dataflow.png"></p><ol start="4"><li>「マネージド」が「いいえ」になっているかをご確認いただいた上で、「追加」をご選択ください。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/add-dataflow.png"></p><ol start="5"><li>「ソリューションに戻る」をクリックします。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/back-to-solution.png"></p><ol start="6"><li>作成したソリューションを選択し、「ソリューションをエクスポート」をお選びください。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/export-solution.png"></p><ol start="7"><li>「エクスポート前画面」にて「次へ」をクリックした後、アンマネージドに切り替えてエクスポートしてください。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/unmanaged-export.png"></p><ol start="8"><li>しばらくするとエクスポートが完了しますので、ダウンロードして .zip フォルダをご取得ください。</li></ol><p><img src="/blog/powerapps/helpful-information-for-dataflow-sr/download.png"></p><p><a id='anchor-user-account'></a></p><h2 id="ユーザーアカウント"><a href="#ユーザーアカウント" class="headerlink" title="ユーザーアカウント"></a>ユーザーアカウント</h2><p>対象のデータフロー所有者のユーザーアカウントをご教示ください。<br>もしご不明の場合は、対象のデータフローが含まれているソリューションをご選択いただき、<br>下記画像の通りに表示名がございますので、そちらをご教示いただければ幸いです。<br>※所有者の UPN もしくはオブジェクト ID がわかる場合は、そちらも併せてご提供ください。</p><h2 id=""><a href="#" class="headerlink" title=""></a><img src="/blog/powerapps/helpful-information-for-dataflow-sr/user-account.png"></h2><p><a id='補足'></a></p><h1 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h1><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。バージョンアップによって UI の遷移などが若干異なる場合があります。その場合は画面の指示に従って進めてください。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの宮﨑です。&lt;br&gt;本記事では、Dataflow のトラブルシューティングにあたって、必要となる情報の取得手順についてご案内いたします。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="サポートサービスのご利用について" scheme="https://jpdynamicscrm.github.io/blog/categories/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E3%81%94%E5%88%A9%E7%94%A8%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/"/>
    
    <category term="Dataflow" scheme="https://jpdynamicscrm.github.io/blog/categories/Dataflow/"/>
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Apps/"/>
    
    <category term="情報採取" scheme="https://jpdynamicscrm.github.io/blog/tags/%E6%83%85%E5%A0%B1%E6%8E%A1%E5%8F%96/"/>
    
    <category term="お問い合わせ全般" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%81%8A%E5%95%8F%E3%81%84%E5%90%88%E3%82%8F%E3%81%9B%E5%85%A8%E8%88%AC/"/>
    
    <category term="Dataflow" scheme="https://jpdynamicscrm.github.io/blog/tags/Dataflow/"/>
    
  </entry>
  
  <entry>
    <title>Copilot Studio エージェントの作成を制御する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/how-to-block-access-mcsportal/"/>
    <id>https://jpdynamicscrm.github.io/blog/how-to-block-access-mcsportal/</id>
    <published>2025-08-01T04:30:00.000Z</published>
    <updated>2025-10-23T09:21:14.523Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。Power Platform サポートチームの 網野 です。<br>今回は Copilot Studio でエージェントを作成できるユーザーを制御する方法をご案内します。</p><span id="more"></span><h2 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h2><p>本記事では Copilot Studio でエージェントを作成できるユーザーを制御する方法をご案内致します。</p><p>ご留意点として、Copilot Studio は 2025 年 8 月現在、早いスピードで日々機能開発が進んでいます。そのため、実際のご利用いただく際は必ず最新の公開情報を参照していただけますようお願い申し上げます。</p><h2 id="作成を制御する方法"><a href="#作成を制御する方法" class="headerlink" title="作成を制御する方法"></a>作成を制御する方法</h2><p>エージェントの作成を制御するためには、<a href="https://learn.microsoft.com/en-us/microsoft-copilot-studio/billing-licensing#copilot-studio-use-rights-included-with-microsoft-365-copilot-license">Copilot Studio へのアクセス権</a>と、エージェントを作成する環境への<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=web#assign-environment-security-roles">セキュリティロール</a>が必要です。</p><h3 id="アクセス権"><a href="#アクセス権" class="headerlink" title="アクセス権"></a>アクセス権</h3><p>Copilot Studio ポータルにアクセスするためには、ユーザーに以下のいずれかのライセンスまたはロールが必要です。<br>※以下のいずれかに該当するとアクセスできるようになります。</p><ul><li>Copilot Studio ユーザーライセンス</li><li>Copilot Studio 試用版ライセンス</li><li>Microsoft 365 Copilot ライセンス</li><li>Power Platform 管理センター テナント設定の「Copilot Studio 作成者」ロール</li></ul><h3 id="セキュリティロール"><a href="#セキュリティロール" class="headerlink" title="セキュリティロール"></a>セキュリティロール</h3><p>エージェントを作成するためには、エージェントを作成する環境に対してセキュリティロールが必要となります。<br>ご要件に合わせてユーザーにセキュリティロールを付与してください。</p><p>例）</p><ul><li>環境作成者</li><li>システムカスタマイザー</li><li>システム管理者</li></ul><h2 id="アクセス権の詳細"><a href="#アクセス権の詳細" class="headerlink" title="アクセス権の詳細"></a>アクセス権の詳細</h2><h3 id="Copilot-Studio-ユーザーライセンス"><a href="#Copilot-Studio-ユーザーライセンス" class="headerlink" title="Copilot Studio ユーザーライセンス"></a>Copilot Studio ユーザーライセンス</h3><p>Copilot Studio メッセージパックに含まれるライセンスで、<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing?tabs=web#assign-licenses-to-users">Microsoft 365 管理センター等から付与</a>することができます。<br>Copilot Studio の使用権が含まれています。</p><h3 id="Copilot-Studio-試用版ライセンス"><a href="#Copilot-Studio-試用版ライセンス" class="headerlink" title="Copilot Studio 試用版ライセンス"></a>Copilot Studio 試用版ライセンス</h3><p><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/sign-up-individual">ユーザーがセルフサービスサインアップで取得できる</a>期間限定のライセンスです。<br>有償ライセンスを購入いただく前のお試し用として、Copilot Studio ユーザーライセンスと同じ機能が利用できます。</p><h3 id="Microsoft-365-Copilot-ライセンス"><a href="#Microsoft-365-Copilot-ライセンス" class="headerlink" title="Microsoft 365 Copilot ライセンス"></a>Microsoft 365 Copilot ライセンス</h3><p>Copilot Studio を通じて <a href="https://learn.microsoft.com/ja-jp/copilot/microsoft-365/microsoft-365-copilot-overview">Microsoft 365 Copilot</a> を拡張することができるため、Microsoft 365 Copilot ライセンスを持つユーザーは Copilot Studio を利用することができます。  </p><p><a href="https://learn.microsoft.com/ja-jp/copilot/microsoft-365/microsoft-365-copilot-setup#step-2---provision-microsoft-365-copilot-licenses">Microsoft 365 管理センター等から付与</a>することができます。　<br>Copilot Studio だけなく、Microsoft 365 Copilot の使用権が含まれています。</p><div class="alert is-important"><p class="alert-title">重要</p><p>Copilot Studio にアクセスさせるためには、「Copilot Studio in Copilot for M365」サービスを有効にする必要があります。</p><p><img src="/blog/how-to-block-access-mcsportal/m365copilot.png"></p></div><h3 id="Power-Platform-管理センター-テナント設定の「Copilot-Studio-作成者」ロール"><a href="#Power-Platform-管理センター-テナント設定の「Copilot-Studio-作成者」ロール" class="headerlink" title="Power Platform 管理センター テナント設定の「Copilot Studio 作成者」ロール"></a>Power Platform 管理センター テナント設定の「Copilot Studio 作成者」ロール</h3><p>従量課金環境のみを利用して Copilot Studio を利用するユーザー様向けに用意された機能が「Copilot Studio 作成者」機能です。<br>他のユーザーに付与するライセンスと異なり、ユーザーごとにライセンスを付与する必要はありません。<br>Copilot Studio でエージェントを作成したいユーザーをセキュリティグループに追加し、Copilot Studio へのアクセスを許可します。</p><p>作成手順</p><ol><li>Azure ポータルでセキュリティグループを作成します。</li><li>Copilot Studio へのアクセスを許可したいユーザーをセキュリティグループに追加します。<br><img src="/blog/how-to-block-access-mcsportal/securitygroup.png"></li><li><a href="https://admin.powerplatform.microsoft.com/manage/tenantsettings">Power Platform 管理センターのテナント設定</a>を開きます。</li><li>「Copilot Studio 作成者」を選択し、作成したセキュリティグループを設定します。<br><img src="/blog/how-to-block-access-mcsportal/tenant_setting.png"></li></ol><h2 id="よくある質問"><a href="#よくある質問" class="headerlink" title="よくある質問"></a>よくある質問</h2><h3 id="テナント設定の「Copilot-Studio-作成者」に設定したセキュリティグループに属さないユーザーは、Copilot-Studio-にアクセスできないようになりますか。"><a href="#テナント設定の「Copilot-Studio-作成者」に設定したセキュリティグループに属さないユーザーは、Copilot-Studio-にアクセスできないようになりますか。" class="headerlink" title="テナント設定の「Copilot Studio 作成者」に設定したセキュリティグループに属さないユーザーは、Copilot Studio にアクセスできないようになりますか。"></a>テナント設定の「Copilot Studio 作成者」に設定したセキュリティグループに属さないユーザーは、Copilot Studio にアクセスできないようになりますか。</h3><p>いいえ、「Copilot Studio 作成者」に設定したセキュリティグループに属さないユーザーも、ユーザーライセンスを持っていれば Copilot Studio にアクセスできます。</p><h3 id="Copilot-Studio-にアクセスできないユーザーは-Copilot-Studio-で作成したエージェントを利用することができますか"><a href="#Copilot-Studio-にアクセスできないユーザーは-Copilot-Studio-で作成したエージェントを利用することができますか" class="headerlink" title="Copilot Studio にアクセスできないユーザーは Copilot Studio で作成したエージェントを利用することができますか"></a>Copilot Studio にアクセスできないユーザーは Copilot Studio で作成したエージェントを利用することができますか</h3><p>はい、利用できます。エージェントの利用者は、Copilot Studio にアクセスできる必要はありません。<br>ただし、Teams やカスタム Web サイトなど、エージェントを公開した場所にアクセスできる必要がございます。<br><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing?tabs=web">https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing?tabs=web</a><br><img src="/blog/how-to-block-access-mcsportal/c2licensing.png"></p><h3 id="環境ごとにエージェントの作成を制限することはできますか"><a href="#環境ごとにエージェントの作成を制限することはできますか" class="headerlink" title="環境ごとにエージェントの作成を制限することはできますか"></a>環境ごとにエージェントの作成を制限することはできますか</h3><p>はい、エージェントを作成させたい環境にのみセキュリティロールを付与することで、環境ごとにエージェントの作成を制限することができます。<br>なお例外として既定環境はすべてのユーザーに「環境作成者」ロールが付与されるため、セキュリティロールで制御することはできません。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは。Power Platform サポートチームの 網野 です。&lt;br&gt;今回は Copilot Studio でエージェントを作成できるユーザーを制御する方法をご案内します。&lt;/p&gt;</summary>
    
    
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/categories/Microsoft-Copilot-Studio/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Power Virtual Agents" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Virtual-Agents/"/>
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/tags/Microsoft-Copilot-Studio/"/>
    
  </entry>
  
  <entry>
    <title>Dataverse Capacity について</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/Dataverse-Capacity/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/Dataverse-Capacity/</id>
    <published>2025-05-01T12:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.715Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの吉永です。  </p><p>本記事では Dataverse ストレージにおけるライセンスごとに付与される容量の考え方についてご紹介させて頂きます。<br><br>なお、Dataverse ストレージの基本的な考え方や Dataverse ストレージ超過時の影響などは、過去に公開させて頂いた後述の記事をご参考にしていただけますと幸いです。<br><br>参考情報 : <a href="https://jpdynamicscrm.github.io/blog/powerplatform/About-Dataverse-Storage/">Dataverse のストレージ容量について</a></p><h2 id="content">目次</h2>  1. [はじめに](#anchor-begin)2. [テナントごとに付与されるストレージ容量のライセンスの概要](#anchor-dataverse-storeage)3. [購入いただいたライセンスの種類によって決定する既定の容量](#anchor-default-storage)4. [ライセンスやアドオンの購入数に応じて付与される追加容量](#anchor-addon-storage)5. [おわりに](#anchor-finish)<div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、 本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。  </p></div><p><a id="anchor-begin"></a></p><h2 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h2><p>Dataverse では各環境でご利用される容量を合計したものとをテナント全体の容量として管理する仕組みとなっております。<br>なお、実際のご利用にあたっては、ご契約いただいているライセンスの数や種類に応じて、テナントに付与される容量内でご利用いただく必要がございます。</p><p>実際にテナントに割り当てられている以上の容量をご利用いただいている場合でも、環境の利用が停止するといったことはございませんが、新たな環境の作成などが行えなくなるなど管理上の影響が発生するため、容量の不足が発生する場合については、容量の削減やライセンスの追加購入を検討いただく必要がございます。</p><blockquote><p>[本記事でご紹介する内容について]<br><br>Dataverse の容量については、従量課金を利用しているかどうかによって動作が一部異なります。<br><br>本記事では「従量課金」をご利用いただいていない場合のシナリオを元にご紹介させて頂いております。<br>従量課金制プランをご利用いただいている場合については、以下のドキュメントを合わせてご確認いただけますと幸いです。<br><br>参考情報 : <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/pay-as-you-go-meters?tabs=image#dataverse-capacity-meter">Dataverse 容量メーター</a></p></blockquote><p><a id='anchor-dataverse-storeage'></a></p><h2 id="テナントごとに付与される容量のライセンスの概要"><a href="#テナントごとに付与される容量のライセンスの概要" class="headerlink" title="テナントごとに付与される容量のライセンスの概要"></a>テナントごとに付与される容量のライセンスの概要</h2><p>Dataverse で利用可能な容量はご契約いただくライセンスの数や種類によって決定いたします。</p><p>なお、容量が割り当てられるかどうかや、割り当てられる場合の容量はライセンスによって異なるため、詳細についてはライセンスガイドをご確認頂きたくと存じますが、ライセンスのご契約によって割り当てられる容量には 2 種類の考え方がございます。</p><p>1.契約いただいたライセンスの種類によって決定されるテナント「既定の容量」<br><br>2.ライセンスやアドオンの購入数に応じて付与される「追加の容量」</p><blockquote><p>ライセンスガイドについては、以下のリンクからダウンロード可能でございます。<br><br>参考情報 : <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/pricing-billing-skus">Microsoft Power Platform のライセンスの概要</a></p></blockquote><p>つまり、Dataverse では以下の計算に基づきテナントに付与される容量が決定いたします。</p><p>・「ライセンスの種類によって決定する<font color="green"> 既定の容量」</font>  +  「ライセンスごとに追加される<font color="blue"> 追加の容量」 </font>  =  「テナントに付与される容量」</p><p><a id='anchor-default-storage'></a></p><h2 id="購入いただいたライセンスの種類によって決定する既定の容量"><a href="#購入いただいたライセンスの種類によって決定する既定の容量" class="headerlink" title="購入いただいたライセンスの種類によって決定する既定の容量"></a>購入いただいたライセンスの種類によって決定する既定の容量</h2><p>Dataverese ではご購入いただくライセンスの種類によって、テナントに付与される「既定の容量」が異なります。<br><br>既定の容量が付与されるライセンスの種類としては、主に以下のような製品に関するライセンスがございます。<br><br>・Power Apps <br><br>・Power Automate <br><br>・Copilot Studio <br><br>・Power Pages <br><br>・Dynamics <br></p><p>なお、具体的なライセンス例ごとに割り当てられる「既定の容量」は以下の通りとなります。<br><br><img src="/blog/powerplatform/Dataverse-Capacity/default%20capacity.png"></p><p>「既定の容量」はご契約いただいたライセンスごとの「既定の容量の合計値」ではなく、ご契約いただいたライセンスごとに定められた「既定の容量」の内、最も大きい容量が割り当てられる動作となります。</p><p>上記の動作について、具体的なシナリオ例についても合わせてご紹介させて頂きます。</p><h3 id="参考シナリオ"><a href="#参考シナリオ" class="headerlink" title="参考シナリオ"></a>参考シナリオ<br></h3><blockquote><p>購入ライセンス<br><br>・Power Apps Premium<br><br>・Power Apps Per App<br><br>・Copilot Studio<br></p></blockquote><p>上記のシナリオの場合、実際に適用される「既定の容量」は以下の通りとなります。<br><br><img src="/blog/powerplatform/Dataverse-Capacity/capacity-sample.png"></p><p>上記のシナリオでは、3 種類のライセンスをご契約いただいており、ライセンスごとに「既定の容量」が異なります。<br><br>ただし、テナントに割り当てられる「既定の容量」は、各ライセンスごとの「既定の容量」の合計値ではなく、最も大きい「既定の容量」が採用されます。<br><br>このため、本シナリオでは Power Apps Premium によって割り当てられる「既定の容量」がテナントに適用されます。</p><p><a id='anchor-addon-storage'></a></p><h2 id="ライセンスやアドオンの購入数に応じて付与される追加容量"><a href="#ライセンスやアドオンの購入数に応じて付与される追加容量" class="headerlink" title="ライセンスやアドオンの購入数に応じて付与される追加容量"></a>ライセンスやアドオンの購入数に応じて付与される追加容量</h2><p>Dataverse の容量は先述させて頂きました「既定の容量」とは別に、ライセンスやアドオンの購入数に応じてテナントに付与される追加容量がございます。<br><br>こちらは既定の容量とは異なり、購入いただいたライセンスとアドオンの数に応じて、付与される容量が変動する仕組みとなっております。<br><br>このため、ご契約いただくライセンスの数が多いほど、テナントに付与されるストレージ量は増加します。</p><p>なお、ライセンスの種類によって、ストレージ量が付与されるかどうか、どの程度のサイズが付与されるかが異なり、具体的な例として以下のような違いがございます。<br><br><img src="/blog/powerplatform/Dataverse-Capacity/add%20capacity.png"></p><p>また、購入いただいたライセンスに応じて付与される追加容量とは別に、ストレージ量の追加を目的として購入いただくアドオンがございます。<br><br>参考情報 : <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/add-storage#purchase-dataverse-capacity-add-on">テナントに Microsoft Dataverse 容量を追加</a></p><p>このアドオンは「データベース」「ファイル」「ログ」とストレージの種類ごとに購入いただくことが可能であり、いずれも 1 GB 単位で購入いただくことが可能です。<br><br>このため、お客様のテナントでストレージ量の不足が発生した場合については、ライセンスを追加でご契約いただくか、アドオンをご契約いただくことで、付与されるストレージ量を増加頂くことが可能です。</p><p>上記の動作について、具体的なシナリオ例についても合わせてご紹介させて頂きます。</p><h3 id="参考シナリオ-1"><a href="#参考シナリオ-1" class="headerlink" title="参考シナリオ"></a>参考シナリオ<br></h3><blockquote><p>購入ライセンス<br><br>・Power Apps Premium x 10<br><br>・Power Apps Per App x 20<br><br>・Copilot Studio x 5<br><br>・データベース キャパシティ アドオン (1 GB) x 10<br></p></blockquote><p>上記のシナリオの場合、実際に適用される「追加の容量」は、データベース、ファイル、ログごとに以下の通りとなります。<br></p><p>データベースの場合、「2.5 GB + 10 GB + 0 GB + 10 GB」で 22.5 GB<br><br><img src="/blog/powerplatform/Dataverse-Capacity/database.png"></p><p>ファイルの場合、「20 GB + 8 GB + 0 GB」で 28 GB<br><br><img src="/blog/powerplatform/Dataverse-Capacity/file.png"></p><p>ログの場合、「0 GB + 0 GB + 0 GB」で 0 GB<br><br><img src="/blog/powerplatform/Dataverse-Capacity/log.png"></p><p><a id='anchor-finish'></a></p><h2 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h2><p>本記事にてご説明させて頂きましたように Dataverse のキャパシティについては、ご契約いただいておりますライセンスの種類や数によって、利用可能なストレージ量が異なります。</p><p>実際にお客様のテナントにおいて、どの程度の容量が割り当てられているかという点については、Power Platforom 管理センターから確認頂くことが可能です。<br><br><br>参考情報 : <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/view-self-service-capacity">セルフサービス ストレージ容量の表示</a></p><!-- ![alt text](image.png) --><p>このため、お手元での計算と実際に割り当てられている容量が一致しない場合など、ご不明な点や、もし具体的にお困りの点などがございましたら、弊社サポート一同にてお待ち申し上げておりますので、ぜひお気軽にお問合せください。 </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの吉永です。  &lt;/p&gt;
&lt;p&gt;本記事では Dataverse ストレージにおけるライセンスごとに付与される容量の考え方についてご紹介させて頂きます。&lt;br&gt;&lt;br&gt;なお、Dataverse ストレージの基本的な考え方</summary>
      
    
    
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/categories/Dataverse/"/>
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/tags/Dataverse/"/>
    
    <category term="Dataverse ストレージ" scheme="https://jpdynamicscrm.github.io/blog/tags/Dataverse-%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8/"/>
    
  </entry>
  
  <entry>
    <title>Copilot Studio のエージェントを Teams に公開する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/copilotstudio/copilot-studio-teams/"/>
    <id>https://jpdynamicscrm.github.io/blog/copilotstudio/copilot-studio-teams/</id>
    <published>2025-04-22T07:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.475Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの竹内です。<br>本記事では Copilot Studio (旧称 Power Virtual Agents) で作成したエージェントを Microsoft Teams (以降 Teams) に公開する方法についてご案内致します。</p><span id="more"></span><ul><li><a href="#%E7%9B%AE%E6%AC%A1">目次</a></li><li><a href="#1-%E6%A6%82%E8%A6%81">1. 概要</a></li><li><a href="#2-web-%E7%89%88-copilot-studio-%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92-teams-%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2. Web 版 Copilot Studio で作成したエージェントを Teams で利用する</a><ul><li><a href="#2-1-%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B">2-1. エージェントを公開する</a></li><li><a href="#2-2-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B">2-2. 他のユーザーと共有する</a></li><li><a href="#2-3-teams-%E3%81%A8-microsoft-365-copilot-%E3%83%81%E3%83%A3%E3%83%8D%E3%83%AB%E3%81%AB%E6%8E%A5%E7%B6%9A%E3%81%99%E3%82%8B">2-3. Teams と Microsoft 365 Copilot チャネルに接続する</a></li><li><a href="#2-4-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%8C-teams-%E3%81%A7%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2-4. 他のユーザーが Teams でエージェントを利用する</a><ul><li><a href="#2-4-1-%E3%83%AA%E3%83%B3%E3%82%AF%E3%81%AE%E5%85%B1%E6%9C%89">2-4-1. リンクの共有</a></li><li><a href="#2-4-2-teams-%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B9%E3%83%88%E3%82%A2%E3%81%AB%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B">2-4-2. Teams アプリストアに公開する</a></li><li><a href="#2-4-3-zip-%E3%81%A8%E3%81%97%E3%81%A6%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89">2-4-3. zip としてダウンロード・アップロード</a></li></ul></li><li><a href="#2-5-teams-%E3%83%81%E3%83%BC%E3%83%A0%E3%81%AB%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B">2-5. Teams チームにエージェントをインストールする</a></li></ul></li><li><a href="#3-teams-%E7%89%88-copilot-studio-%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92-teams-%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">3. Teams 版 Copilot Studio で作成したエージェントを Teams で利用する</a><ul><li><a href="#3-1-%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B">3-1. エージェントを公開する</a></li><li><a href="#3-2-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B">3-2. 他のユーザーと共有する</a></li><li><a href="#3-3-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%8C-teams-%E3%81%A7%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">3-3. 他のユーザーが Teams でエージェントを利用する</a></li></ul></li><li><a href="#%E8%A3%9C%E8%B6%B3">補足</a></li></ul><p><a id='1-概要'></a></p><h1 id="1-概要"><a href="#1-概要" class="headerlink" title="1. 概要"></a>1. 概要</h1><p>今回はよくあるお問い合わせとして、Copilot Studio で作成したエージェントを Teams に公開する方法についてご案内いたします。<br>この方法では Copilot Studio の設定だけでなく、Teams 管理センターなどの設定も必要となります。<br>そのため、一部 Teams 管理センターにアクセスできる権限がある管理者にてご実行いただく必要がある操作もございますので、ご留意ください。<br>※本稿では Microsoft 365 Copilot への公開方法・ご利用方法については扱わず、 Teams でのご利用方法についてご案内いたします。  </p><div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Teams 管理者様がご確認ください&gt;</p><p>Teams 管理センターでアクセス許可ポリシーを設定している場合、事前にカスタムアプリのアクセスを許可するようポリシーを設定する必要がございます。</p><p>本記事執筆時点で、アクセス許可ポリシーからアプリ中心の管理への移行が推奨されておりますので、本記事では詳細は割愛します。</p><p>アクセス許可ポリシーの設定方法等については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoftteams/teams-app-permission-policies">Microsoft Teams のアプリのアクセス許可ポリシーを管理する - Microsoft Teams | Microsoft Learn</a>  </p></div><p><a id='2-web-版-copilot-studio-で作成したエージェントを-teams-で利用する'></a></p><h1 id="2-Web-版-Copilot-Studio-で作成したエージェントを-Teams-で利用する"><a href="#2-Web-版-Copilot-Studio-で作成したエージェントを-Teams-で利用する" class="headerlink" title="2. Web 版 Copilot Studio で作成したエージェントを Teams で利用する"></a>2. Web 版 Copilot Studio で作成したエージェントを Teams で利用する</h1><p><img src="/blog/copilotstudio/copilot-studio-teams/web_copilot_studio_overview.png">  </p><p>※Dataverse for Teams 環境のボットを Web 版で作成することはサポートされていません。  </p><p><a id='2-1-エージェントを公開する'></a></p><h2 id="2-1-エージェントを公開する"><a href="#2-1-エージェントを公開する" class="headerlink" title="2-1. エージェントを公開する"></a>2-1. エージェントを公開する</h2><p>  エージェントを作成、編集した場合、そのエージェントを他の人が使えるようにするため、まずは公開する必要があります。<br>  作成、編集したエージェントを開き、画面右上の「公開」ボタンよりエージェントを公開してください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/publish.png">  </p><p>  下記のようなロード画面が表示され、しばらくすると公開が完了します。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/publishing.png">  </p><p><a id='2-2-他のユーザーと共有する'></a></p><h2 id="2-2-他のユーザーと共有する"><a href="#2-2-他のユーザーと共有する" class="headerlink" title="2-2. 他のユーザーと共有する"></a>2-2. 他のユーザーと共有する</h2><p>  作成したエージェントを、他のユーザーが利用できるようにします。<br>  他のユーザーとエージェントを共有するには 2 つの方法がございます。  </p><ol><li>セキュリティグループ、組織に利用者として共有する（エージェントと会話するユーザーとして）（<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=web#share-an-agent-for-chat">設定方法はこちら</a>）<div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Power Platform 管理者様がご確認ください&gt;</p><p>利用者としてエージェントを共有する場合、利用者のユーザーは Power Platform 環境のメンバーである必要はありません。</p><p>また、セキュリティロールを割り当てる必要もありません。</p><p>ただし、エージェントを通して環境内のデータやその他データソースへアクセスする場合には、別途データソースへのアクセス権限をユーザーに割り当てる必要があります。</p><p>一方、エージェントにナレッジとして直接追加されたファイルへアクセスする際には、アクセス権限やセキュリティロールを割り当てる必要はありません。  </p></div></li><li>ユーザーに共同編集者として共有する（エージェントと会話、およびエージェントを編集、管理するユーザーとして）（<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=web#share-an-agent-for-collaborative-authoring">設定方法はこちら</a>）  <div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Power Platform 管理者様がご確認ください&gt;</p><p>共同編集者としてエージェントを共有する場合、共有先のユーザーは環境のメンバーであり、環境作成者以上のセキュリティロールを持っている必要があります。</p><p>詳細については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=web#insufficient-environment-permissions">他のユーザーとエージェントを共有する - Microsoft Copilot Studio | Microsoft Learn</a></p></div></li></ol><p><a id='2-3-teams-チャネルに接続する'></a></p><h2 id="2-3-Teams-と-Microsoft-365-Copilot-チャネルに接続する"><a href="#2-3-Teams-と-Microsoft-365-Copilot-チャネルに接続する" class="headerlink" title="2-3. Teams と Microsoft 365 Copilot チャネルに接続する"></a>2-3. Teams と Microsoft 365 Copilot チャネルに接続する</h2><p>  次に、公開したエージェントを Teams で使えるようにするため、Teams と Microsoft 365 Copilot チャネルと接続します。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>&lt;Teams管理者様がご確認ください&gt;</p><p>Teams でエージェントを利用するためには、Teams 管理センターからカスタムアプリの使用を許可する必要があります。</p><p>具体的な設定方法は下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoftteams/manage-power-platform-apps">Microsoft Teams 管理センターで Microsoft Power Platform アプリを管理する - Microsoft Teams | Microsoft Learn</a>  </p></div><div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Power Platform 管理者様がご確認ください&gt;</p><p>Power Platform 管理センターより Teams チャネルへの接続を許可するよう DLP を設定しておく必要があります。</p><p>下記の「Microsoft Teams + M365 Channel in Copilot Studio」のコネクタを許可してください。</p><p><img src="/blog/copilotstudio/copilot-studio-teams/DLP_teams_m365_channel.png"></p><p>なお、Copilot Studio に関する DLP の詳細については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-data-loss-prevention#copilot-studio-connectors">エージェントのデータ損失防止ポリシーを構成する - Microsoft Copilot Studio | Microsoft Learn</a>  </p></div><p>  該当のエージェントを開き、画面上部の「チャネル」タブより「Microsoft Teams と Microsoft 365 Copilot」をご選択ください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/select_channel.png">  </p><p>  チャネルが追加されると下記の画面が表示されます。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_preview.png">  </p><p>  「詳細の編集」より Teams に公開する際のエージェントの外観等を編集することが可能です。<br>  また、エージェントを Teams チームに追加することの許可などもここから可能です。<br>  エージェントを Teams チームに追加する詳細については、<a href="#2-5-teams-%E3%83%81%E3%83%BC%E3%83%A0%E3%81%AB%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B">2-5 項</a>で後述します。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_edit_detail.png">    </p><p>  「Teams で エージェント を表示する」を選択すると、Teams が開き、下記の画面が表示されます。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_add.png">    </p><p>  「追加」を選択することで、Teams でエージェントを利用することが可能になります。<br>  ここまでの操作で、編集権限を持つユーザーだけが Teams で該当エージェントを使える状態となります。</p><div class="alert is-warning"><p class="alert-title">警告</p><p>Teams 管理センターの設定が適切に行われていない場合、下画像のようなエラーが表示されることがあります。</p><p><img src="/blog/copilotstudio/copilot-studio-teams/error_not_found.png"></p><p>&lt;Teams管理者様がご確認ください&gt;</p><p>Teams 管理センターの設定をご確認ください。</p><p>具体的な設定方法は下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoftteams/manage-power-platform-apps">Microsoft Teams 管理センターで Microsoft Power Platform アプリを管理する - Microsoft Teams | Microsoft Learn</a>  </p></div><p><a id='2-4-他のユーザーが-teams-でエージェントを利用する'></a></p><h2 id="2-4-他のユーザーが-Teams-でエージェントを利用する"><a href="#2-4-他のユーザーが-Teams-でエージェントを利用する" class="headerlink" title="2-4. 他のユーザーが Teams でエージェントを利用する"></a>2-4. 他のユーザーが Teams でエージェントを利用する</h2><p>  他のユーザーが Teams でこのエージェントと会話したり、エージェントにアクセスしたりできるようにするには、対象エージェントを他のユーザーが Teams で追加登録できるようにする作業が必要となります。<br>  その追加登録を可能にするための作業として、主に 3 つの方法があります。  </p><ol><li>リンクの共有</li><li>Teams アプリストアに公開する</li><li>zip としてダウンロード・アップロード</li></ol><p>  Copilot Studio 「チャネル」タブより「Microsoft Teams と Microsoft 365 Copilot」を選択すると、下記の画面が表示されます。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_preview.png">  </p><p>  他のユーザーがこのエージェントを利用できるようにするには、「可用性オプション」をご選択ください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_availability.png">  </p><p>  以降、3 つの方法それぞれの手順等について説明します。  </p><p><a id='2-4-1-リンクの共有'></a></p><h3 id="2-4-1-リンクの共有"><a href="#2-4-1-リンクの共有" class="headerlink" title="2-4-1. リンクの共有"></a>2-4-1. リンクの共有</h3><p>  まず、リンクの共有によって共有する方法です。<br>  この方法は事前に共有したいユーザーを入れたセキュリティグループに、エージェント自体を共有しておく必要があります。<br>  共有の方法については <a href="#2-2-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B">2-2 項</a> をご参照ください。  </p><p>  下記の画面で「リンクのコピー」を選択します。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/share_link.png">  </p><p>  すると、クリップボートに Teams でエージェントを利用するための URL がコピーされます。<br>  エージェントにアクセス権がある他ユーザーがその URL を入力すると、下記画面が表示されます。<br>  「追加」を選択することで、Teams でエージェントを利用することが可能となります。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_add.png">  </p><p>  この方法の詳細については下記の公開情報も合わせてご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#share-a-link-so-others-can-install-a-copilot">Teams と Microsoft 365 Copilot 向けのエージェントを接続し、構成する - Microsoft Copilot Studio | Microsoft Learn</a>  </p><div class="alert is-warning"><p class="alert-title">警告</p><p>エージェントが共有されていないユーザーが、リンクにアクセスした場合、下画像のエラーが表示されます。</p><p><img src="/blog/copilotstudio/copilot-studio-teams/error_not_found.png"></p><p><a href="#2-2-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B">2-2 項</a> をご参照のうえ、適切にエージェントが共有されいているかご確認ください。  </p></div><p><a id='2-4-2-teams-アプリストアに公開する'></a></p><h3 id="2-4-2-Teams-アプリストアに公開する"><a href="#2-4-2-Teams-アプリストアに公開する" class="headerlink" title="2-4-2. Teams アプリストアに公開する"></a>2-4-2. Teams アプリストアに公開する</h3><p>  次に、Teams アプリストアに公開する方法です。<br>  ※Teams チャネルに接続して公開する場合、Microsoft 認証 (Entra ID 認証) を利用していないと Teams アプリストアに表示できません。  </p><p>  Teams アプリストアに公開するには下記の二つの公開範囲別の方法があります。<br>  ご要件の公開範囲に応じた設定を行ってください。  </p><ol><li>共有ユーザーに表示する（<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#show-to-shared-users">設定方法はこちら</a>）</li><li>組織に表示する（<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#show-to-the-organization">設定方法はこちら</a>）</li></ol><p>  なお、この手順全体の詳細については下記の公開情報をご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#show-an-agent-in-the-teams-app-store">Teams と Microsoft 365 Copilot 向けのエージェントを接続し、構成する - Microsoft Copilot Studio | Microsoft Learn</a>  </p><p>  <img src="/blog/copilotstudio/copilot-studio-teams/show_in_teams_app_store.png">  </p><p><a id='2-4-3-zip-としてダウンロードアップロード'></a></p><h3 id="2-4-3-zip-としてダウンロード・アップロード"><a href="#2-4-3-zip-としてダウンロード・アップロード" class="headerlink" title="2-4-3. zip としてダウンロード・アップロード"></a>2-4-3. zip としてダウンロード・アップロード</h3><p>  この方法は .zip ファイルとしてエージェントをダウンロードし、直接マニフェストファイルを編集したり、他ユーザーと共有してアップロードする方法となります。</p><p>  ダウンロードするには、下記の画面で「.zip のダウンロード」を選択します。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/download_upload_zip.png">  </p><p>  ダウンロードしたファイルを Teams にアップロードして利用する方法については下記の公開情報をご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoftteams/platform/concepts/deploy-and-publish/apps-upload">カスタム アプリをアップロードする - Teams | Microsoft Learn</a></p><p>  なお、この方法の詳細については下記の公開情報も合わせてご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#download-the-teams-app-manifest-for-an-agent-advanced">Teams と Microsoft 365 Copilot 向けのエージェントを接続し、構成する - Microsoft Copilot Studio | Microsoft Learn</a>  </p><p><a id='2-5-teams-チームにエージェントをインストールする'></a></p><h2 id="2-5-Teams-チームにエージェントをインストールする"><a href="#2-5-Teams-チームにエージェントをインストールする" class="headerlink" title="2-5. Teams チームにエージェントをインストールする"></a>2-5. Teams チームにエージェントをインストールする</h2><p>  Teams 内のチームにエージェントをインストールし、チームの他のメンバーがエージェントを利用できるように設定することができます。  </p><p>  Copilot Studio 「チャネル」タブより「Microsoft Teams と Microsoft 365 Copilot」を選択すると、下記の画面が表示されますので、「詳細の編集」をご選択ください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/edit_detail.png">  </p><p>  「ユーザーはこの エージェント をチームに追加できます」のチェックボックスを埋めてください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/add_to_team.png">  </p><p>  上記の設定を行っている状態で、リンクの共有、または Teams アプリストアに公開を経由し、下記の「追加」ボタンを選択してください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_add.png">   </p><p>  すると、下記のように、Teams で開くか、特定のチームを選択してエージェントをインストールするか、選択が可能となります。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/select_install_team.png">  </p><p>  チームにエージェントをインストールする場合、インストール先のチームを選択し、インストールしてください。</p><p>  なお、この方法の詳細については下記の公開情報も合わせてご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#allow-users-to-add-an-agent-to-a-team-in-teams">Teams と Microsoft 365 Copilot 向けのエージェントを接続し、構成する - Microsoft Copilot Studio | Microsoft Learn</a></p><p><a id='3-teams-版-copilot-studio-で作成したエージェントを-teams-で利用する'></a></p><h1 id="3-Teams-版-Copilot-Studio-で作成したエージェントを-Teams-で利用する"><a href="#3-Teams-版-Copilot-Studio-で作成したエージェントを-Teams-で利用する" class="headerlink" title="3. Teams 版 Copilot Studio で作成したエージェントを Teams で利用する"></a>3. Teams 版 Copilot Studio で作成したエージェントを Teams で利用する</h1><p><img src="/blog/copilotstudio/copilot-studio-teams/teams_copilot_studio_overview.png">  </p><div class="alert is-info"><p class="alert-title">Note</p><p>Dataverse for Teams 環境にCopilotを作成します。</p><p><a href="https://jpdynamicscrm.github.io/blog/powerplatform/Manage-Dataverse-for-Teams/">Dataverse for Teams 環境の管理方法 | Japan Dynamics CRM &amp; Power Platform Support Blog</a></p><p>※作成されるのはクラシックボットで、Web版で作成されるボットと機能が異なります。  </p></div><p><a id='3-1-エージェントを公開する'></a></p><h2 id="3-1-エージェントを公開する"><a href="#3-1-エージェントを公開する" class="headerlink" title="3-1. エージェントを公開する"></a>3-1. エージェントを公開する</h2><p>  エージェントを作成、編集した場合、そのエージェントを他の人が使えるようにするため、まずは公開する必要があります。<br>  作成、編集したエージェントを開き、「公開」メニューより「公開」ボタンを選択し、エージェントを公開してください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_publish.png">  </p><p><a id='3-2-他のユーザーと共有する'></a></p><h2 id="3-2-他のユーザーと共有する"><a href="#3-2-他のユーザーと共有する" class="headerlink" title="3-2. 他のユーザーと共有する"></a>3-2. 他のユーザーと共有する</h2><p>  作成したエージェントを、他のユーザーがで利用できるようにします。<br>  Web 版と同様に、他のユーザーとエージェントを共有するには 2 つの方法がございます。  </p><ol><li>セキュリティグループに利用者として共有する（エージェントと会話するユーザーとして）</li><li>ユーザーに共同編集者として共有する（エージェントと会話、およびエージェントを編集、管理するユーザーとして）</li></ol><p>  手順の詳細等については下記の公開情報をご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=teams">他のユーザーとエージェントを共有する - Microsoft Copilot Studio | Microsoft Learn</a>  </p><div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Power Platform 管理者様がご確認ください&gt;</p><p>利用者としてエージェントを共有する場合、利用者のユーザーは Power Platform 環境のメンバーである必要はありません。</p><p>また、セキュリティロールを割り当てる必要もありません。</p><p>ただし、エージェントのナレッジソースを通して環境内のデータやその他データソースへアクセスする場合には、別途データソースへのアクセス権限をユーザーに割り当てる必要があります。</p><p>一方、エージェントにナレッジとして直接追加されたファイルへアクセスする際には、セキュリティロールを割り当てる必要はありません。</p></div><p><a id='3-3-他のユーザーが-teams-でエージェントを利用する'></a></p><h2 id="3-3-他のユーザーが-Teams-でエージェントを利用する"><a href="#3-3-他のユーザーが-Teams-でエージェントを利用する" class="headerlink" title="3-3. 他のユーザーが Teams でエージェントを利用する"></a>3-3. 他のユーザーが Teams でエージェントを利用する</h2><p>  Web 版 Copilot Studio でエージェントを公開した直後や、下記の画面で「このエージェントの使用を他のユーザーに許可する」を選択すると、次の画面が表示されます。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_allow_setting.png">  </p><p>  <a href="#2-4-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%8C-teams-%E3%81%A7%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2-4 項</a>で説明した画面と同様の画面となります。<br>  それ以降の公開範囲に応じて、Web 版と同様の設定を行ってください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_menu.png">  </p><hr><p><a id='補足'></a></p><h1 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h1><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。バージョンアップによって UI の遷移などが若干異なる場合があります。その場合は画面の指示に従って進めてください。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの竹内です。&lt;br&gt;本記事では Copilot Studio (旧称 Power Virtual Agents) で作成したエージェントを Microsoft Teams (以降 Teams) に公開する方法についてご案内致します。&lt;/p&gt;</summary>
    
    
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/categories/Microsoft-Copilot-Studio/"/>
    
    
    <category term="Power Virtual Agents" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Virtual-Agents/"/>
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/tags/Microsoft-Copilot-Studio/"/>
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
    <category term="Microsoft Teams 連携" scheme="https://jpdynamicscrm.github.io/blog/tags/Microsoft-Teams-%E9%80%A3%E6%90%BA/"/>
    
  </entry>
  
  <entry>
    <title>サポート インスタンスの提供</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/Provide-Support-Instance/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/Provide-Support-Instance/</id>
    <published>2025-03-28T08:30:00.000Z</published>
    <updated>2025-10-23T09:21:14.725Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの鎌田です。</p><p>本記事では当社サポート サービスでお問い合わせいただいたお客様に向けてご案内しておりますサポート インスタンスを紹介します。</p><h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><p>サポート インスタンスは、当社エンジニアがお客様の問題を再現させて調査することを目的とした環境です。<br><br>サポート インスタンスへお客様の事象が発生している環境をコピーしていただくことで、事象の再現と調査を一貫して行うことが可能となり、早期解決が見込めます。<br><br>当社エンジニアがサポート インスタンスを利用した調査が有効であると判断した場合、お客様にサポート インスタンスの作成について可否を伺います。ご了承いただける場合は、以下に一連の流れをご案内いたしますので、ご確認お願いいたします。</p><div class="alert is-important"><p class="alert-title">重要</p><p>お客様のテナントにサポート インスタンス (新しい環境) が作成されますが、お客様のテナントのストレージ容量には影響ございません。</p></div><hr><ol><li><a href="#anchor-about-criteria">サポート インスタンス作成条件の確認</a></li><li><a href="#anchor-about-information">情報の提供</a></li><li><a href="#anchor-create-instance">サポート インスタンスの作成</a>（当社の作業）</li><li><a href="#anchor-about-copy">サポート インスタンスへの環境のコピー</a></li></ol><hr><p><a id='anchor-about-criteria'></a></p><h2 id="1-サポート-インスタンス作成条件の確認"><a href="#1-サポート-インスタンス作成条件の確認" class="headerlink" title="1. サポート インスタンス作成条件の確認"></a>1. サポート インスタンス作成条件の確認</h2><p>サポート インスタンスを作成するために、次の全ての条件を満たす必要がございます。</p><ul><li>お問い合わせ起票者が、事象発生環境にて、システム管理者のセキュリティ ロールであること</li><li>お問い合わせにて、サポート インスタンス作成の同意レベルが、次のいずれかに設定されていること<ul><li>診断情報へのアクセスで <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/copy-environment#copy-over-customizations-and-schemas-only">最小限のコピー</a> を許可する</li><li>診断情報へのアクセスで <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/copy-environment#copy-over-everything">完全なコピー</a> を許可する</li></ul></li></ul><p>同意レベルが異なる場合 <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/support-environment#how-do-i-grant-or-revoke-consent-after-i-create-a-support-request">サポート リクエストを作成した後、同意を付与または取り消すにはどうすればよいですか?</a> を参考に、同意レベルを設定ください。<br><img src="/blog/powerplatform/Provide-Support-Instance/consent.png"></p><div class="alert is-info"><p class="alert-title">Note</p><p>上記の同意レベルが表示されない場合は、当社にて同意レベルの変更を代理で実施することも可能です。</p><p>その場合、作業の同意として以下の項目について記載の上ご共有いただきますようお願いいたします。</p><p>作業完了まで 1、2 営業日ほどお時間いただく場合がございますので予めご了承ください。</p><p>・事象発生環境 URL（*.crm*.dynamics.com）</p><p>・貴社名</p><p>・エンドユーザー企業名</p><p>・同意レベル（完全コピー or 最小コピー）</p></div><p><a id='anchor-about-information'></a></p><h2 id="2-情報の提供"><a href="#2-情報の提供" class="headerlink" title="2. 情報の提供"></a>2. 情報の提供</h2><p>ステップ 1 の条件を満たした後、サポート インスタンス作成のため、当社サポート エンジニアへ <strong>事象発生環境 URL (*.crm*.dynamics.com)</strong> をご提供ください。</p><p><a id='anchor-create-instance'></a></p><h2 id="3-サポート-インスタンスの作成（当社の作業）"><a href="#3-サポート-インスタンスの作成（当社の作業）" class="headerlink" title="3. サポート インスタンスの作成（当社の作業）"></a>3. サポート インスタンスの作成（当社の作業）</h2><p>ステップ 2 の情報をもとに、当社にてサポート インスタンスを作成いたします。<br><br>お客様テナント内に作成したサポート インスタンスの環境名をご連絡いたしますので、ステップ 4 以降の環境のコピーを実施ください。</p><p><a id='anchor-about-copy'></a></p><h2 id="4-サポート-インスタンスへの環境のコピー"><a href="#4-サポート-インスタンスへの環境のコピー" class="headerlink" title="4. サポート インスタンスへの環境のコピー"></a>4. サポート インスタンスへの環境のコピー</h2><p>以下の手順で、事象発生中の環境をサポート インスタンスへのコピーをお願いいたします。</p><ol><li><a href="https://admin.powerplatform.microsoft.com/">Power Platform 管理センター</a> へアクセス</li><li>環境一覧より、事象が発生中の環境を選択して開く</li><li>上部リボンの [コピー] をクリック<br><img src="/blog/powerplatform/Provide-Support-Instance/copy_button.png"></li><li>下図のように、[上書きコピー] と [上書きするターゲット環境を選択] を設定してコピーを実施 (グローバル管理者、Power Platform 管理者等が付与されておらずサポート インスタンスが表示されない場合は、下記の対処策をご確認下さい)<br><img src="/blog/powerplatform/Provide-Support-Instance/copy_support_instance.png"></li><li>コピーが完了したら担当エンジニアまで完了の旨をご連絡ください</li></ol><div class="alert is-info"><p class="alert-title">Note</p><p>ターゲット環境の検索は Ctrl + F が便利です。</p><p>監査ログをコピーすると、環境のコピーにかかる時間が大幅に長くなる可能性があり、既定では実行されません。当社エンジニアから監査ログのコピーを依頼された場合は [監査ログ] の箇所を「はい」にご設定ください。</p></div><div class="alert is-important"><p class="alert-title">重要</p><p>コピーを実施するユーザーにグローバル管理者、Power Platform 管理者等が付与されていない場合、サポート インスタンス検索してもターゲット環境として表示されません。</p><p>当社側でコピーを実施するユーザーに管理者ロールを付与することで環境が表示されるようになります。</p><p></p><p>これを実施するため、まずエンジニアから共有された環境 URL に一度アクセスし、環境を開けない旨が表示されることを確認します。</p><p>この操作により、当該ユーザーがサポート インスタンスにプロビジョニングされます。</p><p></p><p>ここまで操作が完了したら、担当エンジニアへ当該ユーザーの UPN をお伝えください。管理者ロールが付与されたという連絡を受けたら、サポート インスタンスを表示できるようになっているため、再度コピー操作の実施をお願いいたします。</p></div><div class="alert is-info"><p class="alert-title">Note</p><p>UPN は Power Platform 管理センター &gt; 環境 &gt; 設定 &gt; ユーザー のユーザー名よりご確認いただけます。</p><p><img src="/blog/powerplatform/Provide-Support-Instance/upn.png"></p></div><h2 id="参考情報"><a href="#参考情報" class="headerlink" title="参考情報"></a>参考情報</h2><table><thead><tr><th>リンク</th><th>内容</th></tr></thead><tbody><tr><td><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/support-environment#what-are-support-environments">サポート環境とは</a></td><td>サポート インスタンス全般の解説をしております。</td></tr><tr><td><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/copy-environment">環境のコピー</a></td><td>完全コピー (すべて) や最小限のコピー (カスタマイズとスキーマのみ) について解説をしております。</td></tr><tr><td><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/copy-environment#copying-audit-logs">監査ログのコピー</a></td><td>環境コピー時に監査ログをコピーする手順について解説をしております。</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの鎌田です。&lt;/p&gt;
&lt;p&gt;本記事では当社サポート サービスでお問い合わせいただいたお客様に向けてご案内しておりますサポート インスタンスを紹介します。&lt;/p&gt;
&lt;h2 id=&quot;概要&quot;&gt;&lt;a href=&quot;#概要&quot; cl</summary>
      
    
    
    
    <category term="Dynamics 365" scheme="https://jpdynamicscrm.github.io/blog/categories/Dynamics-365/"/>
    
    <category term="サポートサービスのご利用について" scheme="https://jpdynamicscrm.github.io/blog/categories/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E3%81%94%E5%88%A9%E7%94%A8%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/"/>
    
    
    <category term="お問い合わせ全般" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%81%8A%E5%95%8F%E3%81%84%E5%90%88%E3%82%8F%E3%81%9B%E5%85%A8%E8%88%AC/"/>
    
    <category term="サポート" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88/"/>
    
    <category term="Environment" scheme="https://jpdynamicscrm.github.io/blog/tags/Environment/"/>
    
  </entry>
  
  <entry>
    <title>Power Apps のキャンバスアプリ一覧を管理者が取得する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/canvasapp/list-canvas-app/"/>
    <id>https://jpdynamicscrm.github.io/blog/canvasapp/list-canvas-app/</id>
    <published>2025-03-11T03:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.450Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの大友です。<br>本記事では、Power Apps のキャンバスアプリの一覧を取得する方法を詳しくご案内します。</p><span id="more"></span><ul><li><a href="#overview">1. 概要</a></li><li><a href="#how_to_list_canvas_app">2. キャンバスアプリの一覧を取得する方法</a><ul><li><a href="#with_analytics_feature">2-1. テナントレベルの分析を利用する</a><ul><li><a href="#with_analytics_ui">2-1‐1. 分析レポート画面を利用する</a></li><li><a href="#with_analytics_export">2-1-2. 分析データのエクスポート機能を利用する</a></li></ul></li><li><a href="#with_powershell">2-2. PowerShell を利用する</a></li><li><a href="#with_connector">2-3. Power Apps for Admins コネクタを利用する</a></li></ul></li><li><a href="#%E3%81%BE%E3%81%A8%E3%82%81">まとめ</a></li></ul><p><a id='overview'></a></p><h1 id="1-概要"><a href="#1-概要" class="headerlink" title="1. 概要"></a>1. 概要</h1><p>Power Apps をご利用頂いているお客様より、テナント内で作成されたすべてのキャンバスアプリを管理者にて確認したいというお問い合わせを多く頂いております。<br>本記事では、テナント全体のキャンバスアプリを一覧化するための具体的な方法を解説します。(※ <a href="https://learn.microsoft.com/ja-jp/power-platform/guidance/coe/starter-kit">Microsoft Power Platform CoE キット</a> は除いております。)  </p><p>なお、本記事のアクションやコマンドは管理者 (グローバル管理者、Power Platform 管理者) アカウントを用いて実行する必要がございますので、ご注意ください。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>本記事で紹介しているサンプルコードをご利用いただく際には、本記事末尾に記載のある免責事項を先にご確認ください。    </p></div><p><a id='how_to_list_canvas_app'></a></p><h1 id="2-キャンバスアプリ一覧を取得する方法"><a href="#2-キャンバスアプリ一覧を取得する方法" class="headerlink" title="2. キャンバスアプリ一覧を取得する方法"></a>2. キャンバスアプリ一覧を取得する方法</h1><p>本記事では、キャンバスアプリの一覧を取得する具体的な方法として以下の3つを説明します。</p><ul><li><a href="#with_analytics_feature">テナントレベル分析</a></li><li><a href="#with_powershell">PowerShell スクリプト</a></li><li><a href="#with_connector">Power Apps for Admins コネクタ</a></li></ul><p><a id='with_analytics_feature'></a></p><h2 id="2-1-テナントレベルの分析を利用する"><a href="#2-1-テナントレベルの分析を利用する" class="headerlink" title="2-1. テナントレベルの分析を利用する"></a>2-1. テナントレベルの分析を利用する</h2><div class="alert is-important"><p class="alert-title">重要</p><p>この方法は事前にテナントレベルの分析を有効にする必要がございます。</p><p>有効にする方法については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/tenant-level-analytics#how-do-i-enable-tenant-level-analytics">テナント レベルでの分析 - Power Platform | Microsoft Learn</a></p></div><p><a id='with_analytics_ui'></a></p><h3 id="2-1‐1-分析レポート画面を利用する"><a href="#2-1‐1-分析レポート画面を利用する" class="headerlink" title="2-1‐1. 分析レポート画面を利用する"></a>2-1‐1. 分析レポート画面を利用する</h3><p>Power Platfrom 管理センターに用意されたレポートを参照する方法です。  </p><ol><li><a href="https://admin.powerplatform.microsoft.com/">Power Platform 管理センター</a> にサインインします。</li><li>左側メニューの [管理] &gt; [Power Apps] を選択します。</li><li>表示されるダッシュボードからアプリの使用状況や一覧を確認できます。</li><li>テナント内のアプリ一覧を取得する場合、[概要] &gt; [アプリ在庫] タブをご確認ください。<br><img src="/blog/canvasapp/list-canvas-app/inventory_report.png">  </li></ol><p>テナントレベルの分析の詳細については下記の公開情報をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-analytics-reports">Power Apps のテナント レベルの分析</a>  </p><p><a id='with_analytics_export'></a></p><h3 id="2-1-2-分析データのエクスポート機能を利用する"><a href="#2-1-2-分析データのエクスポート機能を利用する" class="headerlink" title="2-1-2. 分析データのエクスポート機能を利用する"></a>2-1-2. 分析データのエクスポート機能を利用する</h3><p>Power Platform 管理センターの分析レポートの基となるデータをエクスポートし、そのデータを利用することでご利用者様の用途に合わせて利用状況を分析頂く事ができます。  </p><ol><li><a href="https://admin.powerplatform.microsoft.com/">Power Platform 管理センター</a> にサインインします。</li><li>左側メニューの [管理] &gt; [データ エクスポート] を選択します。</li><li>画面上部 [(+)新しいデータ エクスポート] より Azure Data Lake Storage へのエクスポートを構成いたします。<br><img src="/blog/canvasapp/list-canvas-app/data_export_apps.png"></li><li>構成した宛先の Azure Data Lake Storage へ、分析画面の基となるデータがエクスポートされます。<br><img src="/blog/canvasapp/list-canvas-app/data_export_apps2.png"></li></ol><p>データ エクスポートの詳細については下記の公開情報をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/self-service-analytics">Microsoft Power Platform セルフサービス分析</a></p><p><a id='with_powershell'></a></p><h2 id="2-2-PowerShell-を利用する"><a href="#2-2-PowerShell-を利用する" class="headerlink" title="2-2. PowerShell を利用する"></a>2-2. PowerShell を利用する</h2><p>PowerShellを使用すると、詳細なキャンバスアプリ情報をCSV形式でエクスポートし、分析に役立てることができます。</p><ol><li>PowerShell を管理者権限で開きます。</li><li>以下のコマンドを順番に実行します。</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> <span class="literal">-Name</span> Microsoft.PowerApps.Administration.PowerShell</span><br><span class="line"><span class="built_in">Add-PowerAppsAccount</span> <span class="comment"># ここで管理者アカウントでログインしてください。</span></span><br><span class="line"><span class="built_in">Get-AdminPowerApp</span> | <span class="built_in">Export-Csv</span> <span class="literal">-Path</span> <span class="string">&quot;app.csv&quot;</span> <span class="literal">-Encoding</span> UTF8</span><br></pre></td></tr></table></figure><p>実行後に生成された <code>app.csv</code> ファイルを利用し、キャンバスアプリの詳細を把握できます。<br>CSVファイルには作成者、キャンバスアプリ名、作成日などの詳細な情報が含まれています。<br><img src="/blog/canvasapp/list-canvas-app/powershell_export_csv.png">  </p><div class="alert is-info"><p class="alert-title">Note</p><p>Power Platform の PowerShell コマンド実行についての詳細は下記の情報をご確認ください。</p><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-powershell#module-installation-and-sign-in">Power Apps と Power Automate の PowerShell サポート - Power Platform | Microsoft Learn</a></p><p>また、キャンバスアプリ一覧を取得するコマンドの詳細については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.powerapps.administration.powershell/get-adminpowerapp?view=pa-ps-latest">Get-AdminPowerApp (Microsoft.PowerApps.Administration.PowerShell) | Microsoft Learn</a>  </p></div><p>各キャンバスアプリの詳細な情報の取得がご入用である場合、対象のキャンバスアプリの AppName と、そのキャンバスアプリが存在する環境の EnvironmentName を代入の上、実行してください。  </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-AdminPowerApp</span> <span class="literal">-AppName</span> *&lt;AppName&gt;* <span class="literal">-EnvironmentName</span> *&lt;EnvironmentName&gt;*</span><br></pre></td></tr></table></figure><p>下記画面のように、キャンバスアプリの詳細な情報を確認することができます。  </p><p><img src="/blog/canvasapp/list-canvas-app/powershell_apps.png">  </p><p>上記コマンドを用いて、テナント内の全キャンバスアプリを取得する際のサンプルコードを下記に記載いたします。<br>こちらのコードを実行すると、各キャンバスアプリにて利用されている接続や連携しているフローを確認頂けます。<br>ご要件に合わせてご調整頂けましたら幸いでございます。<br>※あくまでサンプルとなりますため、ご実行の前には本記事末尾の免責事項をご確認ください。  </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 出力先ファイル作成</span></span><br><span class="line"><span class="variable">$outputFile</span>=<span class="string">&quot;.\powerappsinventory.csv&quot;</span></span><br><span class="line"><span class="comment"># 結果格納用変数作成</span></span><br><span class="line"><span class="variable">$powerappsObjects</span>=<span class="selector-tag">@</span>()</span><br><span class="line"><span class="comment"># 環境一覧取得</span></span><br><span class="line"><span class="variable">$environments</span> = <span class="built_in">Get-AdminPowerAppEnvironment</span></span><br><span class="line"><span class="comment"># Power Apps 一覧作成</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$e</span> <span class="keyword">in</span> <span class="variable">$environments</span>) &#123;</span><br><span class="line">    <span class="comment"># 環境名表示</span></span><br><span class="line">    <span class="built_in">write-host</span> <span class="string">&quot;Environment:&quot;</span> <span class="variable">$e</span>.displayname</span><br><span class="line">    <span class="comment"># 環境内キャンバスアプリ一覧取得</span></span><br><span class="line">    <span class="variable">$powerapps</span> = <span class="built_in">Get-AdminPowerApp</span> <span class="literal">-EnvironmentName</span> <span class="variable">$e</span>.EnvironmentName</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$pa</span> <span class="keyword">in</span> <span class="variable">$powerapps</span>) &#123;</span><br><span class="line">        <span class="comment"># キャンバスアプリ情報表示</span></span><br><span class="line">        <span class="built_in">write-host</span> <span class="string">&quot; App Name:&quot;</span> <span class="variable">$pa</span>.DisplayName <span class="string">&quot;-&quot;</span> <span class="variable">$pa</span>.AppName</span><br><span class="line">        <span class="comment"># キャンバスアプリ詳細取得</span></span><br><span class="line">        <span class="variable">$papp</span> = <span class="built_in">Get-AdminPowerApp</span> <span class="literal">-EnvironmentName</span> <span class="variable">$e</span>.EnvironmentName <span class="literal">-AppName</span> <span class="variable">$pa</span>.AppName</span><br><span class="line">        <span class="comment"># 接続の確認</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$conRef</span> <span class="keyword">in</span> <span class="variable">$papp</span>.Internal.properties.connectionReferences) &#123;</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="variable">$con</span> <span class="keyword">in</span> <span class="variable">$conRef</span>) &#123;</span><br><span class="line">                <span class="keyword">foreach</span> (<span class="variable">$conId</span> <span class="keyword">in</span> (<span class="variable">$con</span> | <span class="built_in">Get-Member</span> <span class="literal">-MemberType</span> NoteProperty).Name) &#123;</span><br><span class="line">                    <span class="variable">$conDetails</span> = <span class="variable">$</span>(<span class="variable">$con</span>.<span class="variable">$conId</span>)</span><br><span class="line">                    <span class="variable">$apiTier</span> = <span class="variable">$conDetails</span>.apiTier</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$conDetails</span>.isCustomApiConnection) &#123;<span class="variable">$apiTier</span> = <span class="string">&quot;Premium (CustomAPI)&quot;</span>&#125;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$conDetails</span>.isOnPremiseConnection ) &#123;<span class="variable">$apiTier</span> = <span class="string">&quot;Premium (OnPrem)&quot;</span>&#125;</span><br><span class="line">                    <span class="comment"># 接続情報表示</span></span><br><span class="line">                    <span class="built_in">Write-Host</span> <span class="string">&quot; &quot;</span><span class="variable">$conDetails</span>.displayName <span class="string">&quot;(&quot;</span> <span class="variable">$apiTier</span> <span class="string">&quot;)&quot;</span></span><br><span class="line">                    <span class="variable">$paObj</span>=<span class="selector-tag">@</span>&#123;</span><br><span class="line">                        EnvironmentName = <span class="variable">$e</span>.displayname</span><br><span class="line">                        EncironmentId = <span class="variable">$e</span>.EnvironmentName</span><br><span class="line">                        AppName = <span class="variable">$papp</span>.DisplayName</span><br><span class="line">                        AppId = <span class="variable">$papp</span>.AppName</span><br><span class="line">                        ConnectionName = <span class="variable">$conDetails</span>.displayName</span><br><span class="line">                        Tier = <span class="variable">$apiTier</span></span><br><span class="line">                        FlowId = <span class="variable">$conDetails</span>.parameterHints.workflowName.value</span><br><span class="line">                        createdDate = <span class="variable">$papp</span>.CreatedTime</span><br><span class="line">                        createdBy = <span class="variable">$papp</span>.Owner</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment"># 結果に格納</span></span><br><span class="line">                    <span class="variable">$powerappsObjects</span> += <span class="variable">$</span>(<span class="built_in">new-object</span> psobject <span class="literal">-Property</span> <span class="variable">$paObj</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># CSV 出力</span></span><br><span class="line"><span class="variable">$powerappsObjects</span> | <span class="built_in">Export-Csv</span> <span class="variable">$outputFile</span> <span class="literal">-NoTypeInformation</span> <span class="literal">-Encoding</span> UTF8</span><br></pre></td></tr></table></figure><div class="alert is-info"><p class="alert-title">Note</p><p>テナント内のキャンバスアプリ数が多い場合、処理完了までに長時間を要する可能性がございます。    </p></div><p><img src="/blog/canvasapp/list-canvas-app/powershell_apps_detail.png">  </p><p><a id='with_connector'></a></p><h2 id="2-3-Power-Apps-for-Admins-コネクタを利用する"><a href="#2-3-Power-Apps-for-Admins-コネクタを利用する" class="headerlink" title="2-3. Power Apps for Admins コネクタを利用する"></a>2-3. Power Apps for Admins コネクタを利用する</h2><p>この方法では Power Automate クラウドフローを用いて、テナント内のキャンバスアプリを一覧化いたします。</p><ol><li>Power Automate で新規クラウドフローを作成します。</li><li>任意のトリガー（例:手動）を選択します。</li><li>アクションに「Power Apps for Admins」コネクタを追加し、「アプリを管理者として取得する」アクションを選びます。</li><li>取得対象の環境 ID を入力してください。</li><li>アクション実行後、得られたアプリ情報は後続のアクションでご利用頂けます。</li></ol><p><img src="/blog/canvasapp/list-canvas-app/flow-list-apps1.png"> </p><p>テナント内の全環境を対象として実行したい場合、「管理者向け Power Platform」コネクタの「環境一覧を管理者として作成する」アクションと組み合わせてください。<br>その場合、下記のように設定してください。</p><p>「それぞれに適用する」：outputs(‘環境一覧を管理者として作成する’)?[‘body/value’]<br>「アプリを管理者として取得する」：items(‘それぞれに適用する’)?[‘name’]  </p><p><img src="/blog/canvasapp/list-canvas-app/flow-list-apps2.png"><br><img src="/blog/canvasapp/list-canvas-app/flow-list-apps3.png">  </p><p>「Power Apps for Admins」コネクタの詳細は下記の公開情報をご覧ください。<br><a href="https://learn.microsoft.com/ja-jp/connectors/powerappsforadmins/">Power Apps for Admins - Connectors | Microsoft Learn</a></p><p><a id='まとめ'></a></p><h1 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h1><p>上記三つの方法から、ご要件に応じて適切な方法をご選択いただき、ご利用ください。<br>本記事が適切な管理の一助となりましたら幸いでございます。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>===サンプルコード免責事項===</p><p>・本記事で紹介しているサンプルコードは説明のためのサンプルであり、お客様の要望を直接満たすためのご提供ではございません。</p><p>そのため、製品の実運用環境で使用されることを前提に提供されるものではありません。</p><p>・エラー処理などは含まれておりません。また、弊社にてその動作を保証するものではございません。</p><p>・サンプル コードおよびそれに関連するあらゆる情報は、”現状のまま” で</p><p>提供されるものであり、商品性や特定の目的への適合性に関する黙示の保証も含め、</p><p>明示、黙示を問わずいかなる保証も付されるものではありません。</p><p>ご使用の際には、十分にご検証いただき、ご使用くださいますようお願い申し上げます。</p><p>マイクロソフトは、お客様に対し、サンプル コードを使用および改変するための</p><p>非排他的かつ無償の権利ならびに本サンプル コードをオブジェクト コードの形式で</p><p>複製および頒布するための非排他的かつ無償の権利を許諾します。</p><p>但し、お客様は下記に同意するものとします。</p><p>(1) サンプル コードが組み込まれたお客様のソフトウェア製品のマーケティングのために</p><p>    マイクロソフトの会社名、ロゴまたは商標を用いないこと</p><p>(2) サンプル コードが組み込まれたお客様のソフトウェア製品に有効な著作権表示をすること</p><p>(3) サンプル コードの使用または頒布から生じるあらゆる損害 (弁護士費用を含む) に</p><p>    関する請求または訴訟について、マイクロソフトおよびマイクロソフトの取引業者に対し補償し、</p><p>    損害を与えないこと</p></div><hr><p>※ 本記事の内容は執筆時点の情報に基づいています。最新の情報については公式ドキュメントも合わせてご確認ください。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの大友です。&lt;br&gt;本記事では、Power Apps のキャンバスアプリの一覧を取得する方法を詳しくご案内します。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Canvas App" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/Canvas-App/"/>
    
    <category term="Power Platform Admin Center" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform-Admin-Center/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Apps/"/>
    
    <category term="Governance" scheme="https://jpdynamicscrm.github.io/blog/tags/Governance/"/>
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
  </entry>
  
  <entry>
    <title>Power Automate のクラウドフロー一覧を管理者が取得する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerautomate/list-cloud-flow/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerautomate/list-cloud-flow/</id>
    <published>2025-03-11T03:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.609Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの竹内です。<br>本記事では、Power Automate のクラウドフローをテナント全体で効率的に管理するために、フローの一覧を取得する 3 つの方法を詳しくご案内します。</p><span id="more"></span><ul><li><a href="#%E7%9B%AE%E6%AC%A1">目次</a></li><li><a href="#1-%E6%A6%82%E8%A6%81">1. 概要</a></li><li><a href="#2-%E3%82%AF%E3%83%A9%E3%82%A6%E3%83%89%E3%83%95%E3%83%AD%E3%83%BC%E3%81%AE%E4%B8%80%E8%A6%A7%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95">2. クラウドフローの一覧を取得する方法</a><ul><li><a href="#2-1-%E3%83%86%E3%83%8A%E3%83%B3%E3%83%88%E3%83%AC%E3%83%99%E3%83%AB%E3%81%AE%E5%88%86%E6%9E%90%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2-1. テナントレベルの分析を利用する</a></li><li><a href="#2-2-powershell-%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2-2. PowerShell を利用する</a></li><li><a href="#2-3-power-automate-management-%E3%82%B3%E3%83%8D%E3%82%AF%E3%82%BF%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2-3. Power Automate Management コネクタを利用する</a></li></ul></li><li><a href="#%E3%81%BE%E3%81%A8%E3%82%81">まとめ</a></li></ul><p><a id='1-概要'></a></p><h1 id="1-概要"><a href="#1-概要" class="headerlink" title="1. 概要"></a>1. 概要</h1><p>Power Automate をご利用いただく際、管理者がテナント内で作成されたすべてのクラウドフローを把握することについて多くお問い合わせを頂いております。<br>本記事では、テナント全体のフローを一元的に把握するための具体的な方法を解説します。<br>なお、本記事は管理者 (グローバル管理者、Power Platform 管理者) が実行することを想定しております。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>本記事で紹介しているサンプルコードをご利用いただく際には、本記事末尾に記載のある免責事項を先にご確認ください。    </p></div><p><a id='2-クラウドフローの一覧を取得する方法'></a></p><h1 id="2-クラウドフローの一覧を取得する方法"><a href="#2-クラウドフローの一覧を取得する方法" class="headerlink" title="2. クラウドフローの一覧を取得する方法"></a>2. クラウドフローの一覧を取得する方法</h1><p>本記事では、クラウドフローの一覧を取得する具体的な方法として以下の3つを説明します。</p><ul><li>テナントレベル分析</li><li>PowerShell スクリプト</li><li>Power Automate Management コネクタ</li></ul><p><a id='2-1-テナントレベルの分析を利用する'></a></p><h2 id="2-1-テナントレベルの分析を利用する"><a href="#2-1-テナントレベルの分析を利用する" class="headerlink" title="2-1. テナントレベルの分析を利用する"></a>2-1. テナントレベルの分析を利用する</h2><div class="alert is-important"><p class="alert-title">重要</p><p>この方法は事前にテナントレベルの分析を有効にする必要がございます。</p><p>有効にする方法については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/tenant-level-analytics#how-do-i-enable-tenant-level-analytics">テナント レベルでの分析 - Power Platform | Microsoft Learn</a></p></div><div class="alert is-info"><p class="alert-title">Note</p><p>この方法は削除済みのフローを取得することはできません。  </p></div><ol><li><a href="https://admin.powerplatform.microsoft.com/">Power Platform 管理センター</a> にサインインします。</li><li>左側メニューの [分析] &gt; [Power Automate] を選択します。</li><li>表示されるダッシュボードからフローの使用状況や一覧を確認できます。</li><li>特にテナント内のフロー一覧を取得する場合、[概要] &gt; [在庫] タブをご確認ください。</li></ol><p><img src="/blog/powerautomate/list-cloud-flow/inventory_report.png">  </p><p>テナントレベルの分析の詳細については下記の公開情報をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-analytics-reports">Power Automate のテナント レベルの分析 - Power Platform | Microsoft Learn</a>  </p><p><a id='2-2-powershellを利用する'></a></p><h2 id="2-2-PowerShell-を利用する"><a href="#2-2-PowerShell-を利用する" class="headerlink" title="2-2. PowerShell を利用する"></a>2-2. PowerShell を利用する</h2><p>PowerShellを使用すると、詳細なフロー情報をCSV形式でエクスポートし、分析に役立てることができます。</p><ol><li>PowerShell を管理者権限で開きます。</li><li>以下のコマンドを順番に実行します。</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> <span class="literal">-Name</span> Microsoft.PowerApps.Administration.PowerShell</span><br><span class="line"><span class="built_in">Add-PowerAppsAccount</span> <span class="comment"># ここで管理者アカウントでログインしてください。</span></span><br><span class="line"><span class="built_in">Get-AdminFlow</span> | <span class="built_in">Export-Csv</span> <span class="literal">-Path</span> <span class="string">&quot;flows.csv&quot;</span> <span class="literal">-Encoding</span> UTF8</span><br></pre></td></tr></table></figure><p>実行後に生成された <code>flows.csv</code> ファイルを利用し、フローの詳細を把握できます。<br>CSVファイルには作成者、フロー名、作成日などの詳細な情報が含まれています。<br><img src="/blog/powerautomate/list-cloud-flow/powershell_export_csv.png">  </p><blockquote><p>[!Note]<br>Power Platform の PowerShell コマンド実行についての詳細は下記の情報をご確認ください。<br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-powershell#module-installation-and-sign-in">Power Apps と Power Automate の PowerShell サポート - Power Platform | Microsoft Learn</a><br>また、フロー一覧を取得するコマンドの詳細については下記の公開情報をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.powerapps.administration.powershell/get-adminflow?view=pa-ps-latest">Get-AdminFlow (Microsoft.PowerApps.Administration.PowerShell) | Microsoft Learn</a>  </p></blockquote><div class="alert is-info"><p class="alert-title">Note</p><p>この方法は削除後 28 日以内のフローを取得することができます。  </p></div><p>各フローの詳細な情報の取得がご入用である場合、下記のコマンドに対象のフローの FlowName と、そのフローが存在する環境の EnvironmentName を代入の上、実行してください。  </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-AdminFlow</span> <span class="literal">-FlowName</span> *&lt;FlowName&gt;* <span class="literal">-EnvironmentName</span> *&lt;EnvironmentName&gt;* | %&#123;<span class="variable">$_</span> | <span class="built_in">ConvertTo-Json</span> <span class="literal">-Depth</span> <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure><p>下記画面のように、フローの詳細な情報を確認することができます。  </p><p><img src="/blog/powerautomate/list-cloud-flow/powershell_detail_export.png">  </p><p>また、共同所有者や実行専用ユーザーを含めた、フローに関係する人物を一覧化することがご入用である場合、下記の PowerShell コマンドのご利用をご検討ください。<br><a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.powerapps.administration.powershell/get-adminflowownerrole?view=pa-ps-latest">Get-AdminFlowOwnerRole (Microsoft.PowerApps.Administration.PowerShell) | Microsoft Learn</a></p><p>上記コマンドを用いて、テナント内のフローにループ処理をする際のサンプルコードを下記に記載いたします。<br>ご要件に合わせてご利用をご検討ください。<br>※ご実行の前には本記事末尾の免責事項をご確認ください。  </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 環境一覧を取得</span></span><br><span class="line"><span class="variable">$environments</span> = <span class="built_in">Get-AdminPowerAppEnvironment</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 各環境のフローを取得し、オーナーロールを確認</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$env</span> <span class="keyword">in</span> <span class="variable">$environments</span>) &#123;</span><br><span class="line">    <span class="variable">$envName</span> = <span class="variable">$env</span>.EnvironmentName</span><br><span class="line">    <span class="built_in">Write-Output</span> <span class="string">&quot;Processing Environment: <span class="variable">$envName</span>&quot;</span></span><br><span class="line">    <span class="comment"># フロー一覧を取得</span></span><br><span class="line">    <span class="variable">$flows</span> = <span class="built_in">Get-AdminFlow</span> <span class="literal">-EnvironmentName</span> <span class="variable">$envName</span></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$flow</span> <span class="keyword">in</span> <span class="variable">$flows</span>) &#123;</span><br><span class="line">        <span class="variable">$flowName</span> = <span class="variable">$flow</span>.FlowName</span><br><span class="line">        <span class="built_in">Write-Output</span> <span class="string">&quot;  Checking Flow: <span class="variable">$flowName</span>&quot;</span></span><br><span class="line">        <span class="comment"># フローのオーナーロールを取得</span></span><br><span class="line">        <span class="variable">$ownerRoles</span> = <span class="built_in">Get-AdminFlowOwnerRole</span> <span class="literal">-EnvironmentName</span> <span class="variable">$envName</span> <span class="literal">-FlowName</span> <span class="variable">$flowName</span></span><br><span class="line">        <span class="comment"># 結果を表示</span></span><br><span class="line">        <span class="variable">$ownerRoles</span> | <span class="built_in">ForEach-Object</span> &#123;</span><br><span class="line">            <span class="built_in">Write-Output</span> <span class="string">&quot;    Role: <span class="variable">$</span>(<span class="variable">$_</span>.RoleType) | Principal: <span class="variable">$</span>(<span class="variable">$_</span>.PrincipalObjectId)&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>上記コードを実行すると、下記のように各フローについて、所有者や共同所有者、実行専用ユーザーをご確認することができます。</p><div class="alert is-info"><p class="alert-title">Note</p><p>テナント内のフロー数が多い場合、処理完了までに長時間を要する可能性がございます。    </p></div><p><img src="/blog/powerautomate/list-cloud-flow/powershell_export_people.png">  </p><p><a id='2-3-power-automate-management-コネクタを利用する'></a></p><h2 id="2-3-Power-Automate-Management-コネクタを利用する"><a href="#2-3-Power-Automate-Management-コネクタを利用する" class="headerlink" title="2-3. Power Automate Management コネクタを利用する"></a>2-3. Power Automate Management コネクタを利用する</h2><p>この方法はクラウドフローを用いて、テナント内のクラウドフローを一覧化することが可能です。</p><ol><li>Power Automate で新規クラウドフローを作成します。</li><li>任意のトリガー（例:手動）を選択します。</li><li>アクションに「Power Automate Management」コネクタを追加し、「管理者としてフローの一覧を取得 (V2)」アクションを選びます。</li><li>取得対象の環境を選択してください。</li><li>アクション実行後、得られたフロー情報をExcelやメール通知など、適切な形で利用できます。</li></ol><p><img src="/blog/powerautomate/list-cloud-flow/flow-list-connector.png">  </p><p>テナント内の全環境を対象としてクラウドフローを実行する場合、「自分の環境の一覧表示」アクションと組み合わせてください。<br>その場合、下記のように設定してください。</p><p>「それぞれに適用する」：outputs(‘自分の環境の一覧表示’)?[‘body/value’]<br>「管理者としてフローの一覧を取得 (V2)」：items(‘それぞれに適用する’)?[‘name’]  </p><p><img src="/blog/powerautomate/list-cloud-flow/flow-list-flow2.png"><br><img src="/blog/powerautomate/list-cloud-flow/flow-list-flow.png">  </p><p>「Power Automate Management」コネクタの詳細は下記の公開情報をご覧ください。<br><a href="https://learn.microsoft.com/ja-jp/connectors/flowmanagement/">Power Automate Management - Connectors | Microsoft Learn</a>  </p><p>また、フローの定義情報等の詳細情報までご入用である場合、「フローを管理者として取得」アクションを組み合わせることで実現可能です。  </p><p><img src="/blog/powerautomate/list-cloud-flow/flow-list-flow3.png">  </p><blockquote><p>この方法は削除済みのフローを取得することはできません。</p></blockquote><p><a id='まとめ'></a></p><h1 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h1><p>上記三つの方法から、ご要件に応じて適切な方法をご選択いただき、ご利用ください。<br>本記事が適切な管理の一助となりましたら幸いでございます。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>===サンプルコード免責事項===</p><p>・本記事で紹介しているサンプルコードは説明のためのサンプルであり、お客様の要望を直接満たすためのご提供ではございません。</p><p>そのため、製品の実運用環境で使用されることを前提に提供されるものではありません。</p><p>・エラー処理などは含まれておりません。また、弊社にてその動作を保証するものではございません。</p><p>・サンプル コードおよびそれに関連するあらゆる情報は、”現状のまま” で</p><p>提供されるものであり、商品性や特定の目的への適合性に関する黙示の保証も含め、</p><p>明示、黙示を問わずいかなる保証も付されるものではありません。</p><p>ご使用の際には、十分にご検証いただき、ご使用くださいますようお願い申し上げます。</p><p>マイクロソフトは、お客様に対し、サンプル コードを使用および改変するための</p><p>非排他的かつ無償の権利ならびに本サンプル コードをオブジェクト コードの形式で</p><p>複製および頒布するための非排他的かつ無償の権利を許諾します。</p><p>但し、お客様は下記に同意するものとします。</p><p>(1) サンプル コードが組み込まれたお客様のソフトウェア製品のマーケティングのために</p><p>    マイクロソフトの会社名、ロゴまたは商標を用いないこと</p><p>(2) サンプル コードが組み込まれたお客様のソフトウェア製品に有効な著作権表示をすること</p><p>(3) サンプル コードの使用または頒布から生じるあらゆる損害 (弁護士費用を含む) に</p><p>    関する請求または訴訟について、マイクロソフトおよびマイクロソフトの取引業者に対し補償し、</p><p>    損害を与えないこと</p></div><hr><p>※ 本記事の内容は執筆時点の情報に基づいています。最新の情報については公式ドキュメントも合わせてご確認ください。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの竹内です。&lt;br&gt;本記事では、Power Automate のクラウドフローをテナント全体で効率的に管理するために、フローの一覧を取得する 3 つの方法を詳しくご案内します。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Power Platform Admin Center" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform-Admin-Center/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Governance" scheme="https://jpdynamicscrm.github.io/blog/tags/Governance/"/>
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
  </entry>
  
  <entry>
    <title>Copilot Studio のエージェントを一覧にする方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/copilotstudio/how-to-list-copilot-agents/"/>
    <id>https://jpdynamicscrm.github.io/blog/copilotstudio/how-to-list-copilot-agents/</id>
    <published>2025-03-03T04:30:00.000Z</published>
    <updated>2025-10-23T09:21:14.515Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの網野です。<br>Copilot Studio にて作成されたエージェントは Dataverse または Dataverse for Teams に保存されます。本記事では Dataverse および Dataverse for Teams からエージェントを一覧を取得する方法をご案内いたします。</p><span id="more"></span><h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><p>Copilot Studio は 2 つのルートでエージェントを作成することができます。</p><ol><li><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing-subscriptions#standalone-copilot-studio-subscription">Copilot Studio ポータル</a></li><li><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing-subscriptions#copilot-studio-for-microsoft-teams-plans">Teams アプリの Copilot Studio</a></li></ol><p>Copilot Studio ポータルから作成したエージェントは Dataverse に保存されます。<br>Teams アプリの Copilot Studio から作成したエージェントは Dataverse for Teams に保存されます。Dataverse/Dataverse for Teams に格納されているデータは本記事に記載する方法で取得・確認することができます。</p><p>なお、<a href="https://learn.microsoft.com/ja-jp/microsoft-365-copilot/extensibility/copilot-studio-agent-builder">Agent Builder</a> を利用して作成したエージェントは Cosmos DB に保存されますので、本記事の方法では取得することができません。</p><h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p>テナント内のエージェント一覧を取得するためには、取得する環境の Copilots テーブルに対して、組織レベルの読み取り権限が必要となります。  </p><h2 id="特定の環境のエージェントを一覧にする方法"><a href="#特定の環境のエージェントを一覧にする方法" class="headerlink" title="特定の環境のエージェントを一覧にする方法"></a>特定の環境のエージェントを一覧にする方法</h2><h3 id="詳細検索を利用する方法-Dataverse-のみ"><a href="#詳細検索を利用する方法-Dataverse-のみ" class="headerlink" title="詳細検索を利用する方法 (Dataverse のみ)"></a>詳細検索を利用する方法 (Dataverse のみ)</h3><ol><li><p><a href="https://make.powerapps.com/">Power Apps ポータル</a> に接続し、エージェントを取得する環境を選択します。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/environment-picker.png"></p></li><li><p>右上のギアアイコンより、[詳細設定] を選択します。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/setting.png"></p></li><li><p>表示された Dynamics 365 画面右上のフィルタアイコンを選択します。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/filter.png"></p></li><li><p>「高度な検索」画面が開いたら以下の操作を行います。</p><ul><li>検索対象テーブルに「Copilots/コパイロット」を選択します。</li><li>必要に応じて、「列の編集/Edit Columns」から表示する列を編集します。</li><li>「結果/Results」を押します。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/advanced_search.png"></li></ul></li><li><p>エージェント一覧が表示されます。表示された検索結果をExcel にエクスポートが可能です。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/export_excel.png"></p></li><li><p>エクスポートした Excel を開くと、エージェント名 (Name列) と所有者 (Owner) を確認することができます。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/excel_list.png"></p></li><li><p>手順4の画面で所有者のメールアドレスを追加しますと、エクスポート時にメールアドレスを一緒に出力することができます。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/add_owner_email.png"></p></li></ol><h3 id="Dataverse-コネクタを利用する方法"><a href="#Dataverse-コネクタを利用する方法" class="headerlink" title="Dataverse コネクタを利用する方法"></a>Dataverse コネクタを利用する方法</h3><p>Dataverse コネクタを利用し Copilots(bot) テーブルからエージェント情報を取得します。  </p><h4 id="フロー全体図"><a href="#フロー全体図" class="headerlink" title="フロー全体図"></a>フロー全体図</h4><p><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse1.png"></p><h4 id="フロー詳細"><a href="#フロー詳細" class="headerlink" title="フロー詳細"></a>フロー詳細</h4><ol><li>任意のトリガーを設定します  </li><li>Dataverse コネクタ「選択した環境の行を一覧表示する」アクションを設定します。  <ul><li>環境：（任意）</li><li>テーブル名：Copilots</li><li>列を選択する：（表示したい列をカンマ区切りで記載）<br>取得可能な列は <a href="https://learn.microsoft.com/en-us/power-apps/developer/data-platform/reference/entities/bot">Copilot (bot) table/entity reference</a> を参照してください。</li><li>クエリの展開：（任意）<br> サンプルではエージェント作成者＝CreatedBy の姓名とメールアドレスを取得しています。<br> 値：createdby($select=internalemailaddress,lastname,firstname)<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse2.png"></li></ul></li><li>ここで一度フローを実行し、実行履歴から「選択した環境の行を一覧表示する」アクションの body をコピーします。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse6.png"></li><li>「JSON の解析」アクションを設定します。  <ul><li>Content：動的コンテンツ「選択した環境の行を一覧表示する」の本文</li><li>Shema：以下の手順で作成します。<ol><li>「サンプルペイロードを使用してスキーマを生成する」を選択します。</li><li>一つ前の手順で取得した実行履歴の body の値を貼り付けます。</li><li>「完了」を押します。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse8.png"></li><li>以下のように表示されていることを確認してください。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse3.png"> </li></ol></li></ul></li><li>「CSV テーブルの作成」アクションを設定します。  <ul><li>From ：動的コンテンツ「JSON の解析」の Body value</li><li>Columns： カスタム</li><li>Columns Header： （CSV ヘッダーとして使用する任意の文字列）</li><li>Columns Value：（動的コンテンツ「JSON の解析」の任意の項目）<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse4.png"></li></ul></li><li>任意のコネクタを利用し CSV ファイルを作成します。<br>サンプルでは OneDrive for Business コネクタの「ファイルの作成」アクションを利用して CSV ファイルを作成します。  <ul><li>フォルダーのパス：（任意）</li><li>ファイル名：（任意）</li><li>ファイルコンテンツ：concat(decodeUriComponent(‘%EF%BB%BF’), body(‘CSV_テーブルの作成’))<br>日本語が文字化けしないように、ファイルコンテンツの先頭に BOM=decodeUriComponent(‘%EF%BB%BF’) を追加します。<br>※BOM とは文字コードが UTF-8 であることを示すものです。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse5.png"></li></ul></li></ol><p>これでフローの作成は完了です。</p><h4 id="フロー実行結果"><a href="#フロー実行結果" class="headerlink" title="フロー実行結果"></a>フロー実行結果</h4><p>フローを実行すると指定したフォルダに CSV が出力されます。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse9.png"></p><h2 id="テナント内の環境のエージェントを一覧にする方法"><a href="#テナント内の環境のエージェントを一覧にする方法" class="headerlink" title="テナント内の環境のエージェントを一覧にする方法"></a>テナント内の環境のエージェントを一覧にする方法</h2><h3 id="CoE-を利用する方法-Dataverse-のみ"><a href="#CoE-を利用する方法-Dataverse-のみ" class="headerlink" title="CoE を利用する方法 (Dataverse のみ)"></a>CoE を利用する方法 (Dataverse のみ)</h3><p><a href="https://learn.microsoft.com/ja-jp/power-platform/guidance/coe/starter-kit">CoE Starter kit</a> を環境にインストールすることで、Datavese に作成されたエージェントの一覧を確認することができます。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/coe.png">  </p><p>Dataverse for Teams 環境の Copilot につきましては 2025 年 2 月時点で CoE Starter Kit から確認することはサポートされていません。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/coe2.png">  </p><p>なお、 CoE Starter Kit は有志が作成するツールとなりますのでご不明点等ございましたら、<a href="https://aka.ms/coe-starter-kit-issues">GitHub</a> へお問い合わせください。<br>関連リンク：<a href="https://learn.microsoft.com/ja-jp/power-platform/guidance/coe/feedback-support">CoE Starter Kit に関するフィードバックとサポート</a></p><h3 id="Dataverse-コネクタを利用する方法-1"><a href="#Dataverse-コネクタを利用する方法-1" class="headerlink" title="Dataverse コネクタを利用する方法"></a>Dataverse コネクタを利用する方法</h3><p>上述のDataverse コネクタを利用する方法にて特定環境のエージェント一覧を取得する方法をご案内しました。その方法を全ての環境に対して行うことでテナント内の環境のエージェント一覧を取得することができます。<br>具体的には「環境一覧を管理者として作成する」アクションを利用して取得した、取得した環境ごとに CSV を出力することで、 Copilot 情報を取得します。</p><h3 id="フロー全体図-1"><a href="#フロー全体図-1" class="headerlink" title="フロー全体図"></a>フロー全体図</h3><p><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse2_1.png"></p><h4 id="前作業"><a href="#前作業" class="headerlink" title="前作業"></a>前作業</h4><p>全ての環境の Copilots テーブルにアクセスするために、自分自身を環境の管理者として追加します。<br>具体的な手順は <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/manage-high-privileged-admin-roles#self-elevate-through-powershell">PowerShell による自己昇格</a> を参照してください。  </p><h3 id="フロー詳細-1"><a href="#フロー詳細-1" class="headerlink" title="フロー詳細"></a>フロー詳細</h3><ol><li>管理者向け Power Platform コネクタの「環境一覧を管理者として作成する」アクションを追加します。</li><li>「選択した環境の行を一覧表示する」アクションの「環境」を動的コンテンツ「リンクされたメタデータ インスタンス API の URL」に変更します。<br>環境：@item()?[‘properties/linkedEnvironmentMetadata/instanceApiUrl’]<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse2_3.png"></li><li>「選択した環境の行を一覧表示する」アクションが 「For each」 コントロールで囲まれることを確認し、後続のアクションもすべて 「For each」 コントール内に追加します。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse2_4.png"></li><li>「ファイルの作成」アクションのファイル名に動的コンテンツ「リンクされたメタデータ フレンドリ名」を追加します。　　<br>サンプルでは、フレンドリ名（＝環境名）を追加することで、環境ごとにファイルを作成し、他の環境のデータが上書きされる事を防ぎます。運用に合わせて任意の項目を設定してください。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse2_5.png"></li></ol><h4 id="フロー実行結果-1"><a href="#フロー実行結果-1" class="headerlink" title="フロー実行結果"></a>フロー実行結果</h4><p>フローを実行すると指定したフォルダに環境ごとの CSV が出力されます。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse2_2.png"></p><h2 id="よくある質問"><a href="#よくある質問" class="headerlink" title="よくある質問"></a>よくある質問</h2><h3 id="Microsoft-365-Copilot-を拡張した-Copilot-の情報が取得できますか"><a href="#Microsoft-365-Copilot-を拡張した-Copilot-の情報が取得できますか" class="headerlink" title="Microsoft 365 Copilot を拡張した Copilot の情報が取得できますか"></a>Microsoft 365 Copilot を拡張した Copilot の情報が取得できますか</h3><p>はい、取得できます。<br>Copilot Studio から Copilot for Microsoft 365 を選択して作成した Copilot は Dataverse に保存されます。そのため、本手順でご案内した方法で取得することができます。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの網野です。&lt;br&gt;Copilot Studio にて作成されたエージェントは Dataverse または Dataverse for Teams に保存されます。本記事では Dataverse および Dataverse for Teams からエージェントを一覧を取得する方法をご案内いたします。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/tags/Copilot-Studio/"/>
    
  </entry>
  
  <entry>
    <title>セキュリティ グループとセキュリティ ロールによる Dataverse 環境のアクセス権制御方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/About-security-role-in-Dataverse/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/About-security-role-in-Dataverse/</id>
    <published>2025-02-25T15:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.675Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの鎌田です。</p><p>今回は、Power Platform、特に Dataverse を作成した環境に対して、セキュリティ グループやセキュリティ ロールを使ってアクセスを制御する方法についてご紹介いたします。</p><p>ビジネスユースで Dynamics 365 CRM やモデル駆動アプリを導入する場合、セキュアな環境管理のために必須となるのがこのアクセス権制御です。<br>特に Dataverse の導入にあたりセキュリティ面を検討されている方は、ぜひご覧ください！</p><h2 id="アクセス権制御方法の概要"><a href="#アクセス権制御方法の概要" class="headerlink" title="アクセス権制御方法の概要"></a>アクセス権制御方法の概要</h2><p>Dataverse 環境のアクセス権は、おおまかに以下の構造で制御されています。</p><ol><li><strong>ライセンス</strong> : テナントごとに、<strong>各ユーザーが Power Platform 製品を利用できるか</strong>を決定します。</li><li><strong>セキュリティ グループ</strong> : テナントの各環境ごとに、<strong>ユーザーがその環境を利用できるか</strong>を決定します。</li><li><strong>セキュリティ ロール</strong> : 環境の Dataverse 内の各テーブルごとに、<strong>環境における具体的なユーザーのアクセス権</strong>を決定します。</li></ol><p><img src="/blog/powerplatform/About-security-role-in-Dataverse/img00-overall.PNG"></p><p>例えば上記の図のように、同じテナント内に複数のグループと複数の環境が存在し、それぞれ環境にグループが割り当てられているとします。</p><ul><li>グループ A (サポート部門) とグループ B (管理部門)</li><li>環境A (サポート部門用の環境) と環境 B (管理部門用の環境)</li></ul><p>このとき、下記の 1 から 3 のアクセス権制御を組み合わせることで、ユーザーに対してどの環境でのどのような操作を許可するかを制御できます。</p><ol><li><strong>ライセンス</strong> :<br>グループ A 内のサポート部門のユーザーは、ライセンスを所有しているため、Power Platform 製品を利用できます。<br>グループ B 内のユーザーは、今回の図の場合ライセンスを保有していないため、Power Platform 製品を利用できません。</li><li><strong>セキュリティ グループ</strong> :<br>サポート部門用の環境 A に対して、グループ A がセキュリティ グループとして設定されている場合、グループ A のユーザーは環境 A にアクセスすることができますが、管理部門用の環境 B のセキュリティ グループとしては登録されていないため、アクセスすることができません。</li><li><strong>セキュリティ ロール</strong> :<br>グループ A のユーザーに対してセキュリティ ロールを付与することで、ユーザーがアクセスできるテーブルやアプリ、実行可能な操作を制限できます。<br>たとえば図中のユーザーにサポート部門用のセキュリティ ロールが割り当てられ、システム管理者が割り当てられていないとき、ユーザーはシステム管理に使うテーブルにはアクセスができません。</li></ol><p>本記事では 2 と 3 について紹介します。</p><h2 id="セキュリティ-グループについて"><a href="#セキュリティ-グループについて" class="headerlink" title="セキュリティ グループについて"></a>セキュリティ グループについて</h2><p>Power Platform 環境には、デフォルトではテナントに所属する全ユーザーがアクセスできますが、環境にセキュリティ グループを割り当てることで、<strong>割り当てられたセキュリティ グループに所属するユーザーのみにアクセスを限定</strong>することができます。<br>たとえば、「IT部門」用の環境を作成したときに、「IT部門」のセキュリティ グループを割り当てることで、その他の営業部門などのユーザーのアクセスを禁止することができます。このように、グループごとに環境の利用可否を制御したい場合に、セキュリティ グループが役立ちます。</p><p>セキュリティ グループの割り当ては、環境作成時にオプションで指定できる他、Power Platform 管理センターから既存の環境に対しても指定できます。<br>ただし、既存の環境にセキュリティ グループを割り当てた場合、セキュリティ グループに所属していないユーザーはすべて無効化されるのでご注意ください。<br><img src="/blog/powerplatform/About-security-role-in-Dataverse/ppac_security_group.png"></p><h2 id="セキュリティ-ロールについて"><a href="#セキュリティ-ロールについて" class="headerlink" title="セキュリティ ロールについて"></a>セキュリティ ロールについて</h2><p>上記でご説明したセキュリティ グループでは、ユーザーに対して環境単位でのアクセス可否を決定します。<br>これに対して、ユーザーに割り当てることで、<strong>環境内でユーザーが行える操作を決定</strong>するのがセキュリティ ロールです。<br>Power Platform では、要件に合わせたさまざまな既定のセキュリティ ロールが存在します。特によく使用されるセキュリティ ロールの例を以下に紹介します。</p><ul><li>システム管理者 : 環境におけるすべての操作を実行できるロール。</li><li>Basic User : 環境における一般的なアプリの利用ができるロール。管理操作が制限される他、自分以外のユーザーが作成したデータに対するアクセスも制限されます。</li><li>システム カスタマイザー : 環境をカスタマイズするためのロール。多くの管理操作を実行できますが、自分以外のユーザーが作成したデータを参照できません。</li></ul><p>またこちらの公開情報にも、より多くのセキュリティ ロールのご説明が記載されているので、ぜひご覧ください。<br><br>参考: <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/database-security">環境のリソースに対するユーザー セキュリティの構成</a></p><h3 id="セキュリティ-ロールの仕組みとカスタマイズ"><a href="#セキュリティ-ロールの仕組みとカスタマイズ" class="headerlink" title="セキュリティ ロールの仕組みとカスタマイズ"></a>セキュリティ ロールの仕組みとカスタマイズ</h3><p>セキュリティ ロールは、Dataverse 上の各テーブルやその他の機能の使用等に対する <strong>特権</strong> (アクセス権) をひとまとめにしたものです。<br>Power Platform 管理センターから環境を開き、[設定] &gt; [ユーザーとアクセス許可] &gt; [セキュリティ ロール] から特定のセキュリティ ロールを開くことで、下図のように特権がどのように付与されているかを確認することができます。<br><br>各特権の項目に対して、作成・読み取り・書き込み等の動作ごとに、特権の種類を [なし / 部署 / 組織 / 部署配下 / ユーザー] に設定できます。<br><br>参考: <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/security-roles-privileges">セキュリティ ロールおよび特権</a><br><img src="/blog/powerplatform/About-security-role-in-Dataverse/ppac_security_role_settings.png"></p><p>前述のように、システム管理者や Basic User といった定義済みのセキュリティ ロールが存在するものの、カスタマイズにより細かく特権を定義することが可能です。これにより、お客様の使用シナリオやニーズに合わせて、柔軟なアクセス制御が可能となります。</p><p>例えば、</p><ul><li>サポート部門の担当者には、自分が担当する「サポート案件」を参照可とする</li><li>サポート部門の管理者は、全員のサポート案件を参照可とする</li><li>経理部門の担当者には、サポート案件自体参照させたくない</li></ul><p>というような要件がある場合、サポート案件に対するアクセス許可を変更したロールを 3 種類作成し、各ユーザーに割り当てることで要件が実現できます。</p><p>定義済みセキュリティ ロールでは、モデル駆動型アプリで実際に使用されよく目にするテーブル以外にも、設定に関するものやプライバシー関連など、多数のアクセス制御が設定されています。そのため、カスタムでのセキュリティ ロールを作成する場合は、定義済みのセキュリティ ロールをコピーし、それをベースに修正が必要な特権のみ変更する運用が推奨されています。</p><h2 id="その他"><a href="#その他" class="headerlink" title="その他"></a>その他</h2><h3 id="チーム単位でのセキュリティ-ロールの割り当て"><a href="#チーム単位でのセキュリティ-ロールの割り当て" class="headerlink" title="チーム単位でのセキュリティ ロールの割り当て"></a>チーム単位でのセキュリティ ロールの割り当て</h3><p>ユーザーに直接セキュリティ ロールを割り当てるのではなく、Dataverse 上に作成した <strong>チーム</strong> に対してもセキュリティ ロールの割り当てが可能です。<br>これにより、チームに所属するユーザー全員に対して、チームに付与されたセキュリティ ロールが継承されます。(チームのセキュリティ ロールが継承されていても、Power Platform 管理センターのユーザーごとのセキュリティ ロールには表示されません)<br><br>また、このチームを Microsoft Entra ID のセキュリティ グループと紐づけることで、Microsoft Entra ID と Power Platform でユーザー管理の体制を統一することができます。<br><br>参考: <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/manage-teams">Microsoft Dataverse チームの管理</a></p><h3 id="フィールドレベルのセキュリティ付与"><a href="#フィールドレベルのセキュリティ付与" class="headerlink" title="フィールドレベルのセキュリティ付与"></a>フィールドレベルのセキュリティ付与</h3><p>本記事でご紹介したテーブルごとのアクセス制御とは別に、更に細かく Dataverse テーブルの列ごとにアクセス制御を設定することができます。<br>住所や電話番号など、特に重要で管理に留意する必要のある情報を扱う際に有効な機能です。<br><br>参考: <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/field-level-security">アクセスを制御する列レベルのセキュリティ</a></p><h3 id="セキュリティ-グループを環境に割り当てた際のメンバー同期"><a href="#セキュリティ-グループを環境に割り当てた際のメンバー同期" class="headerlink" title="セキュリティ グループを環境に割り当てた際のメンバー同期"></a>セキュリティ グループを環境に割り当てた際のメンバー同期</h3><p>セキュリティ グループを環境に割り当てると、グループに所属するライセンスを保有するユーザーが、自動的に環境に追加されるようになります。<br>ただし以下のように、注意が必要な挙動もあります。</p><ul><li>ライセンスを保有しないユーザーは環境に追加されない</li><li>入れ子のセキュリティ グループのメンバーは、グループに「Microsoft Entra ID グループ チーム」が割り当てられている場合を除いて、自動的に環境に追加されない</li><li>ユーザーがグループから削除された際、Power Platform 側のユーザーは無効化される</li></ul><p>以下の公開情報に注意点の記載がございますので、ぜひご参照ください。<br><br>参考: <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/control-user-access">環境へのユーザー アクセスのコントロール: セキュリティ グループおよびライセンス</a></p><h2 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h2><p>以上、Dataverse でのユーザーアクセスの制御についてご案内いたしました。<br>こちらの記事が皆様のセキュアな環境管理のお役に立ちましたら幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの鎌田です。&lt;/p&gt;
&lt;p&gt;今回は、Power Platform、特に Dataverse を作成した環境に対して、セキュリティ グループやセキュリティ ロールを使ってアクセスを制御する方法についてご紹介いたします。&lt;</summary>
      
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Power Platform Admin Center" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform-Admin-Center/"/>
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/categories/Dataverse/"/>
    
    <category term="Model-driven app" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/Model-driven-app/"/>
    
    
    <category term="Governance" scheme="https://jpdynamicscrm.github.io/blog/tags/Governance/"/>
    
    <category term="Model-driven app" scheme="https://jpdynamicscrm.github.io/blog/tags/Model-driven-app/"/>
    
    <category term="Dynamics" scheme="https://jpdynamicscrm.github.io/blog/tags/Dynamics/"/>
    
  </entry>
  
  <entry>
    <title>Power Platform からプライベートな Azure 仮想ネットワークに存在するデータソースを利用する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/connect-private-datasource/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/connect-private-datasource/</id>
    <published>2025-02-20T03:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.727Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの大友です。  </p><p>セキュリティ等の観点から、Azure SQL Database や Azure OpenAI 等のサービスをパブリックネットワークに公開した状態での運用は避けたい、というお問合せを頂く事があります。<br>この記事では、Power Platform からプライベートな Azure 仮想ネットワークに存在するデータソースを利用する方法について紹介します。  </p><span id="more"></span><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ol><li><a href="#anchor-begin">はじめに</a></li><li><a href="#anchor-about-opdg">オンプレミス データ ゲートウェイとは？</a></li><li><a href="#anchor-about-vndg">仮想ネットワーク データ ゲートウェイとは？</a></li><li><a href="#anchor-about-vnet">VNET for Power Platform とは？</a></li><li><a href="#anchor-diff">機能の比較</a></li><li><a href="#anchor-finish">おわりに</a></li></ol><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、 本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。  </p></div><!---------------------------------------------------------><p><a id='anchor-begin'></a></p><h2 id="1-はじめに"><a href="#1-はじめに" class="headerlink" title="1. はじめに"></a>1. はじめに</h2><p>弊社 Azure サービスではデータセンター間含めサービス間の通信は弊社ネットワークを経由しパブリックネットワークは経由しません。<br>Power Platform も Azure サービスに属しているため、例として Azure SQL からデータを取得している Power Automate であれば Power Automate サービス ～ Azure SQL の経路において、弊社外の公衆網は経由しない、ということになります。<br>Power Apps の場合はブラウザ上で動作するため、お客様ネットワーク上から弊社ネットワークまでの間を Express Route をご利用頂く等で閉域化していただく必要がございます。</p><div class="alert is-info"><p class="alert-title">Note</p><p><a href="https://azure.microsoft.com/en-us/blog/how-microsoft-builds-its-fast-and-reliable-global-network/">マイクロソフトは高速で信頼性の高いグローバル ネットワークをどのように構築しているのか (microsoft.com)</a></p><p>以下、機械翻訳での抜粋</p><p>データセンター間の Azure トラフィックはネットワーク上にとどまり、インターネット経由では流れません。これには、世界中の Microsoft サービス間のすべてのトラフィックが含まれます。たとえば、Azure 内では、仮想マシン、ストレージ、SQL 通信間のトラフィックは、送信元と宛先のリージョンに関係なく、Microsoft ネットワークのみを経由します。  </p></div><p>ご利用の要件によってデータソースが Azure 仮想ネットワーク内にのみ公開されている必要がある、といった場合のために、それらのデータソースに対応頂くための手段として Power Platform では以下の機能が提供されています。  </p><ul><li>オンプレミス データ ゲートウェイ  </li><li>仮想ネットワーク データ ゲートウェイ  </li><li>VNET for Power Platform  </li></ul><p>この記事では、これらの機能について比較したいと思います。  </p><!---------------------------------------------------------><p><a id='anchor-about-opdg'></a></p><h2 id="2-オンプレミス-データ-ゲートウェイとは？"><a href="#2-オンプレミス-データ-ゲートウェイとは？" class="headerlink" title="2. オンプレミス データ ゲートウェイとは？"></a>2. オンプレミス データ ゲートウェイとは？</h2><p><a href="https://learn.microsoft.com/en-us/data-integration/gateway/service-gateway-onprem">オンプレミス データ ゲートウェイとは</a>  </p><p>簡単に説明すると…<br>オンプレミスデータゲートウェイとは、Windows 端末を介してコネクタからデータソースにアクセスする方法で、アプリケーションを Windows 端末にインストールして利用します。<br>お客様のネットワーク内にある Windows 端末を介することで、データソースをプライベートネットワーク内においたままコネクタからデータソースにアクセスすることができます。  </p><p>以下にリクエストと応答の流れを番号と矢印で表しました。<br><img src="/blog/powerplatform/connect-private-datasource/image04.png">  </p><ol><li>Power Platfrom は Azure Relay に向けリクエストを行います。  </li><li>オンプレミス データ ゲートウェイがインストールされた端末は Azure Relay に未処理のリクエストがあるか確認します。  </li><li>Azure Relay からオンプレミス データ ゲートウェイがインストールされた端末へ未処理のリクエストを返答します。  </li><li>オンプレミス データ ゲートウェイがインストールされた端末からデータソースへデータのリクエストを行います。  </li><li>データソースからオンプレミス データ ゲートウェイがインストールされた端末へデータを返答します。  </li><li>オンプレミス データ ゲートウェイがインストールされた端末は Azure Relay へデータを返答します。  </li><li>Azure Relay 経由が Power Platform データを返答します。  </li></ol><p>上記の図にもあるように、オンプレミス データ ゲートウェイがインストールされた端末から見ると Azure Relay に対して発信リクエストのみ行い通信を確立するため、外部から端末向けの、いわゆるインバウンドのポート解放は不要となっています。<br><a href="https://learn.microsoft.com/en-us/data-integration/gateway/service-gateway-onprem-indepth#how-the-gateway-works">オンプレミス データ ゲートウェイのしくみ</a>  </p><div class="alert is-info"><p class="alert-title">Note</p><p>主にオンプレミス環境(お客様の建屋等のネットワーク)上に存在するデータを操作する際に用いられます。</p><p>関連記事：<a href="https://jpdynamicscrm.github.io/blog/powerautomate/gateway-install/">クラウド フローとオンプレミス環境間でデータ連携する方法</a>  </p></div><p>Azure 仮想ネットワークのプライベートネットワークからのみアクセスを受け付けているリソースに接続する場合、以下のような<strong>アクセス対象のデータソースと通信可能な端末</strong>を用意頂き、その端末にオンプレミス データ ゲートウェイをインストールする必要があります。  </p><ul><li>Azure 仮想マシンにAzure 仮想ネットワークに属する NIC を構成する<br><img src="/blog/powerplatform/connect-private-datasource/image01.png"></li><li>お客様ネットワーク上にある端末を利用される場合、Azure 仮想ネットワークと接続可能な Express Route をご利用頂く<br><img src="/blog/powerplatform/connect-private-datasource/image03.png"></li></ul><p>ご利用頂くにあたり、以下の注意点があります。  </p><ul><li>インストールされた端末がシャットダウン状態だと動作しません。  </li><li>環境と同じリージョンにオンプレミス データ ゲートウェイを構成頂く必要があります。  </li><li>オンプレミス データ ゲートウェイのインストールにあたってはプレミアムライセンスは必須ではありませんが、Power Apps や Power Automate で利用する際にはプレミアムライセンスが必要です。  </li><li>Azure Relay ～ Power Platform コネクタの間は閉域化できず弊社ネットワーク内での通信となるため、全経路を閉域化することはできません。 </li></ul><p>また、後述の VNET for Power Platform と比較し、以下のような差異があります。  </p><ul><li>接続単位でオンプレミス データ ゲートウェイの利用可否を指定することが可能です。  </li><li>接続毎にオンプレミス データ ゲートウェイを利用する設定で接続を作成していただく必要があります。  </li><li>オンプレミス データ ゲートウェイ用に端末を用意する必要があります。  </li><li>オンプレミス データ ゲートウェイやインストールされた端末自体のバージョン維持等のメンテナンスが必要です。  </li></ul><p>以下のコネクタがオンプレミス データ ゲートウェイに対応しています。<br><a href="https://learn.microsoft.com/ja-jp/azure/logic-apps/connect-on-premises-data-sources?WT.mc_id=Portal-Microsoft_Azure_EMA#supported-data-sources">サポートされるデータ ソース</a>  </p><div class="alert is-warning"><p class="alert-title">警告</p><p><a href="https://learn.microsoft.com/ja-jp/connectors/azureblobconnector/">Azure Blob Storage コネクタ</a>は、接続作成画面上オンプレミス データ ゲートウェイの選択項目が表示されますが、オンプレミス データ ゲートウェイには対応しておりません。</p><p>「誤ったオプションである」旨が公開情報にも明記されていますのでご注意ください。</p></div><!---------------------------------------------------------><p><a id='anchor-about-vndg'></a></p><h2 id="3-仮想ネットワーク-データ-ゲートウェイとは？"><a href="#3-仮想ネットワーク-データ-ゲートウェイとは？" class="headerlink" title="3. 仮想ネットワーク データ ゲートウェイとは？"></a>3. 仮想ネットワーク データ ゲートウェイとは？</h2><p><a href="https://learn.microsoft.com/en-us/data-integration/vnet/overview">仮想ネットワーク (VNet) データ ゲートウェイとは</a>  </p><p>仮想ネットワーク (VNet) データ ゲートウェイは、Microsoft Fabric(旧 Power BI) や Power Platfrom のデータフローを Azure 仮想ネットワークへ接続するために利用されます。  </p><div class="alert is-warning"><p class="alert-title">警告</p><p><strong>Power Apps や Power Automate ではご利用いただくことはできません</strong>のでご注意ください。</p><p>関連記事：<a href="https://jpdynamicscrm.github.io/blog/powerplatform/vnetgateway-support-status/">Power Platform での仮想ネットワーク データ ゲートウェイについて</a>  </p></div><!---------------------------------------------------------><p><a id='anchor-about-vnet'></a></p><h2 id="4-VNET-for-Power-Platform-とは？"><a href="#4-VNET-for-Power-Platform-とは？" class="headerlink" title="4. VNET for Power Platform とは？"></a>4. VNET for Power Platform とは？</h2><p><a href="https://learn.microsoft.com/en-us/power-platform/admin/vnet-support-overview">Virtual Network のサポートの概要</a>  </p><p>VNET for Power Platform は、Power Platform の環境をネットワーク委任の機能で Azure 仮想ネットワークに接続する機能です。<br><img src="/blog/powerplatform/connect-private-datasource/image02.png"></p><p>当機能に対応しているコネクタはすべて仮想ネットワーク経由でのリクエストを行います。<br>対応コネクタに限りますが、完全に Azure 仮想ネットワーク内にて完全閉域化が可能です。<br>※ Power Apps も閉域にしたい場合は、Microsoft Peering の Express Route が必要となります。  </p><div class="alert is-info"><p class="alert-title">Note</p><p>VNET for Power Platform に対応しているコネクタの一覧は、公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/en-us/power-platform/admin/vnet-support-overview#supported-services">Virtual Network のサポートの概要</a>  </p></div><p>オンプレミス データ ゲートウェイと比較し、以下のような差異があります。  </p><ul><li>オンプレミス データ ゲートウェイには対応していない Azure Blob Storage コネクタに対応しています。  </li><li>カスタムコネクタや HTTP with Microsoft Entra ID コネクタに対応しているため、Azure OpenAI 等をはじめ Azure 仮想ネットワークに対応しているサービス上に公開された API があればご利用頂く事が可能です。  </li><li>接続作成において特別な設定は不要です。  </li><li>端末やオンプレミス データ ゲートウェイのバージョン維持をはじめとしたメンテナンスは不要です。  </li><li>VNET にネットワーク委任をする Power Platform 環境は<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/managed-environment-overview">マネージド環境</a>である必要があります。<br />※マネージド環境を利用するユーザーはプレミアムライセンスが割り当てられている必要があります。 </li></ul><!---------------------------------------------------------><p><a id='anchor-diff'></a></p><h2 id="5-機能の比較"><a href="#5-機能の比較" class="headerlink" title="5. 機能の比較"></a>5. 機能の比較</h2><p>用途や必要なリソースについてまとめました。  </p><table>  <caption>    Power Platfrom ネットワーク機能の比較  </caption>  <tr>    <th>機能名</th>    <th>用途</th>    <th>対象</th>    <th>マネージド環境</th>    <th>ゲートウェイ端末</th>    <th>完全閉域化</th>  </tr>  <tr>    <td>オンプレミス<br />データ ゲートウェイ</td>    <td>Power Platform コネクタ</td>    <td>指定した接続のみ</td>    <td>不要</td>    <td><b>必要</b></td>    <td>不可</td>  </tr>  <tr>    <td>仮想ネットワーク<br />データ ゲートウェイ</td>    <td><b>データフロー<br />Microsoft Fabric</b></td>    <td>指定した接続のみ</td>    <td>不要</td>    <td>不要</td>    <td>—</td>  </tr>  <tr>    <td>VNET for Power Platform</td>    <td>Power Platform コネクタ</td>    <td><b>環境内の全対応コネクタ</b></td>    <td><b>必要</b></td>    <td>不要</td>    <td><b>可能(※)</b></td>  </tr></table>  ※ Power Apps の利用も閉域にしたい場合は、Microsoft Peering の Express Route が必要となります。  <div class="alert is-info"><p class="alert-title">Note</p><p>マネージド環境については、以下の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/managed-environment-overview">マネージド環境の概要</a>  </p></div><!---------------------------------------------------------><p><a id='anchor-finish'></a></p><h2 id="6-おわりに"><a href="#6-おわりに" class="headerlink" title="6. おわりに"></a>6. おわりに</h2><p>当記事に関連した公開情報を掲載させていただきます。<br><a href="https://azure.microsoft.com/en-us/blog/how-microsoft-builds-its-fast-and-reliable-global-network/">マイクロソフトは高速で信頼性の高いグローバル ネットワークをどのように構築しているのか (microsoft.com)</a><br><a href="https://learn.microsoft.com/en-us/data-integration/gateway/service-gateway-onprem">オンプレミス データ ゲートウェイとは</a><br><a href="https://learn.microsoft.com/en-us/data-integration/vnet/overview">仮想ネットワーク (VNet) データ ゲートウェイとは</a><br><a href="https://learn.microsoft.com/en-us/power-platform/admin/vnet-support-overview">Virtual Network のサポートの概要</a><br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/managed-environment-overview">マネージド環境の概要</a>  </p><p>Azure 仮想ネットワーク上でパブリックネットワークに公開されていないリソースへの接続に関してご参考となりましたら幸いです。<br>ご不明な点や、もし具体的にお困りの点などがございましたら、弊社サポート一同にてお待ち申し上げておりますので、ぜひお気軽にお問合せください。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの大友です。  &lt;/p&gt;
&lt;p&gt;セキュリティ等の観点から、Azure SQL Database や Azure OpenAI 等のサービスをパブリックネットワークに公開した状態での運用は避けたい、というお問合せを頂く事があります。&lt;br&gt;この記事では、Power Platform からプライベートな Azure 仮想ネットワークに存在するデータソースを利用する方法について紹介します。  &lt;/p&gt;</summary>
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Connector and Connection" scheme="https://jpdynamicscrm.github.io/blog/tags/Connector-and-Connection/"/>
    
    <category term="Network" scheme="https://jpdynamicscrm.github.io/blog/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>Power Automate クラウドフローの制限事項</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerautomate/cloudflow-limits/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerautomate/cloudflow-limits/</id>
    <published>2025-01-30T15:00:00.000Z</published>
    <updated>2025-10-23T09:21:14.584Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの山田です。<br>本記事では 下記公開情報でご案内のPower Automate クラウドフローの制限について、具体例などを用いてわかりやすく説明いたします。</p><p><a href="https://learn.microsoft.com/ja-jp/power-automate/limits-and-config">自動化フロー、スケジュールされたフロー、インスタント フローの制限事項</a></p><p>本記事は上記公開情報の制限内容を補足・説明したものとなります。<br>実際の制限値などは上記公開情報をご確認ください。</p><span id="more"></span><h1 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h1><ol><li><a href="#anchor-throughput-limits">スループットの制限</a><ol><li><a href="#anchor-power-platform-request-limits">Power Platform 要求の制限</a><ul><li><a href="#anchor-power-platform-request-limits-per">5分ごと、および24時間ごとのPower Platform要求</a></li><li><a href="#anchor-concurrent-outbound-calls">同時発信呼</a></li></ul></li><li><a href="#anchor-runtime-endpoint-request-limits">ランタイムエンドポイント要求</a><ul><li><a href="#anchor-concurrent-inbound-calls">同時着信</a></li><li><a href="#anchor-read-calls-per-5-minutes">5分ごとに通話を読み取る</a></li><li><a href="#anchor-invoke-calls-per-5-minutes">5分ごとの Invoke 呼び出し</a></li></ul></li><li><a href="#anchor-content-throughput-limit">コンテンツスループットの制限</a></li></ol></li><li><a href="#anchor-request-limits">要求の制限</a><ol><li><a href="#anchor-timeout">タイムアウトの制限</a><ul><li><a href="#anchor-outbound-synchronous-request">送信同期要求</a></li><li><a href="#anchor-outbound-asynchronous-request">送信非同期要求</a></li><li><a href="#anchor-inbound-request">受信要求</a></li></ul></li><li><a href="#anchor-message-size">メッセージサイズの制限</a></li><li><a href="#anchor-retry-policy">再試行ポリシー</a></li></ol></li><li><a href="#anchor-summary-list">制限対象単位と制限抵触時の動作まとめ</a></li></ol><hr><p><a id='anchor-throughput-limits'></a></p><h1 id="スループットの制限"><a href="#スループットの制限" class="headerlink" title="スループットの制限"></a>スループットの制限</h1><p>スループットの制限とは、単位時間あたりに処理できる数をチェックする、現時点で適用中のPower Automate 単独の制限でございます。<br>全てフロー単位での制限となり、フロー実行中にチェックされる制限となります。</p><p>この項目でご案内する制限は「スループットの制限」に該当いたします。<br>スループットの制限には下記3種類がございます。</p><ul><li>Power Platform 要求の制限</li><li>ランタイムエンドポイント要求</li><li>コンテンツスループットの制限</li></ul><p>制限に抵触した場合の動作、制限の緩和可否などは各種類によって異なります。</p><p>制限を決定する制限値は、ライセンスに基づくパフォーマンスプロファイルによって決定されます。<br>パフォーマンスプロファイルについては下記公開情報をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-automate/limits-and-config#performance-profiles">パフォーマンス プロファイル</a><br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-licensing/faqs#what-are-performance-profiles-and-how-do-i-know-which-performance-profile-my-cloud-flow-uses">パフォーマンス プロファイルとは何ですか?</a></p><p>制限の解除について、Power Automate のクラウドフローの場合はライセンス割り当て後にフローを再保存することで、新しいライセンスに紐づく制限を適用いたします。<br>再保存を行わなかった場合は、週に1度のバックグラウンド処理により適用いたします。</p><p><a id='anchor-power-platform-request-limits'></a></p><h2 id="Power-Platform-要求の制限"><a href="#Power-Platform-要求の制限" class="headerlink" title="Power Platform 要求の制限"></a>Power Platform 要求の制限</h2><p>Power Platform 要求の制限とは、フロー実行時のアクションに関する制限となります。</p><p>フロー単位での制限となります。<br>制限に抵触すると、フローが低速実行（スロットリング状態）となります。<br>また、低速実行が14日間連続で発生した場合は、クラウドフローは自動でオフとなります。</p><p>下記の２種類がございます。</p><ul><li>5分ごと、および24時間ごとのPower Platform要求</li><li>同時発信呼</li></ul><p><a id='anchor-power-platform-request-limits-per'></a></p><h3 id="5分ごと、および24時間ごとのPower-Platform要求"><a href="#5分ごと、および24時間ごとのPower-Platform要求" class="headerlink" title="5分ごと、および24時間ごとのPower Platform要求"></a>5分ごと、および24時間ごとのPower Platform要求</h3><p>詳細については下記記事をご参照ください。<br><a href="https://jpdynamicscrm.github.io/blog/powerautomate/power-automate-ppr/">Power Automate / Power Platform 要求数制限</a></p><p><a id='anchor-concurrent-outbound-calls'></a></p><h3 id="同時発信呼"><a href="#同時発信呼" class="headerlink" title="同時発信呼"></a>同時発信呼</h3><p>同時発信呼とは、ひとつのフローで同時に実行できるアクション数を指しております。<br>具体例として、フロー内でアクションが並列に実行されるよう構成されている場合や、複数のユーザーが同時にフローを実行する場合にこの制限に抵触する可能性が考えられます。</p><p>制限に抵触した場合、フローの実行が失敗します。</p><p>回避策として、例えば、コンカレンシー制御=同時実行管理をオンにすることが挙げられます。<br>同時実行する処理数を制限することで、同時発信呼の制限への抵触を回避いただけます。<br>または、ユーザー側で実行時間をずらす=ユーザー側でフローをトリガーするタイミングをずらすことも有効です。</p><p>制限の緩和策としては、パフォーマンス プロファイルをより高いものにしていただくこととなります。</p><p><a id='anchor-runtime-endpoint-request-limits'></a></p><h2 id="ランタイムエンドポイント要求"><a href="#ランタイムエンドポイント要求" class="headerlink" title="ランタイムエンドポイント要求"></a>ランタイムエンドポイント要求</h2><p>ランタイムエンドポイントとは、フロー自体のエンドポイントを指します。 (例: <a href="https://prod-00.westus.logic.azure.com/">https://prod-00.westus.logic.azure.com:443/</a>)<br>例えば、下図の「HTTP要求の受信時」トリガー(manual)を使用するフローがある場合、「HTTP URL」に直接POSTリクエストを送信することで、フローを起動することが可能でございます。</p><p><img src="/blog/powerautomate/cloudflow-limits/http-requestes-recieve.png"> </p><p>上記の例のように、フロー実行時のエンドポイントへ (から) の直接のアクセスをランタイムエンドポイント要求と呼びます。<br>エンドポイントごとに制限対象となり、制限に抵触した場合、フローの実行が失敗します。</p><p>ランタイムエンドポイント要求には3つの制限がございます。  </p><ul><li>同時着信</li><li>5分ごとに通話を読み取る</li><li>5分ごとの Invoke 呼び出し</li></ul><p><a id='anchor-concurrent-inbound-calls'></a></p><h3 id="同時着信"><a href="#同時着信" class="headerlink" title="同時着信"></a>同時着信</h3><p>同時着信とは、ひとつのフローのランタイムエンドポイントにて、同時に受付可能な要求数を指します。<br>そのため、例えば、複数ユーザーでボタントリガーのフローを共有しており、1,000 名以上のユーザーが同時刻にフローを起動した場合、この制限に抵触いたします。</p><p>制限に抵触した場合、フローの実行が失敗します。</p><p>回避策としては、例えば、コンカレンシー制御=同時実行管理をオンにすることが挙げられます。<br>同時に実行する数を制限することで、同時着信の数を減らし、制限への抵触を回避いただけます。<br>または、ユーザー側で実行時間をずらす=ユーザー側でフローをトリガーするタイミングをずらすことも有効です。</p><p>コンカレンシー制御=同時実行管理は、フロー編集画面でのトリガーの「設定」タブにてご利用いただけます。<br><img src="/blog/powerautomate/cloudflow-limits/concurrency-limit.png"> </p><div class="alert is-important"><p class="alert-title">重要</p><p>サービス保護の制限のため、緩和策はございません。</p><p>回避策をご対応ください。</p></div><p><a id='anchor-read-calls-per-5-minutes'></a></p><h3 id="5分ごとに通話を読み取る"><a href="#5分ごとに通話を読み取る" class="headerlink" title="5分ごとに通話を読み取る"></a>5分ごとに通話を読み取る</h3><p>5分間に実行可能なランタイムエンドポイントへの読み取り要求を指します。<br>例えば、フローの実行履歴から生の入力や出力を取得する際がこれにあたります。</p><p>例として、SharePoint コネクタの複数の項目の取得アクションを実行し、大量のデータを取得した場合、<br>生の出力データを確認するには、実行履歴詳細ページにて、「クリックしてダウンロードします」リンクをクリックする必要がある場合がございます。<br>リンクをクリックすると、ランタイムエンドポイントへの要求が実行され、生データをブラウザにて直接確認することが可能となります。<br>この要求が、ランタイムエンドポイントへの読み取り要求にあたります。</p><p>下図は「クリックしてダウンロードします」リンクをクリックした場合の例ですが、URL よりランタイムエンドポイントへの要求が実行されていることがわかります。</p><p><img src="/blog/powerautomate/cloudflow-limits/read-calls-per-5-minutes.png"></p><p>制限に抵触した場合、フロー実行が失敗します。</p><p>回避策としては、例えば、コンカレンシー制御=同時実行管理をオンにすることが挙げられます。<br>同時に実行する数を制限することで、5分ごとの読み取り数を削減し、制限への抵触を回避いただけます。<br>または、ユーザー側で実行時間をずらす=ユーザー側でフローをトリガーするタイミングをずらすことも有効です。</p><p>制限の緩和策としては、パフォーマンスプロファイルをより高いものにしていただくこととなります。</p><p><a id='anchor-invoke-calls-per-5-minutes'></a></p><h3 id="5分ごとの-Invoke-呼び出し"><a href="#5分ごとの-Invoke-呼び出し" class="headerlink" title="5分ごとの Invoke 呼び出し"></a>5分ごとの Invoke 呼び出し</h3><p>5 分間に実行可能なランタイムエンドポイントへの呼び出し要求を指します。<br>例えば、上記にご案内した 「HTTP 要求の受信時」トリガーを呼び出す場合など、フローを起動する操作がこれにあたります。</p><p>制限に抵触した場合、フロー実行が失敗します。</p><p>回避策としては、例えば、コンカレンシー制御=同時実行管理をオンにすることが挙げられます。<br>同時に実行する数を制限することで、5分ごとの呼び出し数を削減し、制限への抵触を回避いただけます。<br>または、ユーザー側で実行時間をずらす=ユーザー側でフローをトリガーするタイミングをずらすことも有効です。</p><p>制限の緩和策としては、パフォーマンスプロファイルをより高いものにしていただくこととなります。</p><p><a id='anchor-content-throughput-limits'></a></p><h2 id="コンテンツスループットの制限"><a href="#コンテンツスループットの制限" class="headerlink" title="コンテンツスループットの制限"></a>コンテンツスループットの制限</h2><p>コンテンツスループットとは、フロー内の各アクションを実行後の入力および出力のデータサイズを指しております。<br>よって本制限は、フローの各実行において、単位時間に処理できるアクションで取り扱う情報量の制限となります。</p><p>例えば、フロー内で SharePoint コネクタの「項目の取得」アクションが使用された場合、<br>実行履歴に表示される入力 (SharePoint に対して送信されたアドレスやリスト名など) と出力 (SharePoint から取得した項目の詳細情報) のデータサイズがカウントされます。<br>フロー毎に、全てのアクションをカウントした合計サイズによる制限となります。</p><p>継続した5分、または24時間におけるフローごとに制限対象となります。</p><p>制限に抵触すると、フローが低速実行（スロットリング状態）となります。</p><p>回避策としては、例えば、コンカレンシー制御=同時実行管理をオンにすることが挙げられます。<br>同時に実行する数を制限することで、制限時間内の実行数を削減し、制限への抵触を回避いただけます。<br>または、ユーザー側で実行時間をずらす=ユーザー側でフローをトリガーするタイミングをずらすことも有効です。</p><p>制限の緩和策としては、パフォーマンスプロファイルをより高いものにしていただくこととなります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>低速実行が14日間連続で発生した場合は、クラウドフローは自動でオフとなります。</p></div><p><a id='anchor-request-limits'></a></p><h1 id="要求の制限"><a href="#要求の制限" class="headerlink" title="要求の制限"></a>要求の制限</h1><p>HTTP要求の制限になります。<br>フロー実行では各アクションの中でHTTP要求を実行し、処理を行っております。<br>要求の制限は、各HTTP要求を実行するときにチェックされる制限でございます。</p><p><a id='anchor-timeout'></a></p><h2 id="タイムアウトの制限"><a href="#タイムアウトの制限" class="headerlink" title="タイムアウトの制限"></a>タイムアウトの制限</h2><p>この項目ではタイムアウトとなる制限をご紹介します。<br>制限に抵触した場合、フローの実行が失敗します。  </p><p>下記3種類の制限がございます。  </p><ul><li>送信同期要求</li><li>送信非同期要求</li><li>受信要求</li></ul><div class="alert is-important"><p class="alert-title">重要</p><p>サービス保護の制限のため、いずれの制限にも緩和策はございません。</p><p>タイムアウトの制限は緩和できない＝タイムアウトまでの時間を延ばすことはできないものとなっております。</p></div><p><a id='anchor-outbound-synchronous-request'></a></p><h3 id="送信同期要求"><a href="#送信同期要求" class="headerlink" title="送信同期要求"></a>送信同期要求</h3><p>フロー内の同期処理の待ち時間となります。<br>リクエストを投げてから待ち時間以内に応答がない場合、制限に抵触します。<br>INSERTやGET要求などAPIごとに制限対象となります。</p><p>制限に抵触した場合、フロー実行が失敗します。</p><p>例えば、DataverseやSQLテーブルの読み取りや書き込み時などが挙げられます。<br>テーブルに対する各操作をリクエストし、待ち時間以内に操作が完了せず、応答がない場合、フローの実行が失敗します。</p><p><a id='anchor-outbound-asynchronous-request'></a></p><h3 id="送信非同期要求"><a href="#送信非同期要求" class="headerlink" title="送信非同期要求"></a>送信非同期要求</h3><p>アクションで実行されるHTTP要求（またはAPI）の非同期処理の待ち時間となります。<br>実行しているアクションごとでの時間となります。</p><p>例えば、承認アクションなどが挙げられます。<br>承認コネクタを通じて、承認リクエストを投げると、承認者からの承認完了を待ちます。</p><p>制限に抵触した場合（＝待ち時間以内に承認完了の応答がない場合）、フローの実行は失敗します。</p><div class="alert is-important"><p class="alert-title">重要</p><p>制限の回避策はございません。</p></div><p><a id='anchor-inbound-request'></a></p><h3 id="受信要求"><a href="#受信要求" class="headerlink" title="受信要求"></a>受信要求</h3><p>応答アクションがフロー内で使用されている場合、受信要求120秒の制限が適用される場合がございます。<br>当制限は制限された時間のみ受信要求を待機する動作となります。</p><p>フロー実行単位での制限となります。</p><p>制限に抵触した場合、フロー実行が失敗します。</p><p>フローの実行開始からカウントし、受信要求の120秒を超えて、応答アクションを実行できない場合、<br>応答アクションで設定したレスポンスではなく、504 Bad Gateway Timeoutを返します。<br>応答アクションが使用されていないフローの場合は、呼び出し元にすぐに202 Acceptedを返します。</p><p>例えば、下記のような構成のフローがございます。</p><ul><li>「Power Apps がフローを呼び出したとき (V2)」トリガー</li><li>トリガーに続いて、いくつかのアクション</li><li>最後に「Power App またはフローに応答する」アクション</li></ul><p>上記フローはPower Appsキャンバスアプリから対象クラウドフローが呼び出され、「Power App またはフローに応答する」アクションによってそのフローからアプリに応答を返します。<br>トリガーと「Power App またはフローに応答する」アクションまでの間に、多くのアクションが設定されている場合、「Power App またはフローに応答する」アクションが実行されるまでに時間がかかることが想定されます。<br>トリガーが発動してから、「Power App またはフローに応答する」アクションを実行するまでに120秒を超える場合、制限に抵触いたします。</p><p>回避策としては、「Power App またはフローに応答する」アクション前までのアクションを子フローとして実行します。<br>子フローでの実行時間は待機時間にカウントされないため、制限対象の時間の短縮が可能でございます。</p><p><a id='anchor-message-size'></a></p><h2 id="メッセージサイズの制限"><a href="#メッセージサイズの制限" class="headerlink" title="メッセージサイズの制限"></a>メッセージサイズの制限</h2><p>1つのアクションでの、 HTTP要求可能なメッセージサイズの制限になります。</p><p>この制限に抵触した場合、フロー実行が失敗します。<br>下記のようなメッセージと共にエラーが発生します。  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP 要求に失敗しました: &#x27;Cannot write more bytes to the buffer than the configured maximum buffer size: 104857600.&#x27;</span><br></pre></td></tr></table></figure><p>回避策としては、アクションで処理するデータサイズを小さくします。<br>よりサイズが小さいデータを対象にアクションを設定ください。</p><p>緩和策として、通常は100MBまでとなりますが、下記条件を満たす場合、この制限は1GBとなります。<br>・アクションがチャンクをサポートしている<br>・アクションの設定でチャンクを許可している</p><p><img src="/blog/powerautomate/cloudflow-limits/message-size-with-chunking.png"></p><p><a id='anchor-retry-policy'></a></p><h2 id="再試行ポリシー"><a href="#再試行ポリシー" class="headerlink" title="再試行ポリシー"></a>再試行ポリシー</h2><p>フローが失敗した場合の再試行数の制限になります。<br>上限以上の設定は不可となり、フローが保存できません。</p><p>再試行ポリシーに「指数の間隔」を設定しますと、設定された最小間隔、最大間隔の間でランダムに再試行が行われます。<br>例えば、「間隔」に “PT7S”＝7秒と設定した場合、7秒に指数をかけて、以下のように最小間隔と最大間隔を算出します。</p><p>最小間隔　～　最大間隔</p><ul><li>1回目0秒　～7秒（7×0～7×1）</li><li>2回目7秒　～14秒（7×1～7×2）</li><li>3回目14秒　～28秒（7×2～7×4）</li><li>4回目28秒　～56秒（7×4～7×8）</li><li>5回目56秒　～112秒（7×8～7×16）</li><li>6回目112秒　～224秒（7×16～7×32）</li><li>7回目224秒　～448秒（7×32～7×64）</li></ul><p>算出された、最小間隔から最大間隔の間のどこかで、処理が再試行されます。<br>「最小間隔」「最大間隔」はオプション項目となり、設定しない場合は既定値で動作いたします。</p><p>「最小間隔」は、再試行させたい最小の間隔を設定します。「5秒」と設定しますと<br>再試行間隔は「間隔」から算出された最小間隔に関わらず、前の実行から5秒経過後となります。</p><p>「最大間隔」は、再試行させたい最大の間隔を設定します。<br>「1日」と設定しますと、「間隔」から算出された最大間隔に関わらず、1日以内に再試行されます。<br>「1時間」と設定しますと1時間以内に再試行されます。</p><p>下記公開情報もご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/azure/logic-apps/error-exception-handling#exponential-interval">指数間隔の再試行ポリシー</a></p><div class="alert is-info"><p class="alert-title">Note</p><p>再試行ポリシーの間隔、最小間隔、最大間隔は「ISO 8601」という形式を利用して設定します。</p><p>継続時間ということを表すため、「P」を先頭につけます。</p><p>時分秒を設定する時は「P」＋「T」＋数字＋「時分秒」という形で記載します。</p><p>例）</p><p>1時間　→PT1H</p><p>2時間　→PT2H</p><p>15分　→PT15M</p><p>30秒　→PT30S  </p><p>日を設定する時は、「P」＋数字＋「D」という形で記載します。</p><p>例）</p><p>1日　→P1D</p></div><p><a id='anchor-summary-list'></a></p><h1 id="制限対象単位と制限抵触時の動作まとめ"><a href="#制限対象単位と制限抵触時の動作まとめ" class="headerlink" title="制限対象単位と制限抵触時の動作まとめ"></a>制限対象単位と制限抵触時の動作まとめ</h1><table><thead><tr><th align="left">制限種類</th><th align="left">制限対象単位</th><th align="left">制限抵触時の動作</th></tr></thead><tbody><tr><td align="left"><a href="#anchor-power-platform-request-limits-per">5分ごと、および24時間ごとのPower Platform要求</a></td><td align="left"><a href="https://jpdynamicscrm.github.io/blog/powerautomate/power-automate-ppr/">Power Automate / Power Platform 要求数制限</a>を参照</td><td align="left">フローの実行が低速化</td></tr><tr><td align="left"><a href="#anchor-concurrent-outbound-calls">同時発信呼</a></td><td align="left">フローごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-concurrent-inbound-calls">同時着信</a></td><td align="left">エンドポイントごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-read-calls-per-5-minutes">5分ごとに通話を読み取る</a></td><td align="left">エンドポイントごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-invoke-calls-per-5-minutes">5分ごとの Invoke 呼び出し</a></td><td align="left">エンドポイントごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-content-throughput-limit">コンテンツスループットの制限</a></td><td align="left">フローの実行ごと</td><td align="left">フローの実行が低速化</td></tr><tr><td align="left"><a href="#anchor-outbound-synchronous-request">送信同期要求</a></td><td align="left">実行するAPI≒アクションごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-outbound-asynchronous-request">送信非同期要求</a></td><td align="left">実行するAPI≒アクションごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-inbound-request">受信要求</a></td><td align="left">フローごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-message-size">メッセージサイズの制限</a></td><td align="left">アクションごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-retry-policy">再試行ポリシー</a></td><td align="left">フローごと</td><td align="left">フローの保存が不可</td></tr></tbody></table><hr><h2 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h2><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。バージョンアップによって若干の UI の遷移など異なる場合があります。その場合は画面の指示に従って進めてください。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの山田です。&lt;br&gt;本記事では 下記公開情報でご案内のPower Automate クラウドフローの制限について、具体例などを用いてわかりやすく説明いたします。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/ja-jp/power-automate/limits-and-config&quot;&gt;自動化フロー、スケジュールされたフロー、インスタント フローの制限事項&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;本記事は上記公開情報の制限内容を補足・説明したものとなります。&lt;br&gt;実際の制限値などは上記公開情報をご確認ください。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/tags/Cloud-flow/"/>
    
  </entry>
  
  <entry>
    <title>AI Builder 利用制限について</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/Block-AI-Builder/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/Block-AI-Builder/</id>
    <published>2024-12-27T02:30:00.000Z</published>
    <updated>2025-10-23T09:21:14.683Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの藤田です。  </p><p>AI Builder は AI モデルを作成・カスタマイズして Power Platform で利用できるサービスです。<br><br>魅力的なサービスではございますが、お客様の社内ポリシー等で利用を制限したいというお問い合わせをいただくことがあります。<br><br>本記事では、AI Builder の利用前提条件と利用制限方法について解説します。</p><!-- ここに Read more 以降の文章 --><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、 本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください</p></div><hr><h2 id="AI-Builder-の利用前提条件"><a href="#AI-Builder-の利用前提条件" class="headerlink" title="AI Builder の利用前提条件"></a>AI Builder の利用前提条件</h2><p>AI Builder を利用するためには、以下の条件を満たす必要があります：</p><ul><li><p><strong>ライセンスの保有：</strong> </p><ul><li>Power Automate や Power Apps にアクセスできるライセンスが必要です（試用版やMicrosoft 365付帯ライセンスを含む）。</li><li>Dynamics 365ライセンスを持つユーザーも利用可能です。</li><li>具体的なライセンスや使用権の詳細は <a href="https://go.microsoft.com/fwlink/?LinkId=2085130">ライセンスガイド</a> をご参照ください。</li></ul></li><li><p><strong>AI Builderクレジット：</strong> </p><ul><li>テナントにAI Builder のクレジットがあることが必要です。</li><li>テナントにクレジットがない場合、ユーザー単位でAI Builder の試用版ライセンスを取得して利用することができます。</li></ul></li></ul><div class="alert is-info"><p class="alert-title">Note</p><p>AI Builder のクレジットは、環境に割り当てて使用します。 </p><p></p><p>Power Platform 管理センターにて、[設定] &gt; [AI Bulilder クレジット] の「ユーザーによる未割当のクレジットの使用を許可する」設定 がオンになっている場合は、環境に割り当てられていなくとも使用させることができます。 </p><p></p><p>クレジットは環境ごとに割り当てることができますが、モデルごと・アプリごと・フローごと等の単位で割り当てることはできません。</p></div><ul><li><strong>環境設定：</strong> <ul><li>プレビュー段階のモデルを利用する場合、環境設定で「プレビュー中のAI Builderモデルの種類の使用を有効にする」をオンにする必要があります。</li><li>AIプロンプトを利用するためには、「Power PlatformやCopilot StudioでAIプロンプト機能を有効化する」と「リージョン間でデータを移動する」の設定がオンになっている必要があります。</li></ul></li></ul><h2 id="AI-Builder-の利用制限方法"><a href="#AI-Builder-の利用制限方法" class="headerlink" title="AI Builder の利用制限方法"></a>AI Builder の利用制限方法</h2><p>AI Builder の利用を制限するためには、以下の設定を行います。</p><ul><li><strong>AI プロンプトの無効化：</strong> <ul><li>Power Platform 管理センター &gt; 環境 &gt; 対象環境 &gt; 生成AI機能 – 「リージョン間でデータを移動する」 設定をオフにします。※</li><li>Power Platform 管理センター &gt; 環境 &gt; 対象環境 &gt; 設定 &gt; 機能より、AI プロンプト – 「Power Platform や Copilot Studio で AI プロンプト機能を有効化する」 設定をオフにします。※<br><br>公開情報：<a href="https://learn.microsoft.com/ja-jp/ai-builder/administer#enable-or-disable-ai-prompts-in-power-platform-and-copilot-studio">AIプロンプトを有効または無効にする</a></li></ul></li></ul><div class="alert is-info"><p class="alert-title">Note</p><p>※ 「リージョン間でデータを移動する」 設定、「Power Platform や Copilot Studio で AI プロンプト機能を有効化する」 設定は、</p><p>AI Builder のみならず Copilot Studio 等、Power Platform 上の生成 AI 機能に影響しますのでご注意ください。</p><p></p><p>Copilot と生成 AI 機能の無効化について、<a href="https://jpdynamicscrm.github.io/blog/copilotstudio/copilot-studio-data-handling/#Copilot-%E3%81%A8%E7%94%9F%E6%88%90-AI-%E6%A9%9F%E8%83%BD%E3%81%AE%E7%84%A1%E5%8A%B9%E5%8C%96%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">こちらのブログ記事</a>もご参照ください。</p></div><ul><li><p><strong>AI モデルの利用無効化：</strong></p><ul><li><p>テナントにAI Builderのクレジットがない場合：</p><ul><li>試用版を無効にするために、<a href="https://learn.microsoft.com/ja-jp/ai-builder/ai-builder-trials#can-i-block-users-in-my-organization-from-signing-up-for-an-ai-builder-trial">「ユーザーによる未割当のクレジットの使用を許可する」設定</a>をオフにします。</li><li><a href="https://learn.microsoft.com/ja-jp/ai-builder/administer#enable-or-disable-ai-builder-preview-features">「プレビュー中のAI Builderモデルの種類の使用を有効にする」設定</a>をオフにします。</li></ul></li><li><p>テナントにAI Builderのクレジットがある場合：</p><ul><li>「ユーザーによる未割当のクレジットの使用を許可する」設定をオフにします。</li><li>対象環境にAI Builderのクレジットが割り当てられていないことを確認します。</li><li>「プレビュー中のAI Builderモデルの種類の使用を有効にする」設定をオフにします。</li></ul></li></ul></li></ul><p>これらの設定を行うことで、AI Builderの試用版やクレジットを消費しないプレビュー段階のモデルを含め、AIモデルの作成・使用を制限することができます。</p><h2 id="注意事項"><a href="#注意事項" class="headerlink" title="注意事項"></a>注意事項</h2><p>ユーザーの権限に応じて、既存のモデルやプロンプトの一覧にアクセスすることは可能ですが、上記設定によりモデル・プロンプトの利用はできない状態となります。</p><p>なお、外部サイト等にて、セキュリティ ロールを使用した無効化方法を検証した情報があります。</p><p>Power Apps や Power Automate を使用するための Environment Maker ロールに AI Builder の利用ができる特権が含まれておりますため、<br>このロールの剥奪を行うと影響範囲がAI Builderのみではなくなる点、<br>また既定の環境では Environment Maker の剝奪は出来ない点等から、<br>セキュリティ ロールを使用した制御は「AI Builder の利用制限」としては推奨される方法ではございませんのでご注意ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの藤田です。  &lt;/p&gt;
&lt;p&gt;AI Builder は AI モデルを作成・カスタマイズして Power Platform で利用できるサービスです。&lt;br&gt;&lt;br&gt;魅力的なサービスではございますが、お客様の社内ポリ</summary>
      
    
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Governance" scheme="https://jpdynamicscrm.github.io/blog/tags/Governance/"/>
    
    <category term="AI Builder" scheme="https://jpdynamicscrm.github.io/blog/tags/AI-Builder/"/>
    
  </entry>
  
  <entry>
    <title>キャンバス アプリ・クラウド フローで使用しているコネクタの一覧取得</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/list-connectors-used-by-apps-and-flows/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/list-connectors-used-by-apps-and-flows/</id>
    <published>2024-12-27T02:30:00.000Z</published>
    <updated>2025-10-23T09:21:14.774Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの藤田、網野です。  </p><p>よくお問合せをいただく、Power Apps キャンバス アプリ・Power Automate クラウド フローで使用されているコネクタの一覧取得方法についてご案内いたします。</p><p>特定のコネクタが使用されているかどうか、どのフローやアプリでプレミアム コネクタが使用されているか、といったことを確認する際に是非お役立てください。</p><span id="more"></span><hr><h2 id="PowerShell-による出力"><a href="#PowerShell-による出力" class="headerlink" title="PowerShell による出力"></a>PowerShell による出力</h2><h3 id="事前準備"><a href="#事前準備" class="headerlink" title="事前準備"></a>事前準備</h3><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-powershell#cmdlets">公開情報 - Power Apps と Power Automate の PowerShell サポート</a> に従い、PowerApps の管理モジュールを PowerShell を実行する端末にインストールしてください。</p><h3 id="コマンド"><a href="#コマンド" class="headerlink" title="コマンド"></a>コマンド</h3><p>アプリ・フローで使用されている接続を使用するコネクタにつきましては、Gist に登録されている PowerShell スクリプトをご実行いただくことで取得することが出来ます。</p><p>具体的なコマンドは <a href="https://gist.github.com/jameswh3/b1ddca1705a1e747ce3c8453e1f6dc7e">Gist - Get-PowerAppsFlowsConnections.ps1</a> をご参照ください。</p><p>日本語が含まれるアプリやフローの情報を取得する場合は、PowerShell コマンドの最終行に “-Encofing UTF8” を追加し、文字コードの指定してください。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$powerPlatObjects | Export-Csv $outputFile -NoTypeInformation -Encoding UTF8</span><br></pre></td></tr></table></figure><h3 id="出力結果"><a href="#出力結果" class="headerlink" title="出力結果"></a>出力結果</h3><p>コマンド内で指定したフォルダに以下のような形式で CSV ファイルとして出力されます。<br><img src="/blog/powerplatform/list-connectors-used-by-apps-and-flows/csv.png"></p><h3 id="活用例"><a href="#活用例" class="headerlink" title="活用例"></a>活用例</h3><h4 id="◆-フローやアプリで使用しているコネクタを確認する"><a href="#◆-フローやアプリで使用しているコネクタを確認する" class="headerlink" title="◆ フローやアプリで使用しているコネクタを確認する"></a>◆ フローやアプリで使用しているコネクタを確認する</h4><p>“ConnectorName” 列または”ConnectionId” 列から確認できます。<br><img src="/blog/powerplatform/list-connectors-used-by-apps-and-flows/csv-connector.png"></p><p>“ConnectoinId” 列から “/providers/Microsoft.PowerApps/scopes/admin/apis/shared_” を削除すると、コネクタIDが取得できます。<br>取得したコネクタ ID を利用して、コネクタの公開情報へアクセスすることができます。<br>“<a href="https://learn.microsoft.com/ja-jp/connectors/%7B%E3%82%B3%E3%83%8D%E3%82%AF%E3%82%BFID%7D/&quot;">https://learn.microsoft.com/ja-jp/connectors/{コネクタID}/&quot;</a>  </p><p>例)</p><ul><li>Sharepoint : <a href="https://learn.microsoft.com/ja-jp/connectors/sharepointonline/">https://learn.microsoft.com/ja-jp/connectors/sharepointonline/</a>  </li><li>SQL Server : <a href="https://learn.microsoft.com/ja-jp/connectors/sql/">https://learn.microsoft.com/ja-jp/connectors/sql/</a>  </li></ul><h4 id="◆-フローやアプリでプレミアムコネクタが使われているか確認する"><a href="#◆-フローやアプリでプレミアムコネクタが使われているか確認する" class="headerlink" title="◆ フローやアプリでプレミアムコネクタが使われているか確認する"></a>◆ フローやアプリでプレミアムコネクタが使われているか確認する</h4><p>“Tier” 列が “Premium” となっているコネクタがプレミアムコネクタとなります。<br><img src="/blog/powerplatform/list-connectors-used-by-apps-and-flows/csv-premium.png"></p><h3 id="留意点"><a href="#留意点" class="headerlink" title="留意点"></a>留意点</h3><p>本方法は接続に基づいて出力を行うため、HTTP コネクタなど接続が作られないコネクタは出力することができません。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの藤田、網野です。  &lt;/p&gt;
&lt;p&gt;よくお問合せをいただく、Power Apps キャンバス アプリ・Power Automate クラウド フローで使用されているコネクタの一覧取得方法についてご案内いたします。&lt;/p&gt;
&lt;p&gt;特定のコネクタが使用されているかどうか、どのフローやアプリでプレミアム コネクタが使用されているか、といったことを確認する際に是非お役立てください。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Canvas app" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/Canvas-app/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Apps/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
  </entry>
  
</feed>
